<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SBS Workout Tracker</title>
    <style>
@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap');

:root {
    --bg: #f6f7fb;
    --bg-accent: #e8f1ff;
    --surface: #ffffff;
    --surface-muted: #f1f5f9;
    --border: #e2e8f0;
    --text: #0f172a;
    --text-muted: #475569;
    --text-soft: #64748b;
    --brand: #1d4ed8;
    --brand-strong: #1e40af;
    --brand-contrast: #eff6ff;
    --accent: #0f766e;
    --accent-strong: #0ea5a4;
    --success: #16a34a;
    --danger: #dc2626;
    --warning: #f59e0b;
    --shadow-sm: 0 8px 20px rgba(15, 23, 42, 0.08);
    --shadow-md: 0 16px 40px rgba(15, 23, 42, 0.12);
    --radius-sm: 10px;
    --radius-md: 16px;
    --radius-lg: 22px;
    --radius-xl: 26px;
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    --bg-primary: var(--surface);
    --bg-secondary: var(--surface-muted);
    --bg-tertiary: var(--bg);
    --text-primary: var(--text);
    --text-secondary: var(--text-muted);
    --text-tertiary: var(--text-soft);
    --border-color: var(--border);
    --border-color-light: rgba(226, 232, 240, 0.7);
    --color-primary: var(--brand);
    --color-primary-hover: var(--brand-strong);
    --color-accent: var(--accent-strong);
    --color-success: var(--success);
    --color-warning: var(--warning);
    --color-danger: var(--danger);
    --color-info: var(--accent);
    --shadow-xs: 0 4px 12px rgba(15, 23, 42, 0.08);
}

html[data-theme="dark"] {
    --bg: #0b1119;
    --bg-accent: #0f172a;
    --surface: #111827;
    --surface-muted: #0f172a;
    --border: #1f2937;
    --text: #e2e8f0;
    --text-muted: #cbd5e1;
    --text-soft: #94a3b8;
    --brand: #60a5fa;
    --brand-strong: #3b82f6;
    --brand-contrast: rgba(30, 64, 175, 0.2);
    --accent: #2dd4bf;
    --accent-strong: #14b8a6;
    --success: #22c55e;
    --danger: #f87171;
    --warning: #fbbf24;
    --shadow-sm: 0 8px 22px rgba(2, 6, 23, 0.4);
    --shadow-md: 0 18px 44px rgba(2, 6, 23, 0.55);
    --shadow-xs: 0 4px 12px rgba(2, 6, 23, 0.5);
    --border-color-light: rgba(148, 163, 184, 0.18);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Manrope', 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: radial-gradient(1000px 500px at -10% -10%, rgba(59, 130, 246, 0.15) 0%, transparent 55%),
                radial-gradient(800px 400px at 100% 0%, rgba(14, 165, 164, 0.18) 0%, transparent 50%),
                var(--bg);
    padding-bottom: calc(96px + env(safe-area-inset-bottom));
    color: var(--text);
    min-height: 100vh;
}

html[data-theme="dark"] body {
    background: radial-gradient(900px 500px at -10% -10%, rgba(59, 130, 246, 0.18) 0%, transparent 55%),
                radial-gradient(900px 500px at 110% -20%, rgba(45, 212, 191, 0.15) 0%, transparent 55%),
                var(--bg);
}

body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: linear-gradient(rgba(15, 23, 42, 0.03) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(15, 23, 42, 0.03) 1px, transparent 1px);
    background-size: 36px 36px;
    pointer-events: none;
    z-index: 0;
}

html[data-theme="dark"] body::before {
    background-image: linear-gradient(rgba(148, 163, 184, 0.08) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(148, 163, 184, 0.08) 1px, transparent 1px);
}

.header {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 55%, #0f766e 130%);
    color: white;
    padding: 18px 22px 16px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: var(--shadow-md);
}

.header h1 {
    font-family: 'Space Grotesk', 'Manrope', sans-serif;
    font-size: 22px;
    margin-bottom: 8px;
    letter-spacing: -0.4px;
}

.week-info {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
    justify-content: center;
    row-gap: 6px;
    font-size: 12px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.9);
}

.week-pill {
    padding: 6px 12px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.16);
    border: 1px solid rgba(255, 255, 255, 0.22);
    letter-spacing: 0.2px;
}

.nav-tabs {
    display: flex;
    gap: 6px;
    padding: 10px 16px;
    background: rgba(255, 255, 255, 0.92);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 78px;
    z-index: 99;
    backdrop-filter: blur(16px);
}

html[data-theme="dark"] .nav-tabs {
    background: rgba(15, 23, 42, 0.92);
}

.nav-tab {
    flex: 1;
    padding: 10px 12px;
    text-align: center;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 999px;
    font-size: 13px;
    font-weight: 700;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s ease;
}

.nav-tab:hover {
    color: var(--text);
    background: var(--surface-muted);
}

.nav-tab.active {
    color: var(--brand-strong);
    background: var(--brand-contrast);
    border-color: rgba(29, 78, 216, 0.25);
    box-shadow: var(--shadow-sm);
}

button:focus-visible,
input:focus-visible,
select:focus-visible {
    outline: 2px solid rgba(29, 78, 216, 0.6);
    outline-offset: 2px;
}

.tab-content {
    display: none;
    padding: 24px 18px 32px;
    max-width: 820px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
    overflow-x: hidden;
}

.tab-content.active {
    display: block;
    animation: fadeInUp 0.35s ease;
}

@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}

.week-summary-card {
    background: linear-gradient(135deg, rgba(29, 78, 216, 0.12), rgba(14, 165, 164, 0.12));
    border: 1px solid rgba(29, 78, 216, 0.18);
    padding: 16px 18px;
    border-radius: var(--radius-lg);
    margin-bottom: 18px;
    text-align: center;
}

.week-summary-label {
    font-size: 11px;
    color: var(--text-soft);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.2px;
}

.week-summary-value {
    font-size: 30px;
    font-weight: 800;
    color: var(--text);
    margin-top: 6px;
}

.day-selector {
    display: flex;
    gap: 8px;
    background: var(--surface-muted);
    padding: 6px;
    border-radius: 999px;
    margin-bottom: 20px;
    border: 1px solid var(--border);
}

.day-btn {
    flex: 1;
    padding: 10px 12px;
    background: transparent;
    border: none;
    border-radius: 999px;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    color: var(--text-muted);
    transition: all 0.2s ease;
}

.day-btn.active {
    background: white;
    color: var(--brand-strong);
    box-shadow: var(--shadow-sm);
}

.exercise-card {
    background: var(--surface);
    padding: 16px 16px 14px;
    border-radius: var(--radius-md);
    margin-bottom: 16px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    position: relative;
    overflow: hidden;
}

.exercise-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-left: 4px solid var(--brand);
    pointer-events: none;
}

.exercise-name {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 12px;
    color: var(--text);
}

.exercise-details {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
    margin-bottom: 12px;
    padding: 12px;
    background: var(--surface-muted);
    border-radius: var(--radius-sm);
    font-size: 13px;
}

.detail-label {
    color: var(--text-soft);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.detail-value {
    font-weight: 700;
    color: var(--text);
}

.amrap-input {
    display: flex;
    align-items: center;
    gap: 10px;
}

.amrap-input label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
}

.amrap-input input {
    flex: 1;
    padding: 8px 10px;
    font-size: 16px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    max-width: 90px;
    background: white;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.amrap-input input:focus {
    outline: none;
    border-color: rgba(29, 78, 216, 0.6);
    box-shadow: 0 0 0 3px rgba(29, 78, 216, 0.15);
}

.progression-hint {
    font-size: 11px;
    color: var(--text-soft);
    margin-top: 6px;
    font-style: italic;
}

.progression-positive { color: var(--success); }
.progression-negative { color: var(--danger); }

.settings-section {
    background: var(--surface);
    padding: 18px;
    border-radius: var(--radius-md);
    margin-bottom: 20px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
}

.settings-section h2 {
    font-size: 18px;
    margin-bottom: 15px;
    color: var(--text);
}

.settings-layout {
    display: grid;
    grid-template-columns: 220px 1fr;
    gap: 18px;
    align-items: start;
    width: 100%;
    min-width: 0;
}

.settings-sidebar {
    position: sticky;
    top: 92px;
    align-self: start;
}

.settings-nav {
    display: flex;
    flex-direction: column;
    gap: 8px;
    background: var(--surface);
    padding: 12px;
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
    max-width: 100%;
}

.settings-nav-button {
    border: 1px solid transparent;
    background: transparent;
    color: var(--text-muted);
    padding: 10px 12px;
    border-radius: 12px;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.2px;
    text-transform: uppercase;
    text-align: left;
    transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

.settings-nav-button:hover {
    background: var(--surface-muted);
    color: var(--text);
}

.settings-nav-button:focus-visible {
    outline: 2px solid var(--brand-strong);
    outline-offset: 2px;
}

.settings-nav-button.active {
    background: var(--brand-contrast);
    color: var(--brand-strong);
    border-color: rgba(29, 78, 216, 0.35);
    box-shadow: var(--shadow-xs);
    position: relative;
}

.settings-nav-button.active::after {
    content: '';
    position: absolute;
    left: 6px;
    top: 8px;
    bottom: 8px;
    width: 3px;
    border-radius: 999px;
    background: var(--brand-strong);
}

.settings-panels {
    min-width: 0;
    max-width: 100%;
}

.settings-panel {
    display: none;
}

.settings-panel.active {
    display: block;
    animation: settingsPanelIn 180ms ease;
}

.settings-section {
    max-width: 100%;
}

@keyframes settingsPanelIn {
    from {
        opacity: 0;
        transform: translateY(6px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (max-width: 900px) {
    .settings-layout {
        grid-template-columns: 1fr;
    }

    .settings-sidebar {
        position: static;
    }

    .settings-nav {
        flex-direction: column;
        overflow: visible;
        padding: 8px;
    }

    .settings-nav-button {
        width: 100%;
        text-align: left;
    }

    .settings-nav-button.active::after {
        left: 6px;
        right: auto;
        top: 8px;
        bottom: 8px;
        width: 3px;
        height: auto;
    }
}

.form-group { margin-bottom: 15px; }

.form-group label {
    display: block;
    font-size: 12px;
    font-weight: 700;
    color: var(--text-soft);
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.6px;
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 10px 12px;
    font-size: 14px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    background: white;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: rgba(29, 78, 216, 0.6);
    box-shadow: 0 0 0 3px rgba(29, 78, 216, 0.15);
}

.form-group textarea {
    min-height: 120px;
    resize: vertical;
}

.form-group.form-group-spaced {
    margin-top: 20px;
}

.helper-text {
    font-size: 12px;
    color: var(--text-soft);
    margin-bottom: 15px;
    line-height: 1.5;
}

.form-help {
    display: block;
    margin-top: 6px;
    font-size: 11px;
    color: var(--text-soft);
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text);
    text-transform: none;
    letter-spacing: 0;
    margin-bottom: 0;
}

.file-input {
    padding: 8px 10px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    background: var(--surface-muted);
}

.btn {
    width: 100%;
    padding: 12px 14px;
    border: none;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.btn:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
}

.btn:active {
    transform: translateY(1px);
}

.btn-primary {
    background: linear-gradient(135deg, var(--brand) 0%, var(--brand-strong) 100%);
    color: white;
    box-shadow: var(--shadow-sm);
}

.btn-secondary {
    background: var(--surface-muted);
    color: var(--text);
    margin-top: 10px;
    border: 1px solid var(--border);
}

.btn-secondary:hover {
    border-color: rgba(29, 78, 216, 0.35);
}

.btn-danger {
    background: linear-gradient(135deg, #ef4444 0%, #b91c1c 100%);
    color: white;
    margin-top: 10px;
}

.btn-danger:hover {
    box-shadow: 0 10px 20px rgba(185, 28, 28, 0.2);
}

.btn-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.btn-icon svg {
    width: 16px;
    height: 16px;
}

.button-stack {
    display: grid;
    gap: 10px;
}

.history-week {
    background: var(--surface);
    padding: 16px;
    border-radius: var(--radius-md);
    margin-bottom: 16px;
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
}

.history-week h3 {
    font-size: 16px;
    margin-bottom: 10px;
    color: var(--text);
}

.history-exercise {
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
    font-size: 13px;
    color: var(--text-muted);
}

.history-exercise:last-child { border-bottom: none; }

.completed-badge {
    display: inline-block;
    padding: 2px 8px;
    background: var(--success);
    color: white;
    border-radius: 999px;
    font-size: 10px;
    margin-left: 6px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 12px;
    margin-bottom: 20px;
}

.stat-card {
    background: var(--surface);
    padding: 16px;
    border-radius: var(--radius-md);
    text-align: center;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
}

.stat-value {
    font-size: 24px;
    font-weight: 800;
    color: var(--text);
    margin-bottom: 6px;
}

.stat-label {
    font-size: 11px;
    color: var(--text-soft);
    text-transform: uppercase;
    letter-spacing: 0.6px;
}

.stat-card.highlight {
    background: linear-gradient(135deg, rgba(29, 78, 216, 0.16) 0%, rgba(14, 165, 164, 0.2) 100%);
    color: var(--text);
    border-color: rgba(29, 78, 216, 0.2);
}

.stat-card.with-ring .stat-label {
    margin-top: var(--spacing-sm);
}

.chart-container {
    background: var(--surface);
    padding: 18px;
    border-radius: var(--radius-md);
    margin-bottom: 20px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
}

.chart-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 12px;
}

.chart-canvas { width: 100%; height: 200px; position: relative; }

.bar-chart {
    display: flex;
    align-items: flex-end;
    justify-content: space-around;
    height: 100%;
    gap: 6px;
}

.bar {
    flex: 1;
    background: linear-gradient(to top, rgba(29, 78, 216, 0.85), rgba(14, 165, 164, 0.85));
    border-radius: 6px 6px 0 0;
    position: relative;
    min-height: 3px;
    transition: transform 0.2s ease;
}

.bar:hover { transform: translateY(-4px); }

.bar-label {
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10px;
    color: var(--text-soft);
    white-space: nowrap;
}

.bar-value {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10px;
    font-weight: 700;
    color: var(--text);
}

.line-chart { position: relative; height: 100%; }

.line-path { stroke: var(--brand); stroke-width: 2; fill: none; }

.line-dot { fill: var(--brand); }

.progress-section {
    background: var(--surface);
    padding: 16px;
    border-radius: var(--radius-md);
    margin-bottom: 16px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
}

.progress-section h3 { font-size: 16px; color: var(--text); margin-bottom: 10px; }

.lift-progress { padding: 10px 0; border-bottom: 1px solid var(--border); }

.lift-progress:last-child { border-bottom: none; }

.lift-name { font-weight: 700; color: var(--text); margin-bottom: 6px; }

.lift-stats { display: flex; justify-content: space-between; font-size: 13px; color: var(--text-muted); }

.lift-change { font-weight: 700; }

.lift-change.positive { color: var(--success); }

.lift-change.negative { color: var(--danger); }

.setup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(15, 23, 42, 0.65);
    z-index: 1000;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
    backdrop-filter: blur(6px);
}

.setup-overlay.active { display: flex; }

.setup-modal {
    background: var(--surface);
    border-radius: var(--radius-lg);
    max-width: 520px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    padding: 28px;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--border);
}

.setup-actions {
    position: sticky;
    bottom: 0;
    margin: 0 -28px -28px;
    padding: 16px 28px 24px;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.92) 40%, #fff 100%);
    border-top: 1px solid rgba(226, 232, 240, 0.6);
}

html[data-theme="dark"] .setup-actions {
    background: linear-gradient(180deg, rgba(15, 23, 42, 0) 0%, rgba(15, 23, 42, 0.92) 40%, rgba(15, 23, 42, 0.98) 100%);
    border-top: 1px solid rgba(148, 163, 184, 0.2);
}

.setup-modal h2 {
    font-size: 24px;
    margin-bottom: 8px;
    color: var(--text);
    font-family: 'Space Grotesk', 'Manrope', sans-serif;
}

.setup-modal p {
    color: var(--text-muted);
    margin-bottom: 22px;
    font-size: 14px;
}

.setup-section { margin-bottom: 22px; }

.setup-section h3 { font-size: 16px; color: var(--text); margin-bottom: 12px; }

@media (min-width: 860px) {
    .tab-content { padding: 32px 0 40px; }
    .day-selector { max-width: 420px; }
    .stats-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    .bottom-nav { display: none; }
}

@media (max-width: 860px) {
    .nav-tabs { display: none; }
}

@media (prefers-reduced-motion: reduce) {
    * { animation: none !important; transition: none !important; }
}

.week-nav-btn {
    background: rgba(255, 255, 255, 0.18);
    border: 1px solid rgba(255, 255, 255, 0.28);
    color: #fff;
    width: 34px;
    height: 34px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.15s ease, background 0.2s ease, border-color 0.2s ease;
}

.week-nav-btn:hover {
    background: rgba(255, 255, 255, 0.26);
}

.week-nav-btn:active {
    transform: scale(0.96);
}

.week-nav-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.day-btn.completed {
    background: rgba(22, 163, 74, 0.18);
    color: #166534;
    box-shadow: var(--shadow-sm);
}

.day-btn.completed.active {
    background: #16a34a;
    color: #fff;
}

.day-btn.completed::after {
    content: '✓';
    margin-left: 6px;
    font-size: 10px;
    font-weight: 800;
    opacity: 0.85;
}

.stepper-control {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--surface-muted);
    border-radius: var(--radius-md);
    padding: 4px;
    border: 1px solid var(--border);
}

.stepper-btn {
    width: 44px;
    height: 44px;
    flex-shrink: 0;
    border: none;
    background: var(--surface);
    color: var(--text);
    font-size: 18px;
    font-weight: 700;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.stepper-btn:hover {
    background: var(--brand);
    color: #fff;
}

.stepper-btn:active {
    transform: scale(0.95);
}

.stepper-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.stepper-value {
    min-width: 48px;
    text-align: center;
    font-size: 20px !important;
    font-weight: 700;
    color: var(--text);
    padding: 0 8px;
    border: none;
    background: transparent;
    outline: none;
    cursor: text;
}

.stepper-value.empty {
    color: var(--text-soft);
    font-weight: 500;
}

.stepper-value::placeholder {
    color: var(--text-soft);
    font-weight: 500;
}

.stepper-value::-webkit-outer-spin-button,
.stepper-value::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.stepper-value[type=number] {
    -moz-appearance: textfield;
}

.set-circles {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 12px;
    margin-bottom: 18px;
}

.set-circle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 1px solid var(--border);
    background: #fff;
    color: var(--text-muted);
    font-size: 15px;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 2px;
    cursor: pointer;
    transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease, transform 0.1s ease;
    flex-shrink: 0;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    box-shadow: var(--shadow-sm);
}

html[data-theme="dark"] .set-circle {
    background: var(--surface);
    border-color: var(--border);
    color: var(--text);
    box-shadow: var(--shadow-xs);
}

.set-circle:hover {
    border-color: rgba(29, 78, 216, 0.35);
    color: var(--text);
    transform: translateY(-1px);
}

html[data-theme="dark"] .set-circle:hover {
    border-color: rgba(96, 165, 250, 0.55);
}

.set-circle:active {
    transform: scale(0.92);
}

.set-circle.completed {
    background: var(--brand);
    border-color: var(--brand);
    color: #fff;
}

.set-circle.amrap-circle {
    position: relative;
    border: 2px dotted rgba(29, 78, 216, 0.5);
    background: #fff;
    color: var(--text-soft);
    cursor: default;
}

html[data-theme="dark"] .set-circle.amrap-circle {
    background: var(--surface-muted);
    border-color: rgba(96, 165, 250, 0.6);
    color: var(--text-muted);
}

.set-circle.amrap-circle:hover {
    transform: none;
    border-color: rgba(29, 78, 216, 0.6);
    color: var(--text);
}

.set-circle.amrap-circle.has-value {
    background: var(--brand);
    border-style: solid;
    border-color: var(--brand);
    color: #fff;
}

.set-circle.amrap-circle::after {
    content: attr(data-label);
    position: absolute;
    bottom: -16px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 9px;
    letter-spacing: 0.6px;
    text-transform: uppercase;
    color: var(--text-soft);
    background: #fff;
    padding: 2px 8px;
    border-radius: 999px;
    border: 1px solid var(--border);
    box-shadow: var(--shadow-xs);
    white-space: nowrap;
}

html[data-theme="dark"] .set-circle.amrap-circle::after {
    color: var(--text-muted);
    background: var(--surface);
    border-color: var(--border);
}

.set-circle.amrap-circle.has-value::after {
    color: #fff;
    background: rgba(15, 23, 42, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
}

html[data-theme="dark"] .set-circle.amrap-circle.has-value::after {
    background: rgba(15, 23, 42, 0.7);
    border-color: rgba(255, 255, 255, 0.25);
}

.amrap-value {
    font-size: 19px;
    font-weight: 800;
    line-height: 1;
}

.amrap-helper {
    margin-top: 6px;
    font-size: 11px;
    color: var(--text-soft);
}

.set-actions {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-top: 6px;
}

.set-action-btn {
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: #fff;
    font-size: 11px;
    font-weight: 700;
    color: var(--text-muted);
    cursor: pointer;
}

html[data-theme="dark"] .set-action-btn {
    background: var(--surface);
    color: var(--text);
    border-color: var(--border);
}

.set-action-btn:hover {
    color: var(--text);
    border-color: rgba(29, 78, 216, 0.4);
}

html[data-theme="dark"] .set-action-btn:hover {
    border-color: rgba(96, 165, 250, 0.5);
}

.completed-badge.muted {
    background: rgba(15, 23, 42, 0.08);
    color: var(--text-muted);
}

.rest-timer {
    position: fixed;
    bottom: 90px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, var(--brand-strong), var(--accent-strong));
    color: #fff;
    padding: 20px;
    border-radius: 14px;
    box-shadow: var(--shadow-md);
    z-index: 1000;
    min-width: 280px;
    text-align: center;
}

.timer-display {
    font-size: 46px;
    font-weight: 800;
    margin-bottom: 12px;
    font-family: 'Space Grotesk', 'Manrope', sans-serif;
    letter-spacing: 1px;
}

.timer-controls {
    display: flex;
    gap: 8px;
    justify-content: center;
}

.timer-btn {
    padding: 10px 18px;
    border: none;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.9);
    color: var(--brand-strong);
    transition: opacity 0.2s ease;
}

.timer-btn:hover {
    opacity: 0.9;
}

.timer-btn.secondary {
    background: rgba(255, 255, 255, 0.28);
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.5);
}

.timer-btn.secondary:hover {
    opacity: 1;
    background: rgba(255, 255, 255, 0.35);
}

.note {
    padding: 8px 10px;
    border-radius: 10px;
    font-size: 12px;
    background: var(--surface-muted);
    color: var(--text-soft);
    border: 1px solid var(--border);
}

.note-warning {
    background: rgba(245, 158, 11, 0.12);
    color: #92400e;
    border-color: rgba(245, 158, 11, 0.25);
}

.note-compact {
    margin-top: -8px;
}

.note-muted {
    background: var(--surface-muted);
    color: var(--text-soft);
}

.history-day {
    margin-top: 10px;
}

.empty-state {
    text-align: center;
    padding: var(--spacing-xl) var(--spacing-lg);
}

.empty-state-icon {
    margin-bottom: var(--spacing-md);
    opacity: 0.3;
    font-size: 56px;
}

.empty-state-title {
    color: var(--text);
    margin-bottom: var(--spacing-sm);
    font-size: 18px;
    font-weight: 700;
}

.empty-state-note {
    color: var(--text-soft);
    font-size: 13px;
}

.info-block {
    font-size: 13px;
    color: var(--text-muted);
    line-height: 1.6;
}

.info-subtext {
    margin-top: 8px;
    font-size: 12px;
    color: var(--text-soft);
}

.form-message {
    margin-top: 15px;
    display: none;
    font-size: 13px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid transparent;
}

.form-message.success {
    color: #047857;
    background: rgba(16, 185, 129, 0.12);
    border-color: rgba(16, 185, 129, 0.25);
}

.form-message.error {
    color: #b91c1c;
    background: rgba(239, 68, 68, 0.12);
    border-color: rgba(239, 68, 68, 0.25);
}

.pr-list {
    display: grid;
    gap: 10px;
}

.pr-card {
    background: linear-gradient(135deg, rgba(29, 78, 216, 0.95) 0%, rgba(14, 165, 164, 0.95) 100%);
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-md);
    padding: 12px 14px;
    box-shadow: var(--shadow-sm);
}

.pr-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
}

.pr-card-title {
    font-weight: 700;
    font-size: 14px;
    margin-bottom: 4px;
}

.pr-card-meta {
    font-size: 12px;
    opacity: 0.9;
}

.pr-card-meta span {
    margin-left: 10px;
    font-weight: 600;
}

.pr-card-date {
    text-align: right;
    font-size: 11px;
    opacity: 0.8;
}

.timer-btn.secondary {
    background: rgba(255, 255, 255, 0.3);
    color: #fff;
}

.plate-calculator {
    margin-top: 12px;
    padding: 14px;
    background: linear-gradient(135deg, rgba(29, 78, 216, 0.08), rgba(14, 165, 164, 0.12));
    border-radius: var(--radius-md);
    border: 1px solid rgba(29, 78, 216, 0.2);
    box-shadow: var(--shadow-sm);
    display: grid;
    gap: 10px;
}

html[data-theme="dark"] .plate-calculator {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.18), rgba(20, 184, 166, 0.18));
    border-color: rgba(96, 165, 250, 0.35);
}

.plate-calculator-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
}

.plate-total {
    font-size: 11px;
    font-weight: 700;
    color: var(--brand-strong);
    background: var(--brand-contrast);
    padding: 4px 8px;
    border-radius: 999px;
    border: 1px solid rgba(29, 78, 216, 0.25);
}

html[data-theme="dark"] .plate-total {
    color: var(--text);
    background: rgba(96, 165, 250, 0.2);
    border-color: rgba(96, 165, 250, 0.4);
}

.plate-summary {
    font-size: 12px;
}

.plate-summary-label,
.plate-info-label {
    font-weight: 700;
    color: var(--text-soft);
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

html[data-theme="dark"] .plate-summary-label,
html[data-theme="dark"] .plate-info-label {
    color: var(--text-muted);
}

.plate-summary-value,
.plate-info-value {
    color: var(--text);
    font-weight: 700;
    font-size: 13px;
}

.plate-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.plate-chip {
    padding: 6px 10px;
    border-radius: 999px;
    background: #fff;
    border: 1px solid var(--border);
    font-size: 12px;
    font-weight: 700;
    color: var(--text);
    box-shadow: var(--shadow-sm);
}

html[data-theme="dark"] .plate-chip {
    background: var(--surface);
    border-color: var(--border);
    color: var(--text);
}

.plate-empty {
    font-size: 12px;
    color: var(--text-muted);
}

.plate-info {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
    margin-top: 8px;
    background: rgba(255, 255, 255, 0.75);
    border-radius: 10px;
    padding: 8px;
}

html[data-theme="dark"] .plate-info {
    background: rgba(15, 23, 42, 0.85);
    border: 1px solid var(--border);
}

.empty-state-description {
    color: var(--text-muted);
    max-width: 320px;
    margin: 0 auto 18px;
    font-size: 14px;
    line-height: 1.5;
}

.empty-state-action {
    display: inline-block;
    padding: 10px 18px;
    background: var(--brand);
    color: #fff;
    border-radius: 12px;
    font-weight: 700;
    text-decoration: none;
    cursor: pointer;
    border: none;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.empty-state-action:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
}

.progress-ring-container {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto 14px;
}

.progress-ring {
    transform: rotate(-90deg);
}

.progress-ring-circle {
    transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.progress-ring-bg {
    fill: none;
    stroke: var(--border);
    stroke-width: 8;
}

.progress-ring-fill {
    fill: none;
    stroke-width: 8;
    stroke-linecap: round;
}

.progress-ring-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.progress-ring-value {
    font-size: 24px;
    font-weight: 800;
    color: var(--text);
}

.progress-ring-label {
    font-size: 10px;
    color: var(--text-soft);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 700;
}

.stat-card.with-ring {
    padding: 20px 14px;
}

.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.95);
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-around;
    padding: 6px 0;
    padding-bottom: max(6px, env(safe-area-inset-bottom));
    z-index: 100;
    box-shadow: 0 -8px 20px rgba(15, 23, 42, 0.08);
    backdrop-filter: blur(14px);
}

html[data-theme="dark"] .bottom-nav {
    background: rgba(15, 23, 42, 0.92);
    box-shadow: 0 -8px 20px rgba(2, 6, 23, 0.6);
}

.bottom-nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 6px 4px;
    color: var(--text-soft);
    cursor: pointer;
    transition: color 0.2s ease, transform 0.2s ease;
    text-decoration: none;
    border: none;
    background: transparent;
    position: relative;
}

.bottom-nav-item.active {
    color: var(--brand-strong);
}

.bottom-nav-item.active::after {
    content: '';
    position: absolute;
    bottom: 2px;
    width: 18px;
    height: 3px;
    border-radius: 999px;
    background: var(--brand);
}

.bottom-nav-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 2px;
}

.bottom-nav-icon svg {
    display: block;
}

.bottom-nav-label {
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.3px;
    margin-top: 2px;
}

.toast-container {
    position: fixed;
    bottom: max(90px, calc(90px + env(safe-area-inset-bottom)));
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    pointer-events: none;
    width: 90%;
    max-width: 420px;
}

.toast {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    background: #fff;
    color: var(--text);
    border-radius: 14px;
    padding: 12px 14px;
    margin-top: 10px;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--border);
    pointer-events: auto;
    transform: translateY(0);
    opacity: 1;
    transition: opacity 0.25s ease, transform 0.25s ease;
}

html[data-theme="dark"] .toast {
    background: var(--surface);
    color: var(--text);
    border-color: var(--border);
}

.toast-message {
    font-size: 13px;
    font-weight: 600;
    color: var(--text);
}

.toast-close {
    background: transparent;
    border: none;
    font-size: 18px;
    font-weight: 700;
    color: var(--text-soft);
    cursor: pointer;
    padding: 0 4px;
}

.toast-close:hover {
    color: var(--text);
}

.toast-action {
    background: var(--brand-contrast);
    color: var(--brand-strong);
    border: 1px solid rgba(29, 78, 216, 0.25);
    border-radius: 10px;
    padding: 6px 10px;
    font-size: 12px;
    font-weight: 700;
    cursor: pointer;
}

.toast-action:hover {
    background: rgba(29, 78, 216, 0.12);
}

.toast-info {
    border-left: 4px solid var(--brand);
}

.toast-success {
    border-left: 4px solid var(--success);
}

.toast-error {
    border-left: 4px solid var(--danger);
}

.pr-badge {
    display: inline-block;
    padding: 3px 8px;
    background: var(--accent-strong);
    color: #fff;
    border-radius: 999px;
    font-size: 11px;
    font-weight: 700;
    margin-left: 8px;
}

.pr-beat-hint {
    font-size: 12px;
    font-weight: 700;
    margin-top: 6px;
    padding: 6px 10px;
    border-radius: 10px;
    background: var(--surface-muted);
    border-left: 3px solid var(--warning);
    color: var(--text-muted);
}

.pr-beat-hint.beating {
    border-left-color: var(--success);
    color: var(--success);
    animation: pulse 2s ease-in-out infinite;
}

</style>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1e40af">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SBS Tracker">
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="./icon-192.png">
</head>
<body>
    <!-- Quick Setup Overlay -->
    <div id="setup-overlay" class="setup-overlay">
        <div class="setup-modal">
            <h2>Welcome to SBS Tracker!</h2>
            <p>Let's get you set up. Enter your current week and 1RM maxes to get started.</p>

            <div class="setup-section">
                <h3>Which program are you running?</h3>
                <div class="form-group">
                    <label>Program Type</label>
                    <select id="setup-program-type" onchange="updateProgramVariants()">
                        <option value="strength" selected>Reps to Failure (RTF) - 20 weeks</option>
                        <option value="hypertrophy">Hypertrophy - 21 weeks</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Program Variant</label>
                    <select id="setup-program">
                        <option value="2x">2x - 2 days per week</option>
                        <option value="3x" selected>3x - 3 days per week</option>
                        <option value="4x">4x - 4 days per week</option>
                        <option value="5x">5x - 5 days per week</option>
                    </select>
                </div>
            </div>

            <div class="setup-section">
                <h3>Which week are you starting on?</h3>
                <div class="form-group">
                    <label>Starting Week</label>
                    <select id="setup-week">
                        <option value="1">Week 1</option>
                        <option value="2">Week 2</option>
                        <option value="3">Week 3</option>
                        <option value="4">Week 4</option>
                        <option value="5">Week 5</option>
                        <option value="6">Week 6</option>
                        <option value="7">Week 7 (Deload)</option>
                        <option value="8">Week 8</option>
                        <option value="9">Week 9</option>
                        <option value="10">Week 10</option>
                        <option value="11">Week 11</option>
                        <option value="12">Week 12</option>
                        <option value="13">Week 13</option>
                        <option value="14">Week 14 (Deload)</option>
                        <option value="15">Week 15</option>
                        <option value="16" selected>Week 16</option>
                        <option value="17">Week 17</option>
                        <option value="18">Week 18</option>
                        <option value="19">Week 19</option>
                        <option value="20">Week 20</option>
                    </select>
                </div>
            </div>

            <div class="setup-section">
                <h3 id="setup-1rm-header">Enter your 1RM maxes (kg)</h3>
                <div class="form-group">
                    <label id="setup-label-squat">Squat 1RM</label>
                    <input type="number" id="setup-squat" value="100" step="2.5" placeholder="e.g. 100">
                </div>
                <div class="form-group">
                    <label id="setup-label-bench">Bench Press 1RM</label>
                    <input type="number" id="setup-bench" value="100" step="2.5" placeholder="e.g. 100">
                </div>
                <div class="form-group">
                    <label id="setup-label-deadlift">Deadlift 1RM</label>
                    <input type="number" id="setup-deadlift" value="140" step="2.5" placeholder="e.g. 140">
                </div>
                <div class="form-group">
                    <label id="setup-label-ohp">OHP 1RM</label>
                    <input type="number" id="setup-ohp" value="50" step="2.5" placeholder="e.g. 50">
                </div>
            </div>

            <div class="setup-section">
                <h3>Choose Your Auxiliary Exercises</h3>
            <p class="helper-text">Select which exercises you want to use as accessories for each main lift.</p>

                <div class="form-group">
                    <label>Squat Auxiliary 1</label>
                    <select id="setup-squat-aux-1">
                        <option value="Front Squat">Front Squat</option>
                        <option value="Paused Squat">Paused Squat</option>
                        <option value="High Bar Squat">High Bar Squat</option>
                        <option value="Beltless Squat">Beltless Squat</option>
                        <option value="Wider Stance Squat">Wider Stance Squat</option>
                        <option value="Narrower Stance Squat">Narrower Stance Squat</option>
                        <option value="Box Squat">Box Squat</option>
                        <option value="Pin Squat">Pin Squat</option>
                        <option value="Half Squat">Half Squat</option>
                        <option value="Good Morning">Good Morning</option>
                        <option value="Squat With Slow Eccentric">Squat With Slow Eccentric</option>
                        <option value="Leg Press" selected>Leg Press</option>
                        <option value="Hack Squat">Hack Squat</option>
                        <option value="Bulgarian Split Squat">Bulgarian Split Squat</option>
                        <option value="Lunges">Lunges</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Squat Auxiliary 2</label>
                    <select id="setup-squat-aux-2">
                        <option value="Front Squat">Front Squat</option>
                        <option value="Paused Squat">Paused Squat</option>
                        <option value="High Bar Squat">High Bar Squat</option>
                        <option value="Beltless Squat">Beltless Squat</option>
                        <option value="Wider Stance Squat">Wider Stance Squat</option>
                        <option value="Narrower Stance Squat">Narrower Stance Squat</option>
                        <option value="Box Squat">Box Squat</option>
                        <option value="Pin Squat">Pin Squat</option>
                        <option value="Half Squat">Half Squat</option>
                        <option value="Good Morning">Good Morning</option>
                        <option value="Squat With Slow Eccentric">Squat With Slow Eccentric</option>
                        <option value="Leg Press">Leg Press</option>
                        <option value="Hack Squat" selected>Hack Squat</option>
                        <option value="Bulgarian Split Squat">Bulgarian Split Squat</option>
                        <option value="Lunges">Lunges</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Bench Auxiliary 1</label>
                    <select id="setup-bench-aux-1">
                        <option value="Close Grip Bench">Close Grip Bench</option>
                        <option value="Long Pause Bench">Long Pause Bench</option>
                        <option value="Spoto Press">Spoto Press</option>
                        <option value="Incline Press" selected>Incline Press</option>
                        <option value="Wider Grip Bench">Wider Grip Bench</option>
                        <option value="Board Press">Board Press</option>
                        <option value="Pin Press">Pin Press</option>
                        <option value="Slingshot Bench">Slingshot Bench</option>
                        <option value="Bench With Feet Up">Bench With Feet Up</option>
                        <option value="Bench With Slow Eccentric">Bench With Slow Eccentric</option>
                        <option value="DB Bench">DB Bench</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Bench Auxiliary 2</label>
                    <select id="setup-bench-aux-2">
                        <option value="Close Grip Bench">Close Grip Bench</option>
                        <option value="Long Pause Bench">Long Pause Bench</option>
                        <option value="Spoto Press">Spoto Press</option>
                        <option value="Incline Press">Incline Press</option>
                        <option value="Wider Grip Bench">Wider Grip Bench</option>
                        <option value="Board Press">Board Press</option>
                        <option value="Pin Press">Pin Press</option>
                        <option value="Slingshot Bench">Slingshot Bench</option>
                        <option value="Bench With Feet Up">Bench With Feet Up</option>
                        <option value="Bench With Slow Eccentric">Bench With Slow Eccentric</option>
                        <option value="DB Bench" selected>DB Bench</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Deadlift Auxiliary</label>
                    <select id="setup-deadlift-aux">
                        <option value="Sumo Deadlift">Sumo Deadlift</option>
                        <option value="Conventional Deadlift">Conventional Deadlift</option>
                        <option value="Block Pull">Block Pull</option>
                        <option value="Rack Pull">Rack Pull</option>
                        <option value="Deficit Deadlift">Deficit Deadlift</option>
                        <option value="Romanian Deadlift" selected>Romanian Deadlift</option>
                        <option value="Stiff Leg Deadlift">Stiff Leg Deadlift</option>
                        <option value="Snatch Grip Deadlift">Snatch Grip Deadlift</option>
                        <option value="Trap Bar Deadlift">Trap Bar Deadlift</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>OHP Auxiliary</label>
                    <select id="setup-ohp-aux">
                        <option value="Push Press">Push Press</option>
                        <option value="Behind The Neck OHP">Behind The Neck OHP</option>
                        <option value="Seated OHP">Seated OHP</option>
                        <option value="DB OHP" selected>DB OHP</option>
                    </select>
                </div>
            </div>

            <div class="setup-actions">
                <button class="btn btn-primary" onclick="completeSetup()">Start Training!</button>
            </div>
        </div>
    </div>

    <div class="header">
        <h1>SBS Workout Tracker</h1>
        <div class="week-info">
            <button class="week-nav-btn" onclick="navigateWeek(-1)" id="prev-week-btn">←</button>
            <span class="week-pill">Week <span id="current-week">16</span></span>
            <span class="week-pill" id="program-type-display">Strength</span>
            <span class="week-pill" id="program-variant-display">3x</span>
            <button class="week-nav-btn" onclick="navigateWeek(1)" id="next-week-btn">→</button>
        </div>
    </div>

    <div class="nav-tabs">
        <button class="nav-tab active" onclick="switchTab('workout')">Workout</button>
        <button class="nav-tab" onclick="switchTab('progress')">Progress</button>
        <button class="nav-tab" onclick="switchTab('settings')">Settings</button>
        <button class="nav-tab" onclick="switchTab('history')">History</button>
    </div>

    <div id="workout-tab" class="tab-content active">
        <div class="week-summary-card">
            <div class="week-summary-label">Current Week</div>
            <div class="week-summary-value" id="workout-week-display">16</div>
        </div>
        <div class="day-selector" id="day-selector">
            <!-- Day buttons will be dynamically generated -->
        </div>
        <div id="workout-container"></div>
        <div class="button-stack">
            <button class="btn btn-secondary btn-icon" onclick="showRestTimer(); startTimer();">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="13" r="8"/><polyline points="12 9 12 13 15 15"/><path d="M8 3h8M12 3v2"/>
                </svg>
                Start Rest Timer
            </button>
            <button class="btn btn-secondary" onclick="sendCurrentDayToHevy()">Sync to Hevy</button>
            <button class="btn btn-primary" onclick="markDayComplete()" id="mark-day-btn">Mark Day Complete</button>
        </div>
    </div>

    <!-- Rest Timer -->
    <div id="rest-timer" class="rest-timer" style="display: none;">
        <div class="timer-display" id="timer-display">3:00</div>
        <div class="timer-controls">
            <button class="timer-btn" onclick="startTimer()" id="start-timer-btn">Start</button>
            <button class="timer-btn" onclick="pauseTimer()" id="pause-timer-btn" style="display: none;">Pause</button>
            <button class="timer-btn secondary" onclick="resetTimer()">Reset</button>
            <button class="timer-btn secondary" onclick="closeTimer()">✕</button>
        </div>
    </div>

    <div id="settings-tab" class="tab-content">
        <div class="settings-layout">
            <aside class="settings-sidebar">
                <div class="settings-nav" role="tablist" aria-label="Settings sections">
                    <button class="settings-nav-button" id="settings-tab-program" data-section="program" aria-controls="settings-panel-program" role="tab">Program</button>
                    <button class="settings-nav-button" id="settings-tab-accessories" data-section="accessories" aria-controls="settings-panel-accessories" role="tab">Accessories</button>
                    <button class="settings-nav-button" id="settings-tab-tracking" data-section="tracking" aria-controls="settings-panel-tracking" role="tab">Tracking</button>
                    <button class="settings-nav-button" id="settings-tab-integrations" data-section="integrations" aria-controls="settings-panel-integrations" role="tab">Integrations</button>
                    <button class="settings-nav-button" id="settings-tab-data" data-section="data" aria-controls="settings-panel-data" role="tab">Data</button>
                    <button class="settings-nav-button" id="settings-tab-appearance" data-section="appearance" aria-controls="settings-panel-appearance" role="tab">Appearance</button>
                    <button class="settings-nav-button" id="settings-tab-info" data-section="info" aria-controls="settings-panel-info" role="tab">Info</button>
                </div>
            </aside>

            <div class="settings-panels">
                <section class="settings-panel" data-section="program" id="settings-panel-program" role="tabpanel" aria-labelledby="settings-tab-program" tabindex="0">
                    <div class="settings-section">
                        <h2>Weight Unit</h2>
                        <p class="helper-text">Choose your preferred weight unit. All weights throughout the app will display in this unit.</p>
                        <div class="form-group">
                            <label>Unit</label>
                            <select id="weight-unit" onchange="updateWeightUnit()">
                                <option value="kg" selected>Kilograms (kg)</option>
                                <option value="lbs">Pounds (lbs)</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>1RM Settings</h2>
                        <div class="form-group">
                            <label id="label-squat-1rm">Squat 1RM (kg)</label>
                            <input type="number" id="1rm-squat" value="100" step="2.5">
                        </div>
                        <div class="form-group">
                            <label id="label-bench-1rm">Bench Press 1RM (kg)</label>
                            <input type="number" id="1rm-bench" value="100" step="2.5">
                        </div>
                        <div class="form-group">
                            <label id="label-deadlift-1rm">Deadlift 1RM (kg)</label>
                            <input type="number" id="1rm-deadlift" value="140" step="2.5">
                        </div>
                        <div class="form-group">
                            <label id="label-ohp-1rm">OHP 1RM (kg)</label>
                            <input type="number" id="1rm-ohp" value="50" step="2.5">
                        </div>
                        <button class="btn btn-secondary" onclick="save1RMs()">Save 1RMs</button>
                    </div>

                    <div class="settings-section">
                        <h2>Week Selection</h2>
                        <div class="form-group">
                            <label>Jump to Week</label>
                            <select id="week-selector">
                                <option value="1">Week 1</option>
                                <option value="2">Week 2</option>
                                <option value="3">Week 3</option>
                                <option value="4">Week 4</option>
                                <option value="5">Week 5</option>
                                <option value="6">Week 6</option>
                                <option value="7">Week 7 (Deload)</option>
                                <option value="8">Week 8</option>
                                <option value="9">Week 9</option>
                                <option value="10">Week 10</option>
                                <option value="11">Week 11</option>
                                <option value="12">Week 12</option>
                                <option value="13">Week 13</option>
                                <option value="14">Week 14 (Deload)</option>
                                <option value="15">Week 15</option>
                                <option value="16" selected>Week 16</option>
                                <option value="17">Week 17</option>
                                <option value="18">Week 18</option>
                                <option value="19">Week 19</option>
                                <option value="20">Week 20</option>
                            </select>
                        </div>
                        <button class="btn btn-secondary" onclick="jumpToWeek()">Jump to Selected Week</button>
                    </div>

                    <div class="settings-section">
                        <h2>Change Program</h2>
                        <p class="helper-text">Switch between Reps to Failure and Hypertrophy programs, or change your program variant. Your workout history will be preserved.</p>

                        <div class="form-group">
                            <label>Program Type</label>
                            <select id="settings-program-type" onchange="updateSettingsProgramVariants()">
                                <option value="strength">Reps to Failure (RTF) - 20 weeks</option>
                                <option value="hypertrophy">Hypertrophy - 21 weeks</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Program Variant</label>
                            <select id="settings-program-variant">
                                <option value="2x">2x Frequency</option>
                                <option value="3x">3x Frequency</option>
                                <option value="4x">4x Frequency</option>
                                <option value="5x">5x Frequency</option>
                            </select>
                        </div>

                        <button class="btn btn-secondary" onclick="changeProgram()">Change Program</button>
                    </div>
                </section>

                <section class="settings-panel" data-section="accessories" id="settings-panel-accessories" role="tabpanel" aria-labelledby="settings-tab-accessories" tabindex="0">
                    <div class="settings-section">
                        <h2>Auxiliary Exercises</h2>
                        <p class="helper-text">Choose which auxiliary exercises to use for each main lift. Changes will apply to future workouts.</p>

                        <div class="form-group">
                            <label>Squat Auxiliary 1</label>
                            <select id="settings-squat-aux-1">
                                <option value="Front Squat">Front Squat</option>
                                <option value="Paused Squat">Paused Squat</option>
                                <option value="High Bar Squat">High Bar Squat</option>
                                <option value="Beltless Squat">Beltless Squat</option>
                                <option value="Wider Stance Squat">Wider Stance Squat</option>
                                <option value="Narrower Stance Squat">Narrower Stance Squat</option>
                                <option value="Box Squat">Box Squat</option>
                                <option value="Pin Squat">Pin Squat</option>
                                <option value="Half Squat">Half Squat</option>
                                <option value="Good Morning">Good Morning</option>
                                <option value="Squat With Slow Eccentric">Squat With Slow Eccentric</option>
                                <option value="Leg Press" selected>Leg Press</option>
                                <option value="Hack Squat">Hack Squat</option>
                                <option value="Bulgarian Split Squat">Bulgarian Split Squat</option>
                                <option value="Lunges">Lunges</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Squat Auxiliary 2</label>
                            <select id="settings-squat-aux-2">
                                <option value="Front Squat">Front Squat</option>
                                <option value="Paused Squat">Paused Squat</option>
                                <option value="High Bar Squat">High Bar Squat</option>
                                <option value="Beltless Squat">Beltless Squat</option>
                                <option value="Wider Stance Squat">Wider Stance Squat</option>
                                <option value="Narrower Stance Squat">Narrower Stance Squat</option>
                                <option value="Box Squat">Box Squat</option>
                                <option value="Pin Squat">Pin Squat</option>
                                <option value="Half Squat">Half Squat</option>
                                <option value="Good Morning">Good Morning</option>
                                <option value="Squat With Slow Eccentric">Squat With Slow Eccentric</option>
                                <option value="Leg Press">Leg Press</option>
                                <option value="Hack Squat" selected>Hack Squat</option>
                                <option value="Bulgarian Split Squat">Bulgarian Split Squat</option>
                                <option value="Lunges">Lunges</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Bench Auxiliary 1</label>
                            <select id="settings-bench-aux-1">
                                <option value="Close Grip Bench">Close Grip Bench</option>
                                <option value="Long Pause Bench">Long Pause Bench</option>
                                <option value="Spoto Press">Spoto Press</option>
                                <option value="Incline Press" selected>Incline Press</option>
                                <option value="Wider Grip Bench">Wider Grip Bench</option>
                                <option value="Board Press">Board Press</option>
                                <option value="Pin Press">Pin Press</option>
                                <option value="Slingshot Bench">Slingshot Bench</option>
                                <option value="Bench With Feet Up">Bench With Feet Up</option>
                                <option value="Bench With Slow Eccentric">Bench With Slow Eccentric</option>
                                <option value="DB Bench">DB Bench</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Bench Auxiliary 2</label>
                            <select id="settings-bench-aux-2">
                                <option value="Close Grip Bench">Close Grip Bench</option>
                                <option value="Long Pause Bench">Long Pause Bench</option>
                                <option value="Spoto Press">Spoto Press</option>
                                <option value="Incline Press">Incline Press</option>
                                <option value="Wider Grip Bench">Wider Grip Bench</option>
                                <option value="Board Press">Board Press</option>
                                <option value="Pin Press">Pin Press</option>
                                <option value="Slingshot Bench">Slingshot Bench</option>
                                <option value="Bench With Feet Up">Bench With Feet Up</option>
                                <option value="Bench With Slow Eccentric">Bench With Slow Eccentric</option>
                                <option value="DB Bench" selected>DB Bench</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Deadlift Auxiliary</label>
                            <select id="settings-deadlift-aux">
                                <option value="Sumo Deadlift">Sumo Deadlift</option>
                                <option value="Conventional Deadlift">Conventional Deadlift</option>
                                <option value="Block Pull">Block Pull</option>
                                <option value="Rack Pull">Rack Pull</option>
                                <option value="Deficit Deadlift">Deficit Deadlift</option>
                                <option value="Romanian Deadlift" selected>Romanian Deadlift</option>
                                <option value="Stiff Leg Deadlift">Stiff Leg Deadlift</option>
                                <option value="Snatch Grip Deadlift">Snatch Grip Deadlift</option>
                                <option value="Trap Bar Deadlift">Trap Bar Deadlift</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>OHP Auxiliary</label>
                            <select id="settings-ohp-aux">
                                <option value="Push Press">Push Press</option>
                                <option value="Behind The Neck OHP">Behind The Neck OHP</option>
                                <option value="Seated OHP">Seated OHP</option>
                                <option value="DB OHP" selected>DB OHP</option>
                            </select>
                        </div>

                        <button class="btn btn-secondary" onclick="saveAuxiliaryExercises()">Save Auxiliary Exercises</button>
                    </div>
                </section>

                <section class="settings-panel" data-section="tracking" id="settings-panel-tracking" role="tabpanel" aria-labelledby="settings-tab-tracking" tabindex="0">
                    <div class="settings-section">
                        <h2>Rest Timer</h2>
                        <p class="helper-text">Configure rest timer between sets.</p>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="rest-timer-enabled" checked>
                                Enable Rest Timer
                            </label>
                        </div>

                        <div class="form-group">
                            <label>Rest Duration (seconds)</label>
                            <input type="number" id="rest-timer-duration" value="180" min="30" max="600" step="30">
                            <small class="form-help">Recommended: 180-300 seconds (3-5 minutes) for main lifts</small>
                        </div>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="rest-timer-autostart">
                                Auto-start timer after entering last set result
                            </label>
                        </div>

                        <button class="btn btn-secondary" onclick="saveRestTimerSettings()">Save Rest Timer Settings</button>
                    </div>

                    <div class="settings-section">
                        <h2>Plate Calculator</h2>
                        <p class="helper-text">Configure plate calculator to show which plates to load on the bar.</p>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="plate-calculator-enabled" onchange="togglePlateCalculator()" checked>
                                Show Plate Calculator
                            </label>
                        </div>

                        <div class="form-group">
                            <label id="label-barbell-weight">Barbell Weight</label>
                            <select id="barbell-weight">
                                <option value="20" selected>20kg (Standard Olympic)</option>
                                <option value="15">15kg (Women's Olympic)</option>
                                <option value="10">10kg (Training Bar)</option>
                                <option value="0">0kg (Dumbbells/Machines)</option>
                            </select>
                        </div>

                        <button class="btn btn-secondary" onclick="savePlateSettings()">Save Plate Settings</button>
                    </div>
                </section>

                <section class="settings-panel" data-section="integrations" id="settings-panel-integrations" role="tabpanel" aria-labelledby="settings-tab-integrations" tabindex="0">
                    <div class="settings-section">
                        <h2>Hevy Sync</h2>
                        <p class="helper-text">Store your Hevy API key locally to send workouts directly to Hevy.</p>
                        <p class="helper-text">Use the "Send to Hevy" button on the Workout tab to export today’s workout.</p>

                        <div class="form-group">
                            <label>Hevy API Key</label>
                            <input type="password" id="hevy-api-key" placeholder="Paste your Hevy API key">
                        </div>

                        <div class="form-group">
                            <label>Default Workout Duration (minutes)</label>
                            <input type="number" id="hevy-duration" min="0" step="5">
                        </div>

                        <div class="form-group">
                            <label>Privacy</label>
                            <select id="hevy-privacy">
                                <option value="private">Private</option>
                                <option value="public">Public</option>
                            </select>
                        </div>

                        <div class="form-group form-group-spaced">
                            <label>Exercise Name Overrides (JSON)</label>
                            <textarea id="hevy-name-overrides" rows="6" placeholder='{"Bench Press":"Barbell Bench Press"}'></textarea>
                        </div>

                        <button class="btn btn-secondary" onclick="saveHevySettings()">Save Hevy Settings</button>
                        <button class="btn btn-secondary" onclick="syncHevyExerciseTemplates()">Sync Hevy Exercise Templates</button>
                        <p class="helper-text" id="hevy-sync-status"></p>
                    </div>
                </section>

                <section class="settings-panel" data-section="data" id="settings-panel-data" role="tabpanel" aria-labelledby="settings-tab-data" tabindex="0">
                    <div class="settings-section">
                        <h2>Export & Backup</h2>
                        <p class="helper-text">Export your workout data for backup or analysis. Import to restore from a backup.</p>

                        <button class="btn btn-secondary" onclick="exportToJSON()">Export Full Backup (JSON)</button>
                        <button class="btn btn-secondary" onclick="exportToCSV()">Export Workout History (CSV)</button>
                        <button class="btn btn-secondary" onclick="exportToHevyCSV()">Export Current Day (Hevy CSV)</button>

                        <div class="form-group form-group-spaced">
                            <label>Import Backup (JSON)</label>
                            <input type="file" id="import-file" accept=".json" class="file-input">
                        </div>
                        <button class="btn btn-secondary" onclick="importFromJSON()">Import Backup</button>
                    </div>

                    <div class="settings-section">
                        <h2>Diagnostics</h2>
                        <p class="helper-text">Generate a debug snapshot if you need to share details for troubleshooting.</p>

                        <button class="btn btn-secondary" onclick="copyDebugSnapshot()">Copy Debug Snapshot</button>
                        <button class="btn btn-secondary" onclick="downloadDebugSnapshot()">Download Debug JSON</button>
                    </div>

                    <div class="settings-section">
                        <h2>Data Management</h2>
                        <button class="btn btn-danger" onclick="resetAll()">Reset All Data</button>
                    </div>
                </section>

                <section class="settings-panel" data-section="appearance" id="settings-panel-appearance" role="tabpanel" aria-labelledby="settings-tab-appearance" tabindex="0">
                    <div class="settings-section">
                        <h2>Appearance</h2>
                        <div class="form-group">
                            <label>Theme</label>
                            <button class="btn btn-secondary" onclick="toggleTheme()">
                                <span id="theme-icon" aria-hidden="true">🌙</span>
                                Toggle Light/Dark Mode
                            </button>
                        </div>
                    </div>
                </section>

                <section class="settings-panel" data-section="info" id="settings-panel-info" role="tabpanel" aria-labelledby="settings-tab-info" tabindex="0">
                    <div class="settings-section">
                        <h2>App Info</h2>
                        <div class="info-block">
                            <p><strong>Version:</strong> <span id="app-version">Loading...</span></p>
                            <p class="info-subtext">
                                SBS Workout Tracker - Built for Stronger By Science programs
                            </p>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>Contact & Feedback</h2>
                        <p class="helper-text">Send feedback, report bugs, or request features. We'll get back to you via email.</p>

                        <form id="contact-form" onsubmit="handleContactFormSubmit(event)">
                            <!-- Hidden fields for Web3Forms -->
                            <input type="hidden" name="access_key" value="YOUR_ACCESS_KEY_HERE">
                            <input type="hidden" name="subject" value="SBS Tracker">
                            <input type="checkbox" name="botcheck" style="display: none;">

                            <div class="form-group">
                                <label>Name *</label>
                                <input type="text" name="name" required placeholder="Your name">
                            </div>

                            <div class="form-group">
                                <label>Email *</label>
                                <input type="email" name="email" required placeholder="Your email">
                            </div>

                            <div class="form-group">
                                <label>Feedback Type *</label>
                                <select name="type" required>
                                    <option value="Feature Request">Feature Request</option>
                                    <option value="Bug Report">Bug Report</option>
                                    <option value="General Feedback" selected>General Feedback</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Message *</label>
                                <textarea name="message" required placeholder="Tell us what's on your mind..."></textarea>
                            </div>

                            <button type="submit" class="btn btn-secondary">Send Feedback</button>
                        </form>
                    </div>
                </section>
            </div>
        </div>
    </div>
<div id="progress-tab" class="tab-content">
        <div id="progress-container"></div>
    </div>

    <div id="history-tab" class="tab-content">
        <div id="history-container"></div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <button class="bottom-nav-item active" onclick="switchTab('workout')" data-tab="workout">
            <div class="bottom-nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="6" cy="12" r="3"/><circle cx="18" cy="12" r="3"/><line x1="9" y1="12" x2="15" y2="12"/>
                </svg>
            </div>
            <div class="bottom-nav-label">Workout</div>
        </button>
        <button class="bottom-nav-item" onclick="switchTab('progress')" data-tab="progress">
            <div class="bottom-nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="7" y1="17" x2="7" y2="13"/><line x1="12" y1="17" x2="12" y2="9"/><line x1="17" y1="17" x2="17" y2="5"/>
                </svg>
            </div>
            <div class="bottom-nav-label">Progress</div>
        </button>
        <button class="bottom-nav-item" onclick="switchTab('settings')" data-tab="settings">
            <div class="bottom-nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v10M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h10M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2"/>
                </svg>
            </div>
            <div class="bottom-nav-label">Settings</div>
        </button>
        <button class="bottom-nav-item" onclick="switchTab('history')" data-tab="history">
            <div class="bottom-nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="8" y1="6" x2="16" y2="6"/><line x1="8" y1="12" x2="16" y2="12"/><line x1="8" y1="18" x2="13" y2="18"/>
                </svg>
            </div>
            <div class="bottom-nav-label">History</div>
        </button>
    </nav>


    <script src="hypertrophy-program-data.js"></script>
    <script>
        // Program data embedded from Excel
		const ALL_PROGRAMS = {
    "2x": {
        "1": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 60.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 97.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 35.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 115.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 55.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ]
        },
        "2": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 67.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ]
        },
        "3": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "4": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 75.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 65.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 102.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 120.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ]
        },
        "5": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ]
        },
        "6": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ]
        },
        "7": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 52.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 12.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "8": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 67.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ]
        },
        "9": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "10": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "11": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ]
        },
        "12": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ]
        },
        "13": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 122.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 147.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ]
        },
        "14": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 52.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 12.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "15": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "16": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "17": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 92.5,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "18": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "19": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 92.5,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "20": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Bench Press",
                    "weight": 97.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Deadlift",
                    "weight": 132.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 47.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 77.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ]
        }
    },
    "3x": {
        "1": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 17.5,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 35.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 150.0,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 97.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 55.0,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 150.0,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "2": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 77.5,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 20.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "3": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 87.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 20.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 175.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 175.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "4": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 20.0,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 75.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 157.5,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 102.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 157.5,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 7,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "5": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 20.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 170.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 170.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "6": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 87.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 22.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 87.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 182.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 182.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "7": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 65.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 15.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 125.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 125.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "8": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 77.5,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 20.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "9": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 87.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 20.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 175.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 175.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "10": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 92.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 90.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 22.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 187.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 187.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ]
        },
        "11": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 20.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 170.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 170.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 6,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "12": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 87.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 22.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 87.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 182.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 182.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "13": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 97.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 92.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 22.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 92.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 195.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 122.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 195.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ]
        },
        "14": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 65.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 15.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 125.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 125.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "15": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 87.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 20.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 175.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 175.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 5,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "16": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 92.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 90.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 22.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 187.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 187.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ]
        },
        "17": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 100.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 95.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 25.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 200.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 200.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 25.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                }
            ]
        },
        "18": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 92.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 90.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 22.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 187.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 187.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 4,
                    "target": 2,
                    "sets": 5
                }
            ]
        },
        "19": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 100.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 95.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 25.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 200.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 200.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 25.0,
                    "reps": 3,
                    "target": 2,
                    "sets": 5
                }
            ]
        },
        "20": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 105.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 102.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "DB Bench",
                    "weight": 25.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 100.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "OHP",
                    "weight": 47.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 212.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 132.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 77.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 212.5,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 25.0,
                    "reps": 2,
                    "target": 1,
                    "sets": 5
                }
            ]
        }
    },
    "4x": {
        "1": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 55.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 60.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 115.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 97.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 55.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 35.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 115.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ]
        },
        "2": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 65.0,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ]
        },
        "3": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "4": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 62.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 120.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 102.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 120.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ]
        },
        "5": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 67.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ]
        },
        "6": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ]
        },
        "7": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 50.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 12.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "8": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 65.0,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ]
        },
        "9": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "10": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "11": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 67.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ]
        },
        "12": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ]
        },
        "13": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 147.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 122.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 147.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ]
        },
        "14": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 50.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 12.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "15": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "16": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "17": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "18": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "19": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "20": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 77.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 132.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 77.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 47.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ]
        }
    },
    "5x": {
        "1": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 115.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 97.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 55.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 35.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 115.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 55.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 60.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ]
        },
        "2": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 65.0,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ]
        },
        "3": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "4": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 120.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 102.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 120.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 62.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ]
        },
        "5": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 67.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ]
        },
        "6": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ]
        },
        "7": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 12.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 50.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "8": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 65.0,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ]
        },
        "9": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "10": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "11": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 67.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ]
        },
        "12": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ]
        },
        "13": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 147.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 122.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 147.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ]
        },
        "14": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 12.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 50.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "15": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "16": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "17": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "18": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "19": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "20": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "Bench Press",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Deadlift",
                    "weight": 132.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 77.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "OHP",
                    "weight": 47.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Incline Press",
                    "weight": 77.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ]
        }
    },
    "6x": {
        "1": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 55.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 60.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 115.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 55.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 115.0,
                    "reps": 7,
                    "target": 14,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 97.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 35.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ]
        },
        "2": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 65.0,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "3": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "4": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 15.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 62.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 120.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 120.0,
                    "reps": 7,
                    "target": 13,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 102.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ]
        },
        "5": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 67.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ]
        },
        "6": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                }
            ]
        },
        "7": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 12.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 50.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "8": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 65.0,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 57.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 122.5,
                    "reps": 6,
                    "target": 12,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 105.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 37.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ]
        },
        "9": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "10": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ]
        },
        "11": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 67.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 60.0,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 127.5,
                    "reps": 6,
                    "target": 11,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 107.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ]
        },
        "12": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 72.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 82.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 65.0,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 137.5,
                    "reps": 5,
                    "target": 9,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 115.0,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 3,
                    "target": 5,
                    "sets": 5
                }
            ]
        },
        "13": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 77.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 87.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 147.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 70.0,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 147.5,
                    "reps": 4,
                    "target": 7,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 122.5,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 2,
                    "target": 3,
                    "sets": 5
                }
            ]
        },
        "14": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 12.5,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 50.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 60.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 45.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 95.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 85.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 30.0,
                    "reps": 5,
                    "target": null,
                    "sets": 5
                }
            ]
        },
        "15": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 17.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 70.0,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 62.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 132.5,
                    "reps": 5,
                    "target": 10,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 112.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 40.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ]
        },
        "16": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ]
        },
        "17": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                }
            ]
        },
        "18": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 75.0,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 67.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 142.5,
                    "reps": 4,
                    "target": 8,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 120.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 42.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ]
        },
        "19": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 20.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 80.0,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 90.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 72.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 152.5,
                    "reps": 3,
                    "target": 6,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 125.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 45.0,
                    "reps": 1,
                    "target": 2,
                    "sets": 5
                }
            ]
        },
        "20": {
            "1": [
                {
                    "name": "Squat",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Incline Press",
                    "weight": 77.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "2": [
                {
                    "name": "DB OHP",
                    "weight": 22.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Romanian Deadlift",
                    "weight": 85.0,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "3": [
                {
                    "name": "Bench Press",
                    "weight": 95.0,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "4": [
                {
                    "name": "Incline Press",
                    "weight": 77.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                },
                {
                    "name": "Leg Press",
                    "weight": 162.5,
                    "reps": 2,
                    "target": 4,
                    "sets": 5
                }
            ],
            "5": [
                {
                    "name": "Deadlift",
                    "weight": 132.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                }
            ],
            "6": [
                {
                    "name": "OHP",
                    "weight": 47.5,
                    "reps": 1,
                    "target": 1,
                    "sets": 5
                }
            ]
        }
    }
};
        
        const AMRAP_HISTORY_DATA = {
        "1": {
                "1": [
                        10,
                        17,
                        21
                ],
                "2": [
                        12,
                        10,
                        20
                ],
                "3": [
                        10,
                        20,
                        20,
                        14
                ]
        },
        "2": {
                "1": [
                        8,
                        18,
                        15
                ],
                "2": [
                        9,
                        10,
                        15
                ],
                "3": [
                        10,
                        20,
                        20,
                        14
                ]
        },
        "3": {
                "1": [
                        6,
                        15,
                        13
                ],
                "2": [
                        6,
                        6,
                        null
                ],
                "3": [
                        10,
                        15,
                        15,
                        null
                ]
        },
        "4": {
                "1": [
                        10,
                        15,
                        13
                ],
                "2": [
                        10,
                        6,
                        15
                ],
                "3": [
                        11,
                        15,
                        15,
                        15
                ]
        },
        "5": {
                "1": [
                        8,
                        14,
                        11
                ],
                "2": [
                        8,
                        9,
                        20
                ],
                "3": [
                        10,
                        15,
                        15,
                        9
                ]
        },
        "6": {
                "1": [
                        null,
                        null,
                        null
                ],
                "2": [
                        5,
                        6,
                        10
                ],
                "3": [
                        5,
                        12,
                        12,
                        15
                ]
        },
        "7": {
                "1": [
                        null,
                        null,
                        null
                ],
                "2": [
                        null,
                        null,
                        null
                ],
                "3": [
                        null,
                        null,
                        null,
                        null
                ]
        },
        "8": {
                "1": [
                        null,
                        null,
                        null
                ],
                "2": [
                        10,
                        9,
                        18
                ],
                "3": [
                        9,
                        12,
                        18,
                        14
                ]
        },
        "9": {
                "1": [
                        null,
                        null,
                        null
                ],
                "2": [
                        9,
                        8,
                        10
                ],
                "3": [
                        null,
                        null,
                        null,
                        null
                ]
        },
        "10": {
                "1": [
                        null,
                        null,
                        null
                ],
                "2": [
                        6,
                        null,
                        null
                ],
                "3": [
                        null,
                        null,
                        null,
                        null
                ]
        },
        "11": {
                "1": [
                        null,
                        null,
                        null
                ],
                "2": [
                        null,
                        null,
                        null
                ],
                "3": [
                        null,
                        null,
                        null,
                        null
                ]
        },
        "12": {
                "1": [
                        5,
                        10,
                        9
                ],
                "2": [
                        5,
                        6,
                        10
                ],
                "3": [
                        7,
                        5,
                        10,
                        10
                ]
        },
        "13": {
                "1": [
                        4,
                        8,
                        7
                ],
                "2": [
                        4,
                        4,
                        8
                ],
                "3": [
                        4,
                        7,
                        null,
                        8
                ]
        },
        "14": {
                "1": [
                        null,
                        null,
                        null
                ],
                "2": [
                        null,
                        null,
                        null
                ],
                "3": [
                        null,
                        null,
                        null,
                        null
                ]
        },
        "15": {
                "1": [
                        6,
                        14,
                        11
                ],
                "2": [
                        7,
                        7,
                        10
                ],
                "3": [
                        null,
                        null,
                        null,
                        null
                ]
        }
};


        // Intensity percentages for each week (% of Training Max)
        // SBS program progressively increases intensity week-to-week
        const WEEK_INTENSITY = {
            1: 0.60, 2: 0.65, 3: 0.70, 4: 0.625, 5: 0.675,
            6: 0.725, 7: 0.50, 8: 0.65, 9: 0.70, 10: 0.75,
            11: 0.675, 12: 0.725, 13: 0.775, 14: 0.50, 15: 0.70,
            16: 0.75, 17: 0.80, 18: 0.75, 19: 0.80, 20: 0.85
        };

        const STRENGTH_LIFT_INTENSITY = {
            'Squat': {
                1: 0.7, 2: 0.75, 3: 0.8, 4: 0.725, 5: 0.775, 6: 0.825,
                7: 0.6, 8: 0.75, 9: 0.8, 10: 0.85, 11: 0.775, 12: 0.825,
                13: 0.875, 14: 0.6, 15: 0.8, 16: 0.85, 17: 0.9, 18: 0.85,
                19: 0.9, 20: 0.95, 21: 0.6
            },
            'Bench Press': {
                1: 0.7, 2: 0.75, 3: 0.8, 4: 0.725, 5: 0.775, 6: 0.825,
                7: 0.6, 8: 0.75, 9: 0.8, 10: 0.85, 11: 0.775, 12: 0.825,
                13: 0.875, 14: 0.6, 15: 0.8, 16: 0.85, 17: 0.9, 18: 0.85,
                19: 0.9, 20: 0.95, 21: 0.6
            },
            'Deadlift': {
                1: 0.7, 2: 0.75, 3: 0.8, 4: 0.725, 5: 0.775, 6: 0.825,
                7: 0.6, 8: 0.75, 9: 0.8, 10: 0.85, 11: 0.775, 12: 0.825,
                13: 0.875, 14: 0.6, 15: 0.8, 16: 0.85, 17: 0.9, 18: 0.85,
                19: 0.9, 20: 0.95, 21: 0.6
            },
            'OHP': {
                1: 0.7, 2: 0.75, 3: 0.8, 4: 0.725, 5: 0.775, 6: 0.825,
                7: 0.6, 8: 0.75, 9: 0.8, 10: 0.85, 11: 0.775, 12: 0.825,
                13: 0.875, 14: 0.6, 15: 0.8, 16: 0.85, 17: 0.9, 18: 0.85,
                19: 0.9, 20: 0.95, 21: 0.6
            },
            'Leg Press': {
                1: 0.6, 2: 0.65, 3: 0.7000000000000001, 4: 0.625, 5: 0.675, 6: 0.725,
                7: 0.5, 8: 0.65, 9: 0.7000000000000001, 10: 0.75, 11: 0.675, 12: 0.725,
                13: 0.775, 14: 0.5, 15: 0.7000000000000001, 16: 0.75, 17: 0.8, 18: 0.75,
                19: 0.8, 20: 0.85, 21: 0.5
            },
            'Incline Press': {
                1: 0.6, 2: 0.65, 3: 0.7000000000000001, 4: 0.625, 5: 0.675, 6: 0.725,
                7: 0.5, 8: 0.65, 9: 0.7000000000000001, 10: 0.75, 11: 0.675, 12: 0.725,
                13: 0.775, 14: 0.5, 15: 0.7000000000000001, 16: 0.75, 17: 0.8, 18: 0.75,
                19: 0.8, 20: 0.85, 21: 0.5
            },
            'Romanian Deadlift': {
                1: 0.6, 2: 0.65, 3: 0.7000000000000001, 4: 0.625, 5: 0.675, 6: 0.725,
                7: 0.5, 8: 0.65, 9: 0.7000000000000001, 10: 0.75, 11: 0.675, 12: 0.725,
                13: 0.775, 14: 0.5, 15: 0.7000000000000001, 16: 0.75, 17: 0.8, 18: 0.75,
                19: 0.8, 20: 0.85, 21: 0.5
            },
            'DB OHP': {
                1: 0.6, 2: 0.65, 3: 0.7000000000000001, 4: 0.625, 5: 0.675, 6: 0.725,
                7: 0.5, 8: 0.65, 9: 0.7000000000000001, 10: 0.75, 11: 0.675, 12: 0.725,
                13: 0.775, 14: 0.5, 15: 0.7000000000000001, 16: 0.75, 17: 0.8, 18: 0.75,
                19: 0.8, 20: 0.85, 21: 0.5
            }
        };

        const HYPERTROPHY_LIFT_INTENSITY = {
            'Squat': {
                1: 0.7, 2: 0.725, 3: 0.75, 4: 0.725, 5: 0.75, 6: 0.775,
                7: 0.6, 8: 0.725, 9: 0.75, 10: 0.775, 11: 0.75, 12: 0.775,
                13: 0.8, 14: 0.6, 15: 0.75, 16: 0.775, 17: 0.8, 18: 0.775,
                19: 0.8, 20: 0.825, 21: 0.6
            },
            'Bench Press': {
                1: 0.7, 2: 0.725, 3: 0.75, 4: 0.725, 5: 0.75, 6: 0.775,
                7: 0.6, 8: 0.725, 9: 0.75, 10: 0.775, 11: 0.75, 12: 0.775,
                13: 0.8, 14: 0.6, 15: 0.75, 16: 0.775, 17: 0.8, 18: 0.775,
                19: 0.8, 20: 0.825, 21: 0.6
            },
            'Block Pulls': {
                1: 0.7, 2: 0.725, 3: 0.75, 4: 0.725, 5: 0.75, 6: 0.775,
                7: 0.6, 8: 0.725, 9: 0.75, 10: 0.775, 11: 0.75, 12: 0.775,
                13: 0.8, 14: 0.6, 15: 0.75, 16: 0.775, 17: 0.8, 18: 0.775,
                19: 0.8, 20: 0.825, 21: 0.6
            },
            'OHP': {
                1: 0.7, 2: 0.725, 3: 0.75, 4: 0.725, 5: 0.75, 6: 0.775,
                7: 0.6, 8: 0.725, 9: 0.75, 10: 0.775, 11: 0.75, 12: 0.775,
                13: 0.8, 14: 0.6, 15: 0.75, 16: 0.775, 17: 0.8, 18: 0.775,
                19: 0.8, 20: 0.825, 21: 0.6
            },
            'Leg Press': {
                1: 0.65, 2: 0.675, 3: 0.7, 4: 0.675, 5: 0.7, 6: 0.725,
                7: 0.55, 8: 0.675, 9: 0.7, 10: 0.725, 11: 0.7, 12: 0.725,
                13: 0.75, 14: 0.55, 15: 0.7, 16: 0.725, 17: 0.75, 18: 0.725,
                19: 0.75, 20: 0.775, 21: 0.55
            },
            'Hack Squat': {
                1: 0.65, 2: 0.675, 3: 0.7, 4: 0.675, 5: 0.7, 6: 0.725,
                7: 0.55, 8: 0.675, 9: 0.7, 10: 0.725, 11: 0.7, 12: 0.725,
                13: 0.75, 14: 0.55, 15: 0.7, 16: 0.725, 17: 0.75, 18: 0.725,
                19: 0.75, 20: 0.775, 21: 0.55
            },
            'Incline Press': {
                1: 0.65, 2: 0.675, 3: 0.7, 4: 0.675, 5: 0.7, 6: 0.725,
                7: 0.55, 8: 0.675, 9: 0.7, 10: 0.725, 11: 0.7, 12: 0.725,
                13: 0.75, 14: 0.55, 15: 0.7, 16: 0.725, 17: 0.75, 18: 0.725,
                19: 0.75, 20: 0.775, 21: 0.55
            },
            'DB Bench': {
                1: 0.65, 2: 0.675, 3: 0.7, 4: 0.675, 5: 0.7, 6: 0.725,
                7: 0.55, 8: 0.675, 9: 0.7, 10: 0.725, 11: 0.7, 12: 0.725,
                13: 0.75, 14: 0.55, 15: 0.7, 16: 0.725, 17: 0.75, 18: 0.725,
                19: 0.75, 20: 0.775, 21: 0.55
            },
            'Romanian Deadlift': {
                1: 0.65, 2: 0.675, 3: 0.7, 4: 0.675, 5: 0.7, 6: 0.725,
                7: 0.55, 8: 0.675, 9: 0.7, 10: 0.725, 11: 0.7, 12: 0.725,
                13: 0.75, 14: 0.55, 15: 0.7, 16: 0.725, 17: 0.75, 18: 0.725,
                19: 0.75, 20: 0.775, 21: 0.55
            },
            'DB OHP': {
                1: 0.65, 2: 0.675, 3: 0.7, 4: 0.675, 5: 0.7, 6: 0.725,
                7: 0.55, 8: 0.675, 9: 0.7, 10: 0.725, 11: 0.7, 12: 0.725,
                13: 0.75, 14: 0.55, 15: 0.7, 16: 0.725, 17: 0.75, 18: 0.725,
                19: 0.75, 20: 0.775, 21: 0.55
            }
        };

        const STRENGTH_LIFT_INTENSITY_BY_NAME = Object.fromEntries(
            Object.entries(STRENGTH_LIFT_INTENSITY).map(([name, table]) => [
                String(name).trim().toLowerCase(),
                table
            ])
        );

        const HYPERTROPHY_LIFT_INTENSITY_BY_NAME = Object.fromEntries(
            Object.entries(HYPERTROPHY_LIFT_INTENSITY).map(([name, table]) => [
                String(name).trim().toLowerCase(),
                table
            ])
        );

        function getIntensityForExercise(exerciseName, weekNum) {
            if (!weekNum) return null;
            const weekKey = String(weekNum);

            if (exerciseName) {
                const key = String(exerciseName).trim().toLowerCase();
                if (appData.programType === 'strength') {
                    const table = STRENGTH_LIFT_INTENSITY_BY_NAME[key];
                    if (table && table[weekKey] !== undefined) {
                        return table[weekKey];
                    }
                } else if (appData.programType === 'hypertrophy') {
                    const table = HYPERTROPHY_LIFT_INTENSITY_BY_NAME[key];
                    if (table && table[weekKey] !== undefined) {
                        return table[weekKey];
                    }
                }
            }

            return WEEK_INTENSITY[weekNum] || null;
        }

        // App state
        const DATA_VERSION = 2;
        let appData = {
            version: DATA_VERSION,
            programType: 'strength',  // 'strength' or 'hypertrophy'
            selectedProgram: '3x',  // 2x, 3x, 4x, 5x (or 6x for hypertrophy)
            currentWeek: 16,
            currentDay: 1,
            weightUnit: 'kg',  // 'kg' or 'lbs' - global setting for all weights
            workouts: {},
            completedDays: {}, // Track completed days per week: { weekNum: { 1: true, 2: false, 3: true } }
            oneRepMaxes: {
                squat: 100,
                bench: 100,
                deadlift: 140,
                ohp: 50
            },
            auxiliaryExercises: {
                'squat-aux-1': 'Leg Press',
                'squat-aux-2': 'Hack Squat',
                'bench-aux-1': 'Incline Press',
                'bench-aux-2': 'DB Bench',
                'deadlift-aux': 'Romanian Deadlift',
                'ohp-aux': 'DB OHP'
            },
            plateCalculator: {
                enabled: true,
                barbellWeight: 20,  // stored in same unit as weightUnit
                availablePlates: [20, 15, 10, 5, 2.5, 1.25]  // stored in same unit as weightUnit
            },
            personalRecords: {
                // Track PRs per exercise: { exerciseName: { estimated1RM, weight, reps, date, week } }
            },
            restTimer: {
                enabled: true,
                duration: 180,  // seconds (3 minutes default)
                autoStart: false
            },
            setupComplete: false
        };

        // Hevy integration state (stored separately from appData)
        const HEVY_STORAGE_KEY = 'sbs-hevy-v1';
        const HEVY_API_BASE = 'https://api.hevyapp.com';
        let hevyState = {
            apiKey: '',
            templatesByName: {},
            templatesLastSync: null,
            nameOverrides: {},
            defaultDurationMinutes: 60,
            isPrivate: true
        };

        // Timer state (not persisted)
        let timerState = {
            active: false,
            paused: false,
            remaining: 0,
            interval: null
        };

        // Helper function to get max week based on program type
        function getMaxWeek() {
            return appData.programType === 'hypertrophy' ? 21 : 20;
        }

        function isRIRProgram() {
            return appData.programType === 'strength';
        }

        // Progression table
        function calculateProgressionFromDelta(delta) {
            if (delta <= -2) return -0.05;  // -5%
            if (delta === -1) return -0.02;  // -2%
            if (delta === 0) return 0.0;     // 0%
            if (delta === 1) return 0.005;   // +0.5%
            if (delta === 2) return 0.01;    // +1%
            if (delta === 3) return 0.015;   // +1.5%
            if (delta === 4) return 0.02;    // +2%
            if (delta >= 5) return 0.03;     // +3%
            return 0;
        }

        function calculateProgression(amrapReps, target) {
            if (!target) return 0;
            const diff = amrapReps - target;
            return calculateProgressionFromDelta(diff);
        }

        function roundWeight(weight) {
            // Excel MROUND rounds to nearest multiple
            return Math.round(weight / 2.5) * 2.5;
        }


        // Load/save data
        // Weight conversion and display helpers
        const KG_TO_LBS = 2.20462;
        const LBS_TO_KG = 1 / KG_TO_LBS;

        function kgToLbs(kg) {
            return kg * KG_TO_LBS;
        }

        function lbsToKg(lbs) {
            return lbs * LBS_TO_KG;
        }

        function displayWeight(kg) {
            const unit = appData.weightUnit || 'kg';
            if (unit === 'lbs') {
                const lbs = kgToLbs(kg);
                return `${Math.round(lbs * 2) / 2} lbs`; // Round to nearest 0.5 lbs
            }
            return `${kg} kg`;
        }

        function getWeightUnit() {
            return appData.weightUnit || 'kg';
        }

        function getSelectOptions(selectId) {
            const select = document.getElementById(selectId);
            if (!select) return [];
            return Array.from(select.options).map(option => option.value);
        }

        function normalizeAuxiliaryExercises() {
            const defaults = {
                'squat-aux-1': 'Leg Press',
                'squat-aux-2': 'Hack Squat',
                'bench-aux-1': 'Incline Press',
                'bench-aux-2': 'DB Bench',
                'deadlift-aux': 'Romanian Deadlift',
                'ohp-aux': 'DB OHP'
            };

            const stored = appData.auxiliaryExercises || {};

            // Migrate legacy keys to new slots if present.
            if (stored.squat && !stored['squat-aux-1']) stored['squat-aux-1'] = stored.squat;
            if (stored.bench && !stored['bench-aux-1']) stored['bench-aux-1'] = stored.bench;
            if (stored.deadlift && !stored['deadlift-aux']) stored['deadlift-aux'] = stored.deadlift;
            if (stored.ohp && !stored['ohp-aux']) stored['ohp-aux'] = stored.ohp;

            const slotSelectMap = {
                'squat-aux-1': 'settings-squat-aux-1',
                'squat-aux-2': 'settings-squat-aux-2',
                'bench-aux-1': 'settings-bench-aux-1',
                'bench-aux-2': 'settings-bench-aux-2',
                'deadlift-aux': 'settings-deadlift-aux',
                'ohp-aux': 'settings-ohp-aux'
            };

            const normalized = {};
            Object.entries(slotSelectMap).forEach(([slot, selectId]) => {
                const options = getSelectOptions(selectId);
                const candidate = stored[slot] || defaults[slot];
                normalized[slot] = options.includes(candidate) ? candidate : defaults[slot];
            });

            appData.auxiliaryExercises = normalized;
        }

        function isDayComplete(weekNum, dayNum) {
            const completed = appData.completedDays?.[weekNum]?.[dayNum] === true;
            const weekData = appData.workouts?.[weekNum];
            if (!weekData || !weekData[dayNum]) return completed;
            const hasLastSetMetrics = weekData[dayNum].some(ex => getLastSetValue(ex) !== undefined);
            return completed || hasLastSetMetrics;
        }

        function migrateData(data) {
            const migrated = {...data};
            if (!migrated.version) {
                migrated.version = 1;
            }

            if (!migrated.completedDays) migrated.completedDays = {};
            if (!migrated.workouts) migrated.workouts = {};
            if (!migrated.personalRecords) migrated.personalRecords = {};
            if (!migrated.restTimer) {
                migrated.restTimer = { enabled: true, duration: 180, autoStart: false };
            }
            if (!migrated.plateCalculator) {
                migrated.plateCalculator = {
                    enabled: true,
                    barbellWeight: migrated.weightUnit === 'kg' ? 20 : 45,
                    availablePlates: migrated.weightUnit === 'kg'
                        ? [20, 15, 10, 5, 2.5, 1.25]
                        : [45, 35, 25, 10, 5, 2.5]
                };
            }

            migrated.version = DATA_VERSION;
            return migrated;
        }

        function getLastSetValue(exercise) {
            if (exercise.rirValue !== undefined && exercise.rirValue !== null) {
                const value = Number(exercise.rirValue);
                return Number.isFinite(value) ? value : undefined;
            }
            if (exercise.amrapReps !== undefined && exercise.amrapReps !== null) {
                const value = Number(exercise.amrapReps);
                return Number.isFinite(value) ? value : undefined;
            }
            return undefined;
        }

        function setLastSetValue(exercise, value) {
            if (value === null || value === undefined || value === '') {
                exercise.rirValue = undefined;
                exercise.amrapReps = undefined;
                return;
            }
            const numeric = Number(value);
            if (!Number.isFinite(numeric) || numeric < 0) {
                exercise.rirValue = undefined;
                exercise.amrapReps = undefined;
                return;
            }
            if (isRIRProgram()) {
                exercise.rirValue = numeric;
                exercise.amrapReps = undefined;
            } else {
                if (numeric <= 0) {
                    exercise.amrapReps = undefined;
                    exercise.rirValue = undefined;
                } else {
                    exercise.amrapReps = numeric;
                    exercise.rirValue = undefined;
                }
            }
        }

        function ensureDayState(weekNum, dayNum) {
            const weekData = appData.workouts[weekNum];
            if (!weekData || !weekData[dayNum]) return;

            weekData[dayNum].forEach(ex => {
                const hasLastSetMetric = !!ex.target;
                const clickableCount = hasLastSetMetric ? ex.sets - 1 : ex.sets;
                if (!ex.completedSets || ex.completedSets.length !== clickableCount) {
                    ex.completedSets = new Array(clickableCount).fill(false);
                }
            });
        }

        function prepareCurrentDay() {
            ensureDayState(appData.currentWeek, appData.currentDay);
        }

        function loadData() {
            const saved = localStorage.getItem('sbs-tracker-v2');
            if (saved) {
                const data = migrateData(JSON.parse(saved));
                appData = {...appData, ...data};
            }

            normalizeAuxiliaryExercises();

            // Load current week workout if not in appData
            if (!appData.workouts[appData.currentWeek]) {
                appData.workouts[appData.currentWeek] = getWeekData(appData.currentWeek);
            }
            ensureDayState(appData.currentWeek, appData.currentDay);
        }

        function saveData() {
            try {
                localStorage.setItem('sbs-tracker-v2', JSON.stringify(appData));
            } catch (error) {
                console.error('Failed to save data:', error);
                showToast('Failed to save data. Storage may be full.', 'error', 5000);
            }
        }

        function loadHevyState() {
            const saved = localStorage.getItem(HEVY_STORAGE_KEY);
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    hevyState = {...hevyState, ...data};
                } catch (error) {
                    console.warn('Failed to parse Hevy settings:', error);
                }
            }
            updateHevySettingsUI();
        }

        function saveHevyState() {
            try {
                localStorage.setItem(HEVY_STORAGE_KEY, JSON.stringify(hevyState));
            } catch (error) {
                console.error('Failed to save Hevy settings:', error);
                showToast('Failed to save Hevy settings.', 'error', 4000);
            }
        }

        function updateHevySettingsUI() {
            const apiKeyInput = document.getElementById('hevy-api-key');
            const durationInput = document.getElementById('hevy-duration');
            const privacySelect = document.getElementById('hevy-privacy');
            const overridesInput = document.getElementById('hevy-name-overrides');
            const statusEl = document.getElementById('hevy-sync-status');

            if (apiKeyInput) apiKeyInput.value = hevyState.apiKey || '';
            if (durationInput) durationInput.value = hevyState.defaultDurationMinutes || 60;
            if (privacySelect) privacySelect.value = hevyState.isPrivate ? 'private' : 'public';
            if (overridesInput) {
                overridesInput.value = JSON.stringify(hevyState.nameOverrides || {}, null, 2);
            }
            if (statusEl) {
                const lastSync = hevyState.templatesLastSync
                    ? new Date(hevyState.templatesLastSync).toLocaleString()
                    : 'Not synced yet';
                statusEl.textContent = `Templates: ${Object.keys(hevyState.templatesByName || {}).length} loaded. Last sync: ${lastSync}.`;
            }
        }

        function getWeekData(weekNum) {
            // Get week data based on program type
            const programSource = appData.programType === 'hypertrophy'
                ? (typeof HYPERTROPHY_PROGRAM_WEEKS !== 'undefined' ? HYPERTROPHY_PROGRAM_WEEKS : null)
                : ALL_PROGRAMS;

            if (!programSource) {
                showToast('Hypertrophy program data not loaded yet. Please refresh.', 'error', 5000);
                return {1: []};
            }

            const programData = programSource[appData.selectedProgram];
            if (!programData) {
                showToast(`Program ${appData.selectedProgram} not found.`, 'error', 5000);
                return {1: []};
            }

            const weekData = programData[weekNum.toString()];
            if (!weekData) {
                showToast(`Week ${weekNum} data not found for ${appData.selectedProgram}.`, 'error', 5000);
                return {1: []};
            }

            // Deep copy to avoid modifying the source data
            const copiedData = JSON.parse(JSON.stringify(weekData));

            // Apply user's auxiliary exercise selections
            return applyAuxiliaryExercises(copiedData);
        }

        function applyAuxiliaryExercises(weekData) {
            // Define which exercises are main lifts (these should never be replaced)
            const mainLifts = ['Squat', 'Bench Press', 'Deadlift', 'OHP', 'Block Pulls'];

            // Map default exercise names to their auxiliary category
            // Based on SBS Hypertrophy Template defaults
            const defaultAuxiliaryMap = {
                'Leg Press': 'squat-aux-1',
                'Hack Squat': 'squat-aux-2',
                'Incline Press': 'bench-aux-1',
                'DB Bench': 'bench-aux-2',
                'Romanian Deadlift': 'deadlift-aux',
                'DB OHP': 'ohp-aux'
            };

            // Define 1RM values for auxiliary exercises - all relative to user's main lift 1RMs.
            // Template default exercises use multipliers derived from their respective Excel templates.
            // Strength: Squat=100, Bench=100, Deadlift=140, OHP=50, LegPress=190, Incline=90, RDL=100, DBOHP=25
            // Hypertrophy: Squat=490, Bench=325, BlockPulls=525, OHP=200, LegPress=420, HackSquat=460, Incline=310, DBBench=280, RDL=500, DBOHP=245
            const isHypertrophy = appData.programType === 'hypertrophy';
            const auxiliary1RMs = {
                // Squat auxiliaries - template defaults (multiplier differs by program)
                'Leg Press': appData.oneRepMaxes.squat * (isHypertrophy ? 0.857 : 1.90),
                'Hack Squat': appData.oneRepMaxes.squat * (isHypertrophy ? 0.939 : 1.10),
                // Squat auxiliaries - user-selectable options (% of squat 1RM)
                'Front Squat': appData.oneRepMaxes.squat * 0.85,
                'Paused Squat': appData.oneRepMaxes.squat * 0.88,
                'High Bar Squat': appData.oneRepMaxes.squat * 0.98,
                'Beltless Squat': appData.oneRepMaxes.squat * 0.90,
                'Wider Stance Squat': appData.oneRepMaxes.squat * 0.95,
                'Narrower Stance Squat': appData.oneRepMaxes.squat * 0.95,
                'Box Squat': appData.oneRepMaxes.squat * 0.90,
                'Pin Squat': appData.oneRepMaxes.squat * 0.85,
                'Half Squat': appData.oneRepMaxes.squat * 1.15,
                'Good Morning': appData.oneRepMaxes.squat * 0.50,
                'Squat With Slow Eccentric': appData.oneRepMaxes.squat * 0.85,
                'Bulgarian Split Squat': appData.oneRepMaxes.squat * 0.55,
                'Lunges': appData.oneRepMaxes.squat * 0.50,

                // Bench auxiliaries - template defaults
                'Incline Press': appData.oneRepMaxes.bench * (isHypertrophy ? 0.954 : 0.90),
                'DB Bench': appData.oneRepMaxes.bench * (isHypertrophy ? 0.862 : 0.85),
                // Bench auxiliaries - user-selectable options (% of bench 1RM)
                'Close Grip Bench': appData.oneRepMaxes.bench * 0.88,
                'Long Pause Bench': appData.oneRepMaxes.bench * 0.88,
                'Spoto Press': appData.oneRepMaxes.bench * 0.85,
                'Wider Grip Bench': appData.oneRepMaxes.bench * 0.95,
                'Board Press': appData.oneRepMaxes.bench * 1.05,
                'Pin Press': appData.oneRepMaxes.bench * 0.85,
                'Slingshot Bench': appData.oneRepMaxes.bench * 1.10,
                'Bench With Feet Up': appData.oneRepMaxes.bench * 0.85,
                'Bench With Slow Eccentric': appData.oneRepMaxes.bench * 0.85,

                // Deadlift auxiliaries - template defaults
                'Romanian Deadlift': appData.oneRepMaxes.deadlift * (isHypertrophy ? 0.952 : 0.714),
                // Deadlift auxiliaries - user-selectable options (% of deadlift 1RM)
                'Sumo Deadlift': appData.oneRepMaxes.deadlift * 0.95,
                'Conventional Deadlift': appData.oneRepMaxes.deadlift * 1.00,
                'Block Pull': appData.oneRepMaxes.deadlift * 1.05,
                'Rack Pull': appData.oneRepMaxes.deadlift * 1.10,
                'Deficit Deadlift': appData.oneRepMaxes.deadlift * 0.85,
                'Stiff Leg Deadlift': appData.oneRepMaxes.deadlift * 0.75,
                'Snatch Grip Deadlift': appData.oneRepMaxes.deadlift * 0.80,
                'Trap Bar Deadlift': appData.oneRepMaxes.deadlift * 1.05,
                'Paused Deadlift': appData.oneRepMaxes.deadlift * 0.88,

                // OHP auxiliaries - template defaults
                'DB OHP': appData.oneRepMaxes.ohp * (isHypertrophy ? 1.225 : 0.50),
                // OHP auxiliaries - user-selectable options (% of OHP 1RM)
                'Push Press': appData.oneRepMaxes.ohp * 1.15,
                'Behind The Neck OHP': appData.oneRepMaxes.ohp * 0.85,
                'Seated OHP': appData.oneRepMaxes.ohp * 0.95
            };

            // Process each day in the week
            for (let day in weekData) {
                const exercises = weekData[day];

                // Replace auxiliary exercises based on default name mapping
                exercises.forEach(ex => {
                    if (!mainLifts.includes(ex.name)) {
                        // Store the original exercise name for weight calculation
                        const originalExerciseName = ex.name;

                        // Check if this is a default auxiliary exercise
                        const auxCategory = defaultAuxiliaryMap[ex.name];

                        // Apply the replacement if we have user preferences for this category
                        if (auxCategory && appData.auxiliaryExercises && appData.auxiliaryExercises[auxCategory]) {
                            const newExerciseName = appData.auxiliaryExercises[auxCategory];
                            // Only replace if we can compute an auxiliary 1RM for the choice.
                            if (!auxiliary1RMs[newExerciseName]) {
                                return;
                            }

                            // Calculate weight adjustment ratio
                            const originalRM = auxiliary1RMs[originalExerciseName];
                            const newRM = auxiliary1RMs[newExerciseName];

                            if (originalRM && newRM && originalExerciseName !== newExerciseName) {
                                const weightRatio = newRM / originalRM;
                                ex.weight = Math.round(ex.weight * weightRatio * 4) / 4; // Round to nearest 0.25kg
                            }

                            ex.name = newExerciseName;
                        }
                        // Also check old format for backwards compatibility
                        else if (appData.auxiliaryExercises) {
                            // Map old categories to new for backwards compatibility
                            const oldCategoryMap = {
                                'Romanian Deadlift': 'deadlift',
                                'Leg Press': 'squat',
                                'Hack Squat': 'squat',
                                'Incline Press': 'bench',
                                'DB Bench': 'bench',
                                'DB OHP': 'ohp'
                            };

                            const oldCategory = oldCategoryMap[ex.name];
                            if (oldCategory && appData.auxiliaryExercises[oldCategory]) {
                                const newExerciseName = appData.auxiliaryExercises[oldCategory];
                                // Skip invalid legacy choices so the default stays intact.
                                if (!auxiliary1RMs[newExerciseName]) {
                                    return;
                                }

                                // Calculate weight adjustment ratio
                                const originalRM = auxiliary1RMs[originalExerciseName];
                                const newRM = auxiliary1RMs[newExerciseName];

                                if (originalRM && newRM && originalExerciseName !== newExerciseName) {
                                    const weightRatio = newRM / originalRM;
                                    ex.weight = Math.round(ex.weight * weightRatio * 4) / 4; // Round to nearest 0.25kg
                                }

                                ex.name = newExerciseName;
                            }
                        }
                    }
                });
            }

            return weekData;
        }

        function getNumDays() {
            // Return number of days based on selected program
            const numDaysMap = {'2x': 2, '3x': 3, '4x': 4, '5x': 5};
            return numDaysMap[appData.selectedProgram] || 3;
        }

        function hasCompletedWorkouts(weekNum) {
            // Check if a week has any completed workouts (AMRAP data or completed days)
            if (!appData.workouts[weekNum]) {
                return false;
            }

            const weekData = appData.workouts[weekNum];

            for (let day = 1; day <= getNumDays(); day++) {
                if (weekData[day] && isDayComplete(weekNum, day)) {
                    return true;
                }
            }

            return false;
        }

        // Theme Toggle Function
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);

            // Update icon
            const icon = document.getElementById('theme-icon');
            if (icon) {
                icon.textContent = newTheme === 'dark' ? '☀️' : '🌙';
            }

            // Update PWA theme color
            const metaThemeColor = document.querySelector('meta[name="theme-color"]');
            if (newTheme === 'dark') {
                metaThemeColor.setAttribute('content', '#0f0f0f');
            } else {
                metaThemeColor.setAttribute('content', '#1e40af');
            }
        }

        // Load saved theme on page load
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme === 'system' ? (prefersDark ? 'dark' : 'light') : savedTheme;

            document.documentElement.setAttribute('data-theme', theme);

            // Update icon
            const icon = document.getElementById('theme-icon');
            if (icon) {
                icon.textContent = theme === 'dark' ? '☀️' : '🌙';
            }

            // Update PWA theme color
            const metaThemeColor = document.querySelector('meta[name="theme-color"]');
            if (theme === 'dark') {
                metaThemeColor.setAttribute('content', '#0f0f0f');
            } else {
                metaThemeColor.setAttribute('content', '#1e40af');
            }
        }

        // UI Functions
        function switchTab(tabName) {
            // Update top tabs
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Update bottom nav
            document.querySelectorAll('.bottom-nav-item').forEach(item => item.classList.remove('active'));

            // Find and activate the clicked tab (top)
            const clickedTab = Array.from(document.querySelectorAll('.nav-tab')).find(
                tab => tab.textContent.toLowerCase().includes(tabName.toLowerCase())
            );
            if (clickedTab) {
                clickedTab.classList.add('active');
            }

            // Find and activate the bottom nav item
            const clickedBottomNavItem = document.querySelector(`.bottom-nav-item[data-tab="${tabName}"]`);
            if (clickedBottomNavItem) {
                clickedBottomNavItem.classList.add('active');
            }

            // Show the tab content
            document.getElementById(`${tabName}-tab`).classList.add('active');

            if (tabName === 'history') {
                renderHistory();
            } else if (tabName === 'settings') {
                loadAuxiliarySettings();
            } else if (tabName === 'progress') {
                renderProgress();
            }
        }

        function renderDaySelector() {
            const container = document.getElementById('day-selector');
            const numDays = getNumDays();

            let html = '';
            for (let day = 1; day <= numDays; day++) {
                const activeClass = day === appData.currentDay ? 'active' : '';
                html += `<button class="day-btn ${activeClass}" onclick="selectDay(${day})">Day ${day}</button>`;
            }
            container.innerHTML = html;
        }

        function selectDay(day) {
            appData.currentDay = day;
            ensureDayState(appData.currentWeek, appData.currentDay);
            updateDayButtons();
            renderWorkout();
        }

        function updateDayButtons() {
            document.querySelectorAll('.day-btn').forEach((btn, idx) => {
                const dayNum = idx + 1;
                btn.classList.toggle('active', dayNum === appData.currentDay);
                btn.classList.toggle('completed', isDayComplete(appData.currentWeek, dayNum));
            });
        }

        function renderWorkout() {
            const container = document.getElementById('workout-container');
            const weekData = appData.workouts[appData.currentWeek];
            const exercises = weekData[appData.currentDay];

            const usesRIR = isRIRProgram();
            const inputLabel = usesRIR ? 'Log Last Set RIR:' : 'Log AMRAP Reps:';
            const helperText = usesRIR
                ? 'RIR is required to track progression.'
                : 'AMRAP is required to track progress and PRs.';
            const targetLabel = usesRIR ? 'Target (RIR)' : 'Target (AMRAP)';

            // Initialize personalRecords if it doesn't exist (for backward compatibility)
            if (!appData.personalRecords) {
                appData.personalRecords = {};
            }

            container.innerHTML = exercises.map((ex, idx) => {
                const currentPR = appData.personalRecords[ex.name];
                const hasPR = !usesRIR && currentPR !== undefined;
                const lastSetValue = getLastSetValue(ex);

                // Calculate reps needed to beat PR
                let prBeatText = '';
                if (hasPR && ex.target) {
                    const repsNeededToBeatPR = calculateRepsNeededToBeatPR(ex.weight, currentPR.estimated1RM);
                    if (repsNeededToBeatPR > 0) {
                        prBeatText = `<div class="pr-beat-hint" id="pr-beat-${appData.currentDay}-${idx}">🎯 Beat PR: Need ${repsNeededToBeatPR}+ reps</div>`;
                    }
                }

                return `
                <div class="exercise-card">
                    <div class="exercise-name">
                        ${ex.name}
                        ${hasPR ? `<span class="pr-badge">PR: ${Math.round(currentPR.estimated1RM)} ${getWeightUnit()}</span>` : ''}
                    </div>
                    <div class="exercise-details">
                        <div>
                            <div class="detail-label">Weight</div>
                            <div class="detail-value">${ex.weight} ${getWeightUnit()}</div>
                        </div>
                        <div>
                            <div class="detail-label">Reps per Set</div>
                            <div class="detail-value">${ex.reps}</div>
                        </div>
                        <div>
                            <div class="detail-label">${targetLabel}</div>
                            <div class="detail-value">${ex.target || 'N/A'}</div>
                        </div>
                        <div>
                            <div class="detail-label">Total Sets</div>
                            <div class="detail-value">${ex.sets}</div>
                        </div>
                    </div>
                    ${renderSetCircles(ex, appData.currentDay, idx)}
                    <div class="set-actions">
                        <button class="set-action-btn" onclick="completeAllSets(${appData.currentDay}, ${idx})">Complete sets</button>
                        <button class="set-action-btn" onclick="resetSets(${appData.currentDay}, ${idx})">Reset sets</button>
                    </div>
                    ${renderPlateDisplay(ex.weight)}
                    ${ex.target ? `
                    <div class="amrap-input">
                        <label>${inputLabel}</label>
                        <div class="stepper-control">
                            <button class="stepper-btn" onclick="adjustAmrap(${appData.currentDay}, ${idx}, -1)" ${lastSetValue === undefined || lastSetValue <= 0 ? 'disabled' : ''}>−</button>
                            <input type="number"
                                   class="stepper-value ${lastSetValue === undefined ? 'empty' : ''}"
                                   id="amrap-${appData.currentDay}-${idx}"
                                   value="${lastSetValue !== undefined ? lastSetValue : ''}"
                                   placeholder="?"
                                   min="0"
                                   inputmode="numeric"
                                   onchange="updateAmrapDirect(${appData.currentDay}, ${idx}, this.value)"
                                   onblur="updateAmrapDirect(${appData.currentDay}, ${idx}, this.value)">
                            <button class="stepper-btn" onclick="adjustAmrap(${appData.currentDay}, ${idx}, 1)">+</button>
                        </div>
                    </div>
                    <div class="amrap-helper">${helperText}</div>
                    ${prBeatText}
                    <div class="progression-hint" id="hint-${appData.currentDay}-${idx}"></div>
                    ` : '<div class="note note-muted">Deload week - no last set metric</div>'}
                </div>
            `;
            }).join('');

            // Update hints
            exercises.forEach((ex, idx) => {
                if (getLastSetValue(ex) !== undefined && ex.target) {
                    updateProgressionHint(appData.currentDay, idx);
                }
                // Update PR beat hint for exercises with existing PRs
                if (!usesRIR && ex.target && appData.personalRecords[ex.name]) {
                    updatePRBeatHint(appData.currentDay, idx);
                }
            });

            // Update week displays
            document.getElementById('current-week').textContent = appData.currentWeek;
            document.getElementById('workout-week-display').textContent = appData.currentWeek;
            const programTypeLabel = appData.programType === 'hypertrophy' ? 'Hypertrophy' : 'Strength';
            const programVariantLabel = appData.selectedProgram || '3x';
            document.getElementById('program-type-display').textContent = programTypeLabel;
            document.getElementById('program-variant-display').textContent = programVariantLabel;

            // Render day selector
            renderDaySelector();
            updateDayButtons();
            updateNavigationButtons();
            updateMarkDayButton();
        }

        // Haptic Feedback Utility
        function hapticFeedback(pattern = 'light') {
            if (!navigator.vibrate) return; // Check if vibration API is supported

            const patterns = {
                'light': 10,           // Quick tap for buttons
                'medium': 20,          // Slightly longer for confirmations
                'success': [10, 50, 10, 50, 10],  // Success pattern
                'error': [100, 50, 100]  // Error pattern
            };

            navigator.vibrate(patterns[pattern] || patterns.light);
        }

        // Toast Notification System
        function showToast(message, type = 'info', duration = 3000) {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;

            const messageEl = document.createElement('div');
            messageEl.className = 'toast-message';
            messageEl.textContent = message;

            const closeBtn = document.createElement('button');
            closeBtn.className = 'toast-close';
            closeBtn.innerHTML = '×';
            closeBtn.onclick = () => removeToast(toast);

            toast.appendChild(messageEl);
            toast.appendChild(closeBtn);
            container.appendChild(toast);

            // Auto-remove after duration
            setTimeout(() => removeToast(toast), duration);

            // Haptic feedback for errors
            if (type === 'error') {
                hapticFeedback('error');
            }
        }

        function showUpdateToast(message, onAction, actionLabel = 'Update', duration = 10000) {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = 'toast toast-info';

            const messageEl = document.createElement('div');
            messageEl.className = 'toast-message';
            messageEl.textContent = message;

            const actionBtn = document.createElement('button');
            actionBtn.className = 'toast-action';
            actionBtn.textContent = actionLabel;
            actionBtn.onclick = () => {
                if (onAction) onAction();
                removeToast(toast);
            };

            const closeBtn = document.createElement('button');
            closeBtn.className = 'toast-close';
            closeBtn.innerHTML = '×';
            closeBtn.onclick = () => removeToast(toast);

            toast.appendChild(messageEl);
            toast.appendChild(actionBtn);
            toast.appendChild(closeBtn);
            container.appendChild(toast);

            setTimeout(() => removeToast(toast), duration);
        }

        function removeToast(toast) {
            if (!toast || !toast.parentNode) return;
            toast.style.opacity = '0';
            toast.style.transform = 'translateY(20px)';
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }

        // Debounce timer for PR notifications
        let prDebounceTimer = null;
        let pendingPR = null;

        function toggleSetComplete(day, exIdx, setIdx) {
            hapticFeedback('light');
            const ex = appData.workouts[appData.currentWeek][day][exIdx];
            if (!ex.completedSets) {
                const hasLastSetMetric = !!ex.target;
                ex.completedSets = new Array(hasLastSetMetric ? ex.sets - 1 : ex.sets).fill(false);
            }
            ex.completedSets[setIdx] = !ex.completedSets[setIdx];
            // Update circle directly
            const circle = document.querySelector(`[data-set="${day}-${exIdx}-${setIdx}"]`);
            if (circle) {
                circle.classList.toggle('completed', ex.completedSets[setIdx]);
            }
            saveData();
        }

        function completeAllSets(day, exIdx) {
            const ex = appData.workouts[appData.currentWeek][day][exIdx];
            const hasLastSetMetric = !!ex.target;
            const clickableCount = hasLastSetMetric ? ex.sets - 1 : ex.sets;
            ex.completedSets = new Array(clickableCount).fill(true);
            saveData();
            renderWorkout();
        }

        function resetSets(day, exIdx) {
            const ex = appData.workouts[appData.currentWeek][day][exIdx];
            const hasLastSetMetric = !!ex.target;
            const clickableCount = hasLastSetMetric ? ex.sets - 1 : ex.sets;
            ex.completedSets = new Array(clickableCount).fill(false);
            saveData();
            renderWorkout();
        }

        function adjustAmrap(day, exIdx, delta) {
            // Haptic feedback on button press
            hapticFeedback('light');

            const ex = appData.workouts[appData.currentWeek][day][exIdx];
            const currentValue = getLastSetValue(ex) || 0;
            const newValue = Math.max(0, currentValue + delta);
            const usesRIR = isRIRProgram();

            updateAmrap(day, exIdx, newValue);

            // Re-render to update button states
            const valueEl = document.getElementById(`amrap-${day}-${exIdx}`);
            if (valueEl) {
                const stepper = valueEl.closest('.stepper-control');
                if (stepper) {
                    const decBtn = stepper.querySelector('.stepper-btn');
                    if (decBtn) {
                        decBtn.disabled = newValue <= 0;
                    }
                }
                if (!usesRIR && newValue <= 0) {
                    valueEl.value = '';
                    valueEl.classList.add('empty');
                } else {
                    valueEl.value = newValue;
                    valueEl.classList.remove('empty');
                }
            }
        }

        // Direct input handler for tapping/typing reps
        function updateAmrapDirect(day, exIdx, value) {
            const inputEl = document.getElementById(`amrap-${day}-${exIdx}`);
            if (value === '') {
                updateAmrap(day, exIdx, null);
                if (inputEl) inputEl.classList.add('empty');
                return;
            }
            const reps = parseInt(value);
            if (!isNaN(reps) && reps >= 0) {
                updateAmrap(day, exIdx, reps);
                if (inputEl) inputEl.classList.toggle('empty', !isRIRProgram() && reps <= 0);
                if (inputEl) {
                    const stepper = inputEl.closest('.stepper-control');
                    if (stepper) {
                        const decBtn = stepper.querySelector('.stepper-btn');
                        if (decBtn) {
                            decBtn.disabled = reps <= 0;
                        }
                    }
                }
            }
        }

        function updateAmrap(day, exIdx, value) {
            const ex = appData.workouts[appData.currentWeek][day][exIdx];
            if (value === null || value === undefined || value === '') {
                setLastSetValue(ex, undefined);
            } else {
                const reps = parseInt(value);
                if (!isNaN(reps)) {
                    setLastSetValue(ex, reps);
                }
            }

            const lastSetValue = getLastSetValue(ex);
            const usesRIR = isRIRProgram();

            // Update AMRAP circle
            const amrapCircle = document.querySelector(`[data-set="${day}-${exIdx}-amrap"]`);
            if (amrapCircle) {
                const hasValue = lastSetValue !== undefined && (usesRIR ? lastSetValue >= 0 : lastSetValue > 0);
                amrapCircle.classList.toggle('has-value', hasValue);
                const valueEl = amrapCircle.querySelector('.amrap-value');
                if (valueEl) valueEl.textContent = hasValue ? lastSetValue : '?';
            }

            // Check for PR (but don't show notification yet)
            const isPR = checkAndUpdatePR(ex, appData.currentWeek);

            saveData();
            updateProgressionHint(day, exIdx);
            updatePRBeatHint(day, exIdx); // Update PR beat indicator

            // Debounce PR notification - wait 2 seconds after last change
            if (isPR) {
                pendingPR = ex;
                clearTimeout(prDebounceTimer);
                prDebounceTimer = setTimeout(() => {
                    if (pendingPR) {
                        showPRNotification(pendingPR);
                        pendingPR = null;
                    }
                }, 2000); // Wait 2 seconds after last change
            }

            // Auto-start rest timer if enabled
            if (appData.restTimer && appData.restTimer.enabled && appData.restTimer.autoStart) {
                showRestTimer();
                startTimer();
            }
        }

        function calculateEstimated1RM(weight, reps) {
            // Epley formula: weight × (1 + reps/30)
            return weight * (1 + reps / 30);
        }

        function calculateRepsNeededToBeatPR(weight, currentPR1RM) {
            // Inverse Epley formula to find reps needed to achieve target 1RM
            // currentPR1RM = weight × (1 + reps/30)
            // reps = 30 × (currentPR1RM/weight - 1)
            const repsToMatchPR = 30 * (currentPR1RM / weight - 1);
            // Need to beat it, so add 1 rep
            return Math.max(1, Math.ceil(repsToMatchPR) + 1);
        }

        function updatePRBeatHint(day, exIdx) {
            if (isRIRProgram()) return;
            const ex = appData.workouts[appData.currentWeek][day][exIdx];
            const currentPR = appData.personalRecords[ex.name];
            const hintEl = document.getElementById(`pr-beat-${day}-${exIdx}`);

            if (!hintEl || !currentPR) return;

            if (ex.amrapReps === undefined || ex.amrapReps === 0) {
                // No reps entered yet
                const repsNeeded = calculateRepsNeededToBeatPR(ex.weight, currentPR.estimated1RM);
                hintEl.textContent = `🎯 Beat PR: Need ${repsNeeded}+ reps`;
                hintEl.className = 'pr-beat-hint';
            } else {
                // Reps entered - check if beating PR
                const currentEst1RM = calculateEstimated1RM(ex.weight, ex.amrapReps);
                if (currentEst1RM > currentPR.estimated1RM) {
                    const improvement = Math.round(currentEst1RM - currentPR.estimated1RM);
                    hintEl.textContent = `🎉 NEW PR! +${improvement} ${getWeightUnit()} on estimated 1RM!`;
                    hintEl.className = 'pr-beat-hint beating';
                } else {
                    const repsNeeded = calculateRepsNeededToBeatPR(ex.weight, currentPR.estimated1RM);
                    const repsShort = repsNeeded - ex.amrapReps;
                    if (repsShort === 1) {
                        hintEl.textContent = `💪 Just 1 more rep to beat PR!`;
                    } else {
                        hintEl.textContent = `🎯 ${repsShort} more reps to beat PR`;
                    }
                    hintEl.className = 'pr-beat-hint';
                }
            }
        }

        function checkAndUpdatePR(exercise, weekNum) {
            if (isRIRProgram()) return false;
            // Only check PR if AMRAP reps are recorded
            if (exercise.amrapReps === undefined) return false;

            const exerciseName = exercise.name;
            const estimated1RM = calculateEstimated1RM(exercise.weight, exercise.amrapReps);

            // Initialize personalRecords if it doesn't exist (for backward compatibility)
            if (!appData.personalRecords) {
                appData.personalRecords = {};
            }

            const currentPR = appData.personalRecords[exerciseName];
            const isPR = !currentPR || estimated1RM > currentPR.estimated1RM;

            if (isPR) {
                appData.personalRecords[exerciseName] = {
                    estimated1RM: Math.round(estimated1RM * 10) / 10,
                    weight: exercise.weight,
                    reps: exercise.amrapReps,
                    date: new Date().toISOString(),
                    week: weekNum
                };
                return true;
            }

            return false;
        }

        function showPRNotification(exercise) {
            hapticFeedback('success');
            const estimated1RM = calculateEstimated1RM(exercise.weight, exercise.amrapReps);
            showToast(`New PR: ${exercise.name} · e1RM ${Math.round(estimated1RM)} ${getWeightUnit()}`, 'success', 6000);
        }

        // Rest Timer Functions
        function showRestTimer() {
            // Initialize rest timer settings if not present
            if (!appData.restTimer) {
                appData.restTimer = {
                    enabled: true,
                    duration: 180,
                    autoStart: false
                };
            }

            document.getElementById('rest-timer').style.display = 'block';
            timerState.remaining = appData.restTimer.duration;
            updateTimerDisplay();
        }

        function closeTimer() {
            stopTimerInterval();
            document.getElementById('rest-timer').style.display = 'none';
            timerState.active = false;
            timerState.paused = false;
            timerState.remaining = appData.restTimer.duration;
        }

        function startTimer() {
            if (!timerState.active || timerState.paused) {
                timerState.active = true;
                timerState.paused = false;

                // Update button visibility
                document.getElementById('start-timer-btn').style.display = 'none';
                document.getElementById('pause-timer-btn').style.display = 'inline-block';

                // Start countdown
                timerState.interval = setInterval(() => {
                    timerState.remaining--;
                    updateTimerDisplay();

                    if (timerState.remaining <= 0) {
                        timerComplete();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            if (timerState.active && !timerState.paused) {
                timerState.paused = true;
                stopTimerInterval();

                // Update button visibility
                document.getElementById('start-timer-btn').style.display = 'inline-block';
                document.getElementById('pause-timer-btn').style.display = 'none';
            }
        }

        function resetTimer() {
            stopTimerInterval();
            timerState.active = false;
            timerState.paused = false;
            timerState.remaining = appData.restTimer.duration;
            updateTimerDisplay();

            // Update button visibility
            document.getElementById('start-timer-btn').style.display = 'inline-block';
            document.getElementById('pause-timer-btn').style.display = 'none';
        }

        function stopTimerInterval() {
            if (timerState.interval) {
                clearInterval(timerState.interval);
                timerState.interval = null;
            }
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timerState.remaining / 60);
            const seconds = timerState.remaining % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timer-display').textContent = display;
        }

        function timerComplete() {
            stopTimerInterval();
            timerState.active = false;
            document.getElementById('timer-display').textContent = 'DONE!';

            // Play audio notification
            playTimerSound();

            showToast('Rest period complete! Ready for your next set.', 'success', 5000);

            // Update button visibility
            document.getElementById('start-timer-btn').style.display = 'inline-block';
            document.getElementById('pause-timer-btn').style.display = 'none';
        }

        function playTimerSound() {
            // Create a simple beep sound using Web Audio API
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = 800;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        function updateProgressionHint(day, exIdx) {
            const ex = appData.workouts[appData.currentWeek][day][exIdx];
            const hint = document.getElementById(`hint-${day}-${exIdx}`);

            if (!hint || !ex.target) return;

            const usesRIR = isRIRProgram();
            const lastSetValue = getLastSetValue(ex);
            if (lastSetValue === undefined) return;

            const diff = lastSetValue - ex.target;
            const delta = usesRIR ? (ex.target - lastSetValue) : (lastSetValue - ex.target);
            const progression = calculateProgressionFromDelta(delta);

            // Calculate next week's weight using TM-based progression
            const currentWeek = appData.currentWeek;
            const nextWeek = currentWeek + 1;
            const currentIntensity = getIntensityForExercise(ex.name, currentWeek) || 0.75;
            const nextIntensity = getIntensityForExercise(ex.name, nextWeek) || 0.80;

            // TM = current_weight / current_intensity
            const trainingMax = ex.weight / currentIntensity;
            // Apply AMRAP progression to TM
            const newTrainingMax = trainingMax * (1 + progression);
            // Next week working weight = newTM * next_intensity
            const nextWeight = roundWeight(newTrainingMax * nextIntensity);
            const change = nextWeight - ex.weight;

            if (diff < 0) {
                hint.className = 'progression-hint progression-positive';
                const absDiff = Math.abs(diff);
                hint.textContent = usesRIR
                    ? `${absDiff} RIR below target! Next week: ~${nextWeight} ${getWeightUnit()} (+${change} ${getWeightUnit()})`
                    : `+${absDiff} from target! Next week: ~${nextWeight} ${getWeightUnit()} (+${change} ${getWeightUnit()})`;
            } else if (diff > 0) {
                hint.className = 'progression-hint progression-negative';
                hint.textContent = usesRIR
                    ? `${diff} RIR above target. Next week: ~${nextWeight} ${getWeightUnit()} (${change >= 0 ? '+' : ''}${change} ${getWeightUnit()})`
                    : `${diff} from target. Next week: ~${nextWeight} ${getWeightUnit()} (${change >= 0 ? '+' : ''}${change} ${getWeightUnit()})`;
            } else {
                hint.className = 'progression-hint';
                hint.textContent = usesRIR
                    ? `Target RIR hit! Next week: ~${nextWeight} ${getWeightUnit()}`
                    : `Target hit! Next week: ~${nextWeight} ${getWeightUnit()}`;
            }
        }

        function markDayComplete() {
            // Haptic feedback for completion
            hapticFeedback('success');

            const currentDay = appData.currentDay;
            const currentWeek = appData.currentWeek;
            const dayExercises = appData.workouts[currentWeek]?.[currentDay] || [];
            const missingAmraps = dayExercises.filter(ex => ex.target && getLastSetValue(ex) === undefined);

            if (missingAmraps.length > 0) {
                showUpdateToast(
                    `${isRIRProgram() ? 'RIR' : 'AMRAP'} missing for ${missingAmraps.length} exercise${missingAmraps.length > 1 ? 's' : ''}.`,
                    () => finalizeDayComplete(currentWeek, currentDay),
                    'Complete anyway',
                    8000
                );
                return;
            }

            finalizeDayComplete(currentWeek, currentDay);
        }

        function finalizeDayComplete(currentWeek, currentDay) {
            const numDays = getNumDays();

            // Initialize completedDays for this week if not exists
            if (!appData.completedDays[currentWeek]) {
                appData.completedDays[currentWeek] = {};
            }

            // Mark current day as complete
            appData.completedDays[currentWeek][currentDay] = true;

            // Check if all days are complete
            const allDaysComplete = Array.from({length: numDays}, (_, i) => i + 1)
                .every(day => appData.completedDays[currentWeek][day] === true);

            saveData();
            updateDayButtons();

            if (allDaysComplete) {
                // All days complete - offer to move to next week
                if (confirm(`All days complete! Move to Week ${currentWeek + 1}?`)) {
                    advanceWeekWithProgression();
                } else {
                    showToast(`Day ${currentDay} marked complete!`, 'success');
                }
            } else {
                // Move to next incomplete day
                let nextDay = currentDay;
                for (let i = 1; i <= numDays; i++) {
                    if (!appData.completedDays[currentWeek][i]) {
                        nextDay = i;
                        break;
                    }
                }
                if (nextDay !== currentDay) {
                    appData.currentDay = nextDay;
                    ensureDayState(currentWeek, nextDay);
                    saveData();
                    renderWorkout();
                }
                showToast(`Day ${currentDay} marked complete!`, 'success');
            }
        }

        function advanceWeekWithProgression() {
            const currentWeek = appData.currentWeek;
            const nextWeek = currentWeek + 1;

            // Load next week's baseline data (preserves completed weeks automatically)
            if (!appData.workouts[nextWeek]) {
                appData.workouts[nextWeek] = getWeekData(nextWeek);
            }

            // Apply TM-based AMRAP progressions to next week's weights
            for (let day = 1; day <= getNumDays(); day++) {
                const currentDayExercises = appData.workouts[currentWeek][day];
                const nextDayExercises = appData.workouts[nextWeek][day];

                if (!currentDayExercises || !nextDayExercises) continue;

                // Match exercises by name and apply TM-based progressions
                const usesRIR = isRIRProgram();

                currentDayExercises.forEach(currentEx => {
                    if (getLastSetValue(currentEx) === undefined || !currentEx.target) return;

                    // Find matching exercise in next week by name
                    const nextEx = nextDayExercises.find(ex => ex.name === currentEx.name);
                    if (!nextEx) return;

                    const currentIntensity = getIntensityForExercise(currentEx.name, currentWeek) || 0.75;
                    const nextIntensity = getIntensityForExercise(currentEx.name, nextWeek) || 0.80;

                    // Calculate Training Max from current working weight
                    const trainingMax = currentEx.weight / currentIntensity;

                    // Apply AMRAP progression to TM
                    const lastSetValue = getLastSetValue(currentEx);
                    const delta = usesRIR ? (currentEx.target - lastSetValue) : (lastSetValue - currentEx.target);
                    const progression = calculateProgressionFromDelta(delta);
                    const newTrainingMax = trainingMax * (1 + progression);

                    // Calculate next week's working weight at new intensity
                    const nextWorkingWeight = newTrainingMax * nextIntensity;
                    nextEx.weight = roundWeight(nextWorkingWeight);
                });
            }

            appData.currentWeek = nextWeek;
            appData.currentDay = 1; // Reset to day 1
            saveData();
            prepareCurrentDay();
            renderWorkout();
            showToast(
                `Moved to Week ${nextWeek}. Weights adjusted based on ${isRIRProgram() ? 'RIR' : 'AMRAP'} performance.`,
                'success',
                5000
            );
        }

        function navigateWeek(direction) {
            const newWeek = appData.currentWeek + direction;
            const maxWeek = getMaxWeek();

            // Validate week range (1-20 for strength, 1-21 for hypertrophy)
            if (newWeek < 1 || newWeek > maxWeek) {
                return;
            }

            appData.currentWeek = newWeek;
            appData.currentDay = 1; // Reset to day 1

            // Load week data if not exists (preserves completed weeks automatically)
            if (!appData.workouts[newWeek]) {
                appData.workouts[newWeek] = getWeekData(newWeek);
            }

            saveData();
            document.getElementById('week-selector').value = appData.currentWeek;
            prepareCurrentDay();
            renderWorkout();
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-week-btn');
            const nextBtn = document.getElementById('next-week-btn');
            const maxWeek = getMaxWeek();

            prevBtn.disabled = appData.currentWeek <= 1;
            nextBtn.disabled = appData.currentWeek >= maxWeek;
        }

        function updateMarkDayButton() {
            const btn = document.getElementById('mark-day-btn');
            const dayComplete = isDayComplete(appData.currentWeek, appData.currentDay);

            if (dayComplete) {
                btn.textContent = `Day ${appData.currentDay} Already Complete ✓`;
                btn.style.opacity = '0.6';
            } else {
                btn.textContent = `Mark Day ${appData.currentDay} Complete`;
                btn.style.opacity = '1';
            }
        }

        // Settings functions
        function save1RMs() {
            appData.oneRepMaxes = {
                squat: parseFloat(document.getElementById('1rm-squat').value),
                bench: parseFloat(document.getElementById('1rm-bench').value),
                deadlift: parseFloat(document.getElementById('1rm-deadlift').value),
                ohp: parseFloat(document.getElementById('1rm-ohp').value)
            };
            saveData();
            showToast('1RMs saved.', 'success');
        }

        function saveAuxiliaryExercises() {
            appData.auxiliaryExercises = {
                'squat-aux-1': document.getElementById('settings-squat-aux-1').value,
                'squat-aux-2': document.getElementById('settings-squat-aux-2').value,
                'bench-aux-1': document.getElementById('settings-bench-aux-1').value,
                'bench-aux-2': document.getElementById('settings-bench-aux-2').value,
                'deadlift-aux': document.getElementById('settings-deadlift-aux').value,
                'ohp-aux': document.getElementById('settings-ohp-aux').value
            };

            // Clear future workouts so they'll be regenerated with new auxiliary exercises
            // BUT preserve completed weeks to maintain historical accuracy
            const currentWeek = appData.currentWeek;
            for (let week = currentWeek; week <= 20; week++) {
                // Only delete weeks that don't have completed workouts
                if (!hasCompletedWorkouts(week)) {
                    delete appData.workouts[week];
                }
            }

            // Reload current week with new auxiliary exercises only if not completed
            if (!hasCompletedWorkouts(currentWeek)) {
                appData.workouts[currentWeek] = getWeekData(currentWeek);
            }

            saveData();
            prepareCurrentDay();
            renderWorkout();
            showToast('Auxiliary exercises updated.', 'success', 4000);
        }

        function loadAuxiliarySettings() {
            if (appData.auxiliaryExercises) {
                document.getElementById('settings-squat-aux-1').value = appData.auxiliaryExercises['squat-aux-1'] || 'Leg Press';
                document.getElementById('settings-squat-aux-2').value = appData.auxiliaryExercises['squat-aux-2'] || 'Hack Squat';
                document.getElementById('settings-bench-aux-1').value = appData.auxiliaryExercises['bench-aux-1'] || 'Incline Press';
                document.getElementById('settings-bench-aux-2').value = appData.auxiliaryExercises['bench-aux-2'] || 'DB Bench';
                document.getElementById('settings-deadlift-aux').value = appData.auxiliaryExercises['deadlift-aux'] || 'Romanian Deadlift';
                document.getElementById('settings-ohp-aux').value = appData.auxiliaryExercises['ohp-aux'] || 'DB OHP';
            }

            // Load weight unit setting
            const unit = appData.weightUnit || 'kg';
            document.getElementById('weight-unit').value = unit;
            updateWeightUnitLabels();

            // Load plate calculator settings
            if (appData.plateCalculator) {
                document.getElementById('plate-calculator-enabled').checked = appData.plateCalculator.enabled !== false;
                updateBarbellWeightOptions();
                document.getElementById('barbell-weight').value = appData.plateCalculator.barbellWeight || (unit === 'kg' ? 20 : 45);
            }

            // Load rest timer settings
            if (!appData.restTimer) {
                appData.restTimer = {
                    enabled: true,
                    duration: 180,
                    autoStart: false
                };
            }
            document.getElementById('rest-timer-enabled').checked = appData.restTimer.enabled !== false;
            document.getElementById('rest-timer-duration').value = appData.restTimer.duration || 180;
            document.getElementById('rest-timer-autostart').checked = appData.restTimer.autoStart === true;

            // Load program settings
            document.getElementById('settings-program-type').value = appData.programType || 'strength';
            document.getElementById('settings-program-variant').value = appData.selectedProgram || '3x';
            updateSettingsProgramVariants();
        }

        function updateSettingsProgramVariants() {
            const programType = document.getElementById('settings-program-type').value;
            const programSelect = document.getElementById('settings-program-variant');
            const currentValue = programSelect.value;

            // Clear existing options
            programSelect.innerHTML = '';

            // Add standard options (2x-5x)
            ['2x', '3x', '4x', '5x'].forEach(variant => {
                const option = document.createElement('option');
                option.value = variant;
                option.textContent = `${variant} Frequency`;
                programSelect.appendChild(option);
            });

            // Add 6x option for hypertrophy only
            if (programType === 'hypertrophy') {
                const option = document.createElement('option');
                option.value = '6x';
                option.textContent = '6x Frequency';
                programSelect.appendChild(option);
            }

            // Restore previous selection if valid
            if (currentValue && (programType !== 'strength' || currentValue !== '6x')) {
                programSelect.value = currentValue;
            }
        }

        function setSettingsSection(sectionId) {
            const panels = document.querySelectorAll('.settings-panel');
            const buttons = document.querySelectorAll('.settings-nav-button');
            if (!panels.length || !buttons.length) return;

            panels.forEach(panel => {
                const isActive = panel.dataset.section === sectionId;
                panel.classList.toggle('active', isActive);
                panel.setAttribute('aria-hidden', isActive ? 'false' : 'true');
                panel.tabIndex = isActive ? 0 : -1;
            });

            buttons.forEach(button => {
                const isActive = button.dataset.section === sectionId;
                button.classList.toggle('active', isActive);
                button.setAttribute('aria-selected', isActive ? 'true' : 'false');
                button.setAttribute('tabindex', isActive ? '0' : '-1');
                if (isActive) {
                    button.scrollIntoView({ block: 'nearest', inline: 'nearest' });
                }
            });

            localStorage.setItem('sbs-settings-section', sectionId);
        }

        function initSettingsNavigation() {
            const buttons = document.querySelectorAll('.settings-nav-button');
            const panels = document.querySelectorAll('.settings-panel');
            if (!buttons.length || !panels.length) return;

            const orderedButtons = Array.from(buttons);
            const handleArrowKey = (event, index) => {
                let nextIndex = null;
                switch (event.key) {
                    case 'ArrowRight':
                    case 'ArrowDown':
                        nextIndex = (index + 1) % orderedButtons.length;
                        break;
                    case 'ArrowLeft':
                    case 'ArrowUp':
                        nextIndex = (index - 1 + orderedButtons.length) % orderedButtons.length;
                        break;
                    case 'Home':
                        nextIndex = 0;
                        break;
                    case 'End':
                        nextIndex = orderedButtons.length - 1;
                        break;
                    default:
                        return;
                }
                event.preventDefault();
                const nextButton = orderedButtons[nextIndex];
                nextButton.focus();
                setSettingsSection(nextButton.dataset.section);
            };

            orderedButtons.forEach((button, index) => {
                button.addEventListener('click', () => {
                    setSettingsSection(button.dataset.section);
                });
                button.addEventListener('keydown', (event) => handleArrowKey(event, index));
            });

            const stored = localStorage.getItem('sbs-settings-section');
            const fallback = buttons[0].dataset.section;
            const initial = stored && document.querySelector(`.settings-panel[data-section=\"${stored}\"]`)
                ? stored
                : fallback;
            setSettingsSection(initial);
        }

        function changeProgram() {
            const newProgramType = document.getElementById('settings-program-type').value;
            const newVariant = document.getElementById('settings-program-variant').value;
            const currentProgramType = appData.programType;
            const currentVariant = appData.selectedProgram;

            // Check if anything changed
            if (newProgramType === currentProgramType && newVariant === currentVariant) {
                showToast('No changes detected. You are already using this program.', 'info', 4000);
                return;
            }

            const confirmMsg = `Change program from ${currentProgramType} ${currentVariant} to ${newProgramType} ${newVariant}?\n\n` +
                `Your workout history will be preserved, but future weeks will use the new program structure.\n\n` +
                `Current week will be reset to use the new program.`;

            if (!confirm(confirmMsg)) {
                return;
            }

            // Update program type and variant
            appData.programType = newProgramType;
            appData.selectedProgram = newVariant;

            // Clear future weeks (preserve completed weeks)
            const currentWeek = appData.currentWeek;
            const maxWeek = getMaxWeek();
            for (let week = currentWeek; week <= maxWeek; week++) {
                if (!hasCompletedWorkouts(week)) {
                    delete appData.workouts[week];
                }
            }

            // Reload current week with new program
            if (!hasCompletedWorkouts(currentWeek)) {
                appData.workouts[currentWeek] = getWeekData(currentWeek);
            }

            saveData();
            updateWeekSelectors();
            prepareCurrentDay();
            renderWorkout();
            showToast(`Program changed to ${newProgramType} ${newVariant}.`, 'success', 5000);
        }

        function saveRestTimerSettings() {
            const enabled = document.getElementById('rest-timer-enabled').checked;
            const duration = parseInt(document.getElementById('rest-timer-duration').value);
            const autoStart = document.getElementById('rest-timer-autostart').checked;

            if (isNaN(duration) || duration < 30 || duration > 600) {
                showToast('Enter a duration between 30 and 600 seconds.', 'error', 5000);
                return;
            }

            appData.restTimer = {
                enabled,
                duration,
                autoStart
            };

            saveData();
            showToast('Rest timer settings saved.', 'success');
        }

        function jumpToWeek() {
            const weekNum = parseInt(document.getElementById('week-selector').value);
            appData.currentWeek = weekNum;
            appData.currentDay = 1; // Reset to day 1

            // Only generate new week data if it doesn't exist
            // Don't regenerate weeks with completed workouts to preserve actual exercises
            if (!appData.workouts[weekNum]) {
                appData.workouts[weekNum] = getWeekData(weekNum);
            }

            saveData();
            switchTab('workout');
            prepareCurrentDay();
            renderWorkout();
        }

        function loadHistoricalData() {
            if (!confirm('Load weeks 1-15 AMRAP history from Excel? This will overwrite any existing data for those weeks.')) {
                return;
            }

            // Load AMRAP history for weeks 1-15
            for (let week = 1; week <= 15; week++) {
                const weekStr = week.toString();

                // Load week data if not already loaded
                // Don't regenerate if the week already has completed workouts (preserves actual exercise names)
                if (!appData.workouts[week]) {
                    appData.workouts[week] = getWeekData(week);
                } else if (hasCompletedWorkouts(week)) {
                    // Week already has data - skip regeneration to preserve actual exercises
                    continue;
                }

                // Load AMRAP data if it exists
                if (AMRAP_HISTORY_DATA[weekStr]) {
                    const historyData = AMRAP_HISTORY_DATA[weekStr];

                    // Apply AMRAP data to each day
                    for (let day = 1; day <= getNumDays(); day++) {
                        const dayStr = day.toString();
                        if (historyData[dayStr] && appData.workouts[week][day]) {
                            const amrapValues = historyData[dayStr];

                            // Apply AMRAP values to exercises
                            amrapValues.forEach((amrapReps, exIdx) => {
                                if (appData.workouts[week][day][exIdx]) {
                                    appData.workouts[week][day][exIdx].amrapReps = amrapReps;
                                }
                            });
                        }
                    }
                }
            }

            saveData();
            showToast('Historical data loaded for weeks 1-15.', 'success', 5000);

            // If we're viewing a week with loaded history, refresh the view
            if (appData.currentWeek <= 15) {
                prepareCurrentDay();
                renderWorkout();
            }
        }

        function resetAll() {
            if (!confirm('Reset ALL data? This cannot be undone!')) {
                return;
            }
            localStorage.removeItem('sbs-tracker-v2');
            location.reload();
        }

        // Contact Form Handler
        async function handleContactFormSubmit(event) {
            event.preventDefault();

            const form = event.target;
            const submitBtn = document.getElementById('contact-submit-btn');
            const messageDiv = document.getElementById('contact-form-message');

            // Show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';
            messageDiv.style.display = 'none';
            messageDiv.classList.remove('success', 'error');

            try {
                const formData = new FormData(form);
                const response = await fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (result.success) {
                    // Show success message
                    messageDiv.textContent = 'Message sent successfully! We\'ll get back to you soon.';
                    messageDiv.classList.add('success');
                    messageDiv.style.display = 'block';

                    // Reset form
                    form.reset();
                } else {
                    throw new Error(result.message || 'Failed to send message');
                }
            } catch (error) {
                // Show error message
                messageDiv.textContent = 'Failed to send message. Please try again or email directly.';
                messageDiv.classList.add('error');
                messageDiv.style.display = 'block';
                console.error('Contact form error:', error);
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.textContent = 'Send Message';
            }
        }

        // Export & Import Functions
        function getDebugSnapshot() {
            return {
                meta: {
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    version: appData.version || 'unknown',
                    weightUnit: appData.weightUnit || 'kg'
                },
                appData: appData
            };
        }

        function copyDebugSnapshot() {
            const snapshot = JSON.stringify(getDebugSnapshot(), null, 2);
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(snapshot)
                    .then(() => showToast('Debug snapshot copied to clipboard.', 'success'))
                    .catch(() => showToast('Unable to copy debug snapshot.', 'error'));
            } else {
                showToast('Clipboard not available. Use Download Debug JSON.', 'info', 5000);
            }
        }

        function downloadDebugSnapshot() {
            const dataStr = JSON.stringify(getDebugSnapshot(), null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            const date = new Date().toISOString().split('T')[0];
            link.download = `sbs-tracker-debug-${date}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            showToast('Debug snapshot downloaded.', 'success');
        }

        function exportToJSON() {
            // Create a full backup of app data
            const dataStr = JSON.stringify(appData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });

            // Create download link
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;

            // Generate filename with date
            const date = new Date().toISOString().split('T')[0];
            const programType = appData.programType || 'strength';
            link.download = `sbs-tracker-backup-${programType}-week${appData.currentWeek}-${date}.json`;

            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);

            showToast('Backup exported successfully.', 'success');
        }

        function exportToCSV() {
            // Create CSV of workout history
            const weeks = Object.keys(appData.workouts).sort((a, b) => parseInt(a) - parseInt(b));

            if (weeks.length === 0) {
                showToast('No workout data to export.', 'info', 4000);
                return;
            }

            // CSV headers
            let csvContent = `Week,Day,Exercise,Weight (${getWeightUnit()}),Reps,Target,Sets,Last Set,Completed\n`;

            // Add workout data
            weeks.forEach(weekNum => {
                const weekData = appData.workouts[weekNum];
                Object.keys(weekData).forEach(dayNum => {
                    const dayExercises = weekData[dayNum];
                    dayExercises.forEach(exercise => {
                        const lastSetValue = getLastSetValue(exercise);
                        const lastSetCell = lastSetValue === undefined ? '' : lastSetValue;
                        const completed = isDayComplete(weekNum, parseInt(dayNum)) ? 'Yes' : 'No';

                        csvContent += `${weekNum},${dayNum},"${exercise.name}",${exercise.weight},${exercise.reps},${exercise.target},${exercise.sets},${lastSetCell},${completed}\n`;
                    });
                });
            });

            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;

            const date = new Date().toISOString().split('T')[0];
            const programType = appData.programType || 'strength';
            link.download = `sbs-tracker-history-${programType}-${date}.csv`;

            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);

            showToast('Workout history exported to CSV.', 'success');
        }

        function exportToHevyCSV() {
            const currentWeek = appData.currentWeek;
            const currentDay = appData.currentDay;

            ensureDayState(currentWeek, currentDay);

            const dayExercises = appData.workouts?.[currentWeek]?.[currentDay] || [];
            if (dayExercises.length === 0) {
                showToast('No workout data to export for the current day.', 'info', 4000);
                return;
            }

            const dateObj = new Date();
            const date = formatLocalDate(dateObj);
            const dateTime = `${date} 00:00:00`;
            const programTypeLabel = appData.programType === 'hypertrophy' ? 'Hypertrophy' : 'Strength';
            const programVariantLabel = appData.selectedProgram || '';
            const workoutName = `SBS ${programTypeLabel} ${programVariantLabel} - Week ${currentWeek} Day ${currentDay}`.trim();

            const headers = [
                'Date',
                'Workout Name',
                'Duration',
                'Exercise Name',
                'Set Order',
                'Weight',
                'Reps',
                'Distance',
                'Seconds',
                'Notes',
                'Workout Notes',
                'RPE'
            ];

            const rows = [headers.join(',')];
            const usesRIR = isRIRProgram();

            dayExercises.forEach(exercise => {
                const totalSets = Math.max(1, parseInt(exercise.sets || 0, 10));
                for (let setIndex = 1; setIndex <= totalSets; setIndex++) {
                    const lastSetValue = getLastSetValue(exercise);
                    const isLastSet = setIndex === totalSets;
                    const reps = (!usesRIR && isLastSet && lastSetValue !== undefined && lastSetValue !== null && lastSetValue !== '')
                        ? lastSetValue
                        : exercise.reps;
                    const notes = (usesRIR && isLastSet && lastSetValue !== undefined)
                        ? `RIR ${lastSetValue}`
                        : '';

                    const row = [
                        dateTime,
                        workoutName,
                        0,
                        exercise.name,
                        setIndex,
                        exercise.weight,
                        reps,
                        0,
                        0,
                        notes,
                        '',
                        ''
                    ];

                    rows.push(row.map(csvEscape).join(','));
                }
            });

            const csvContent = rows.join('\n');
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;

            link.download = `sbs-hevy-week${currentWeek}-day${currentDay}-${date}.csv`;

            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);

            showToast('Hevy CSV exported. Import using Hevy\'s Strong CSV option.', 'success', 6000);
        }

        function formatLocalDate(dateObj) {
            const year = dateObj.getFullYear();
            const month = String(dateObj.getMonth() + 1).padStart(2, '0');
            const day = String(dateObj.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function csvEscape(value) {
            if (value === null || value === undefined) {
                return '';
            }
            let str = String(value);
            if (str.includes('"')) {
                str = str.replace(/"/g, '""');
            }
            if (/[",\n]/.test(str)) {
                return `"${str}"`;
            }
            return str;
        }

        function saveHevySettings() {
            const apiKeyInput = document.getElementById('hevy-api-key');
            const durationInput = document.getElementById('hevy-duration');
            const privacySelect = document.getElementById('hevy-privacy');
            const overridesInput = document.getElementById('hevy-name-overrides');

            if (apiKeyInput) {
                hevyState.apiKey = apiKeyInput.value.trim();
            }

            if (durationInput) {
                const duration = parseInt(durationInput.value, 10);
                hevyState.defaultDurationMinutes = Number.isFinite(duration) ? Math.max(0, duration) : 60;
            }

            if (privacySelect) {
                hevyState.isPrivate = privacySelect.value === 'private';
            }

            if (overridesInput) {
                const raw = overridesInput.value.trim();
                if (!raw) {
                    hevyState.nameOverrides = {};
                } else {
                    try {
                        const parsed = JSON.parse(raw);
                        hevyState.nameOverrides = parsed && typeof parsed === 'object' ? parsed : {};
                    } catch (error) {
                        showToast('Invalid JSON in exercise name overrides.', 'error', 5000);
                        return;
                    }
                }
            }

            saveHevyState();
            updateHevySettingsUI();
            showToast('Hevy settings saved.', 'success');
        }

        async function hevyApiRequest(path, options = {}) {
            if (!hevyState.apiKey) {
                showToast('Add your Hevy API key first.', 'error', 5000);
                throw new Error('Missing Hevy API key');
            }

            const headers = {
                'api-key': hevyState.apiKey,
                ...(options.headers || {})
            };

            if (options.body && !headers['Content-Type']) {
                headers['Content-Type'] = 'application/json';
            }

            const response = await fetch(`${HEVY_API_BASE}${path}`, {
                ...options,
                headers
            });

            if (!response.ok) {
                const errorText = await response.text().catch(() => '');
                throw new Error(`Hevy API error ${response.status}: ${errorText || response.statusText}`);
            }

            const contentType = response.headers.get('content-type') || '';
            if (contentType.includes('application/json')) {
                return response.json();
            }
            return response.text();
        }

        function normalizeHevyName(name) {
            return String(name || '').trim().toLowerCase();
        }

        function normalizeHevyLoose(name) {
            return normalizeHevyName(name).replace(/[^a-z0-9]+/g, ' ').trim();
        }

        async function syncHevyExerciseTemplates() {
            try {
                showToast('Syncing Hevy templates...', 'info', 3000);

                const pageSize = 100;
                let page = 1;
                let templates = [];
                let totalPages = null;

                while (true) {
                    const data = await hevyApiRequest(`/v1/exercise_templates?page=${page}&page_size=${pageSize}`);
                    const items = data?.results || data?.items || data?.exercise_templates || data?.data || data;
                    if (!Array.isArray(items)) {
                        throw new Error('Unexpected template response shape.');
                    }

                    templates = templates.concat(items);

                    if (data?.total_pages) {
                        totalPages = data.total_pages;
                        if (page >= totalPages) break;
                    } else if (items.length < pageSize) {
                        break;
                    }

                    page += 1;
                }

                const templatesByName = {};
                templates.forEach(template => {
                    const name = template.title || template.name || template.exercise_name;
                    const id = template.id || template.exercise_template_id;
                    if (!name || !id) return;
                    const normalized = normalizeHevyName(name);
                    const normalizedLoose = normalizeHevyLoose(name);
                    templatesByName[normalized] = id;
                    if (normalizedLoose && !templatesByName[normalizedLoose]) {
                        templatesByName[normalizedLoose] = id;
                    }
                });

                hevyState.templatesByName = templatesByName;
                hevyState.templatesLastSync = new Date().toISOString();
                saveHevyState();
                updateHevySettingsUI();

                showToast(`Synced ${Object.keys(templatesByName).length} Hevy templates.`, 'success', 5000);
            } catch (error) {
                console.error('Hevy template sync failed:', error);
                const message = String(error?.message || error);
                if (message.toLowerCase().includes('failed to fetch')) {
                    showToast('Failed to reach Hevy API. CORS may block direct calls; a proxy may be required.', 'error', 7000);
                } else {
                    showToast(`Hevy sync failed: ${message}`, 'error', 7000);
                }
            }
        }

        function resolveHevyTemplateId(exerciseName) {
            const overrides = hevyState.nameOverrides || {};
            const normalizedKey = normalizeHevyName(exerciseName);
            const overrideName =
                overrides[exerciseName] ||
                overrides[exerciseName.trim?.() || ''] ||
                overrides[normalizedKey] ||
                exerciseName;
            const normalized = normalizeHevyName(overrideName);
            const normalizedLoose = normalizeHevyLoose(overrideName);
            const templatesByName = hevyState.templatesByName || {};

            if (templatesByName[normalized]) {
                return templatesByName[normalized];
            }
            if (normalizedLoose && templatesByName[normalizedLoose]) {
                return templatesByName[normalizedLoose];
            }

            const fallbackCandidates = {
                'deadlift': ['Barbell Deadlift', 'Conventional Deadlift', 'Deadlift (Barbell)'],
                'squat': ['Barbell Squat', 'Barbell Back Squat', 'Back Squat', 'Low Bar Back Squat', 'High Bar Back Squat', 'Squat (Barbell)'],
                'bench press': ['Barbell Bench Press', 'Bench Press (Barbell)', 'Flat Barbell Bench Press'],
                'ohp': ['Overhead Press', 'Standing Overhead Press', 'Barbell Overhead Press', 'OHP'],
                'hack squat': ['Hack Squat', 'Hack Squat Machine', 'Hack Squat (Machine)', 'Machine Hack Squat'],
                'leg press': ['Leg Press', '45 Degree Leg Press', 'Horizontal Leg Press', 'Leg Press (Machine)'],
                'block pulls': ['Block Pull', 'Block Pulls', 'Block Pull (Barbell)', 'Deadlift (Block Pull)'],
                'romanian deadlift': ['Romanian Deadlift', 'RDL', 'Barbell Romanian Deadlift'],
                'incline press': [
                    'Incline Bench Press',
                    'Incline Barbell Bench Press',
                    'Incline Press (Barbell)',
                    'Incline Dumbbell Press',
                    'Incline Dumbbell Bench Press',
                    'Incline Bench Press (Dumbbell)',
                    'Incline Bench Press Dumbbell',
                    'Dumbbell Incline Bench Press',
                    'Dumbbell Incline Press',
                    'DB Incline Press',
                    'Incline DB Press'
                ],
                'db bench': ['Dumbbell Bench Press', 'Dumbbell Bench', 'DB Bench Press', 'DB Bench'],
                'db ohp': ['Dumbbell Overhead Press', 'Dumbbell Shoulder Press', 'DB Shoulder Press', 'DB OHP']
            };

            const candidates = [overrideName];
            if (fallbackCandidates[normalized]) {
                candidates.push(...fallbackCandidates[normalized]);
            }
            if (fallbackCandidates[normalizedLoose]) {
                candidates.push(...fallbackCandidates[normalizedLoose]);
            }

            for (const candidate of candidates) {
                const candidateKey = normalizeHevyName(candidate);
                if (templatesByName[candidateKey]) {
                    return templatesByName[candidateKey];
                }
                const candidateLoose = normalizeHevyLoose(candidate);
                if (candidateLoose && templatesByName[candidateLoose]) {
                    return templatesByName[candidateLoose];
                }
            }

            const normalizedEntries = Object.entries(templatesByName);
            const matches = normalizedEntries.filter(([name]) =>
                name.includes(normalized) || (normalizedLoose && name.includes(normalizedLoose))
            );
            if (matches.length) {
                const preferred = matches.find(([name]) =>
                    name === normalized ||
                    name.endsWith(` ${normalized}`) ||
                    name.startsWith(`${normalized} `) ||
                    (normalizedLoose && (name === normalizedLoose || name.endsWith(` ${normalizedLoose}`) || name.startsWith(`${normalizedLoose} `)))
                );
                if (preferred) {
                    return preferred[1];
                }

                matches.sort((a, b) => a[0].length - b[0].length);
                return matches[0][1];
            }

            return undefined;
        }

        function convertWeightToKg(weight) {
            if (weight === null || weight === undefined) return 0;
            const unit = getWeightUnit();
            const numeric = Number(weight);
            if (!Number.isFinite(numeric)) return 0;
            if (unit === 'lbs') {
                return Math.round(lbsToKg(numeric) * 100) / 100;
            }
            return Math.round(numeric * 100) / 100;
        }

        function buildHevyWorkoutPayload() {
            const currentWeek = appData.currentWeek;
            const currentDay = appData.currentDay;

            ensureDayState(currentWeek, currentDay);
            const dayExercises = appData.workouts?.[currentWeek]?.[currentDay] || [];

            if (dayExercises.length === 0) {
                throw new Error('No exercises for the current day.');
            }

            const now = new Date();
            const durationMinutes = Math.max(0, parseInt(hevyState.defaultDurationMinutes || 0, 10));
            const endTime = new Date(now.getTime() + durationMinutes * 60 * 1000);

            const programTypeLabel = appData.programType === 'hypertrophy' ? 'Hypertrophy' : 'Strength';
            const programVariantLabel = appData.selectedProgram || '';
            const workoutName = `SBS ${programTypeLabel} ${programVariantLabel} - Week ${currentWeek} Day ${currentDay}`.trim();
            const usesRIR = isRIRProgram();

            const exercises = dayExercises.map(exercise => {
                const templateId = resolveHevyTemplateId(exercise.name);
                if (!templateId) {
                    throw new Error(`Missing Hevy template for "${exercise.name}". Add an override in Settings → Hevy Sync or sync templates again.`);
                }

                const totalSets = Math.max(1, parseInt(exercise.sets || 0, 10));
                const sets = [];
                const lastSetValue = getLastSetValue(exercise);
                const lastSetNote = (usesRIR && lastSetValue !== undefined)
                    ? `Last set RIR: ${lastSetValue}`
                    : '';

                for (let setIndex = 1; setIndex <= totalSets; setIndex++) {
                    const isLastSet = setIndex === totalSets;
                    const reps = (!usesRIR && isLastSet && lastSetValue !== undefined && lastSetValue !== null && lastSetValue !== '')
                        ? Number(lastSetValue)
                        : Number(exercise.reps);

                    sets.push({
                        type: 'normal',
                        weight_kg: convertWeightToKg(exercise.weight),
                        reps: Number.isFinite(reps) ? reps : 0,
                        distance_meters: 0,
                        duration_seconds: 0
                    });
                }

                return {
                    exercise_template_id: templateId,
                    superset_id: null,
                    notes: lastSetNote,
                    sets
                };
            });

            return {
                title: workoutName,
                description: 'Generated by SBS Workout Tracker',
                start_time: now.toISOString(),
                end_time: endTime.toISOString(),
                is_private: hevyState.isPrivate,
                exercises
            };
        }

        async function sendCurrentDayToHevy() {
            try {
                if (!hevyState.apiKey) {
                    showToast('Add your Hevy API key first.', 'error', 5000);
                    return;
                }

                if (!hevyState.templatesByName || Object.keys(hevyState.templatesByName).length === 0) {
                    await syncHevyExerciseTemplates();
                }

                let payload;
                try {
                    payload = buildHevyWorkoutPayload();
                } catch (error) {
                    const message = String(error?.message || error);
                    if (message.toLowerCase().includes('missing hevy template')) {
                        await syncHevyExerciseTemplates();
                        payload = buildHevyWorkoutPayload();
                    } else {
                        throw error;
                    }
                }
                await hevyApiRequest('/v1/workouts', {
                    method: 'POST',
                    body: JSON.stringify(payload)
                });

                showToast('Workout sent to Hevy.', 'success', 5000);
            } catch (error) {
                console.error('Hevy send failed:', error);
                const message = String(error?.message || error);
                if (message.toLowerCase().includes('failed to fetch')) {
                    showToast('Failed to reach Hevy API. CORS may block direct calls; a proxy may be required.', 'error', 7000);
                } else {
                    showToast(`Hevy export failed: ${message}`, 'error', 7000);
                }
            }
        }

        function importFromJSON() {
            const fileInput = document.getElementById('import-file');
            const file = fileInput.files[0];

            if (!file) {
                showToast('Please select a JSON file to import.', 'error', 4000);
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);

                    // Validate required fields
                    if (!importedData.selectedProgram || !importedData.currentWeek) {
                        throw new Error('Invalid backup file format');
                    }

                    // Confirm import
                    const confirmMsg = `Import backup data?\n\n` +
                        `Program: ${importedData.programType || 'strength'} ${importedData.selectedProgram}\n` +
                        `Current Week: ${importedData.currentWeek}\n` +
                        `Workouts: ${Object.keys(importedData.workouts || {}).length} weeks\n\n` +
                        `This will replace ALL current data!`;

                    if (!confirm(confirmMsg)) {
                        return;
                    }

                    // Import data
                    appData = {...appData, ...migrateData(importedData)};
                    normalizeAuxiliaryExercises();
                    saveData();

                    // Update UI
                    updateWeekSelectors();
                    prepareCurrentDay();
                    renderWorkout();

                    // Update settings inputs
                    document.getElementById('1rm-squat').value = appData.oneRepMaxes.squat;
                    document.getElementById('1rm-bench').value = appData.oneRepMaxes.bench;
                    document.getElementById('1rm-deadlift').value = appData.oneRepMaxes.deadlift;
                    document.getElementById('1rm-ohp').value = appData.oneRepMaxes.ohp;
                    document.getElementById('week-selector').value = appData.currentWeek;
                    loadAuxiliarySettings();

                    showToast('Backup imported successfully.', 'success', 5000);

                    // Clear file input
                    fileInput.value = '';

                } catch (error) {
                    showToast('Error importing backup. Please check the file and try again.', 'error', 6000);
                    console.error('Import error:', error);
                }
            };

            reader.readAsText(file);
        }

        // Plate Calculator Functions
        function calculatePlates(weight) {
            if (!appData.plateCalculator.enabled) {
                return null;
            }

            const barbellWeight = appData.plateCalculator.barbellWeight;
            const availablePlates = appData.plateCalculator.availablePlates;
            const unit = appData.weightUnit || 'kg';

            // Weight per side (subtract barbell, divide by 2)
            let weightPerSide = (weight - barbellWeight) / 2;

            // Handle edge cases
            if (weightPerSide < 0) {
                return { plates: [], perSide: 0, error: 'Weight less than barbell' };
            }

            if (weightPerSide === 0) {
                return { plates: [], perSide: 0, error: null };
            }

            // Calculate plates using greedy algorithm
            const plates = [];
            let remaining = weightPerSide;

            for (const plate of availablePlates) {
                while (remaining >= plate - 0.01) { // Allow small float tolerance
                    plates.push(plate);
                    remaining -= plate;
                }
            }

            // Check if we have remainder (can't load exact weight)
            const remainder = remaining > 0.1 ? remaining : 0;

            return {
                plates: plates,
                perSide: weightPerSide,
                remainder: remainder,
                error: remainder > 0.1 ? `Closest: ${(weight - remainder * 2).toFixed(1)} ${unit}` : null
            };
        }

        function renderSetCircles(ex, day, idx) {
            const hasLastSetMetric = !!ex.target;
            const clickableSets = hasLastSetMetric ? ex.sets - 1 : ex.sets;
            const completedSets = ex.completedSets || [];
            let html = '<div class="set-circles">';
            for (let i = 0; i < clickableSets; i++) {
                const done = completedSets[i] === true;
                html += `<button class="set-circle ${done ? 'completed' : ''}" onclick="toggleSetComplete(${day}, ${idx}, ${i})" data-set="${day}-${idx}-${i}">${ex.reps}</button>`;
            }
            if (hasLastSetMetric) {
                const lastSetValue = getLastSetValue(ex);
                const hasVal = lastSetValue !== undefined && lastSetValue > 0;
                const label = isRIRProgram() ? 'RIR' : 'AMRAP';
                html += `<button class="set-circle amrap-circle ${hasVal ? 'has-value' : ''}" data-set="${day}-${idx}-amrap" data-label="${label}">
                    <span class="amrap-value">${hasVal ? lastSetValue : '?'}</span>
                </button>`;
            }
            html += '</div>';
            return html;
        }

        function renderPlateDisplay(weight) {
            const result = calculatePlates(weight);

            if (!result) {
                return '';
            }

            if (result.error === 'Weight less than barbell') {
                return '<div class="note note-warning">⚠️ Weight less than barbell</div>';
            }

            const barbellWeight = appData.plateCalculator.barbellWeight;
            const unit = appData.weightUnit || 'kg';

            // Calculate summary text + chips
            let summaryText = '';
            let chipsHtml = '';
            if (result.plates.length === 0) {
                summaryText = `Empty bar (${barbellWeight} ${unit})`;
                chipsHtml = `<div class="plate-empty">${summaryText}</div>`;
            } else {
                const plateCounts = {};
                result.plates.forEach(plate => {
                    plateCounts[plate] = (plateCounts[plate] || 0) + 1;
                });
                const summaryParts = [];
                const chipParts = [];
                Object.keys(plateCounts).sort((a, b) => parseFloat(b) - parseFloat(a)).forEach(plate => {
                    summaryParts.push(`${plateCounts[plate]}×${plate}${unit}`);
                    chipParts.push(`<div class="plate-chip">${plateCounts[plate]}×${plate}${unit}</div>`);
                });
                summaryText = summaryParts.join(', ');
                chipsHtml = `<div class="plate-chips">${chipParts.join('')}</div>`;
            }

            const perSideText = result.perSide % 1 === 0
                ? result.perSide.toString()
                : result.perSide.toFixed(2).replace(/\.?0+$/, '');

            let html = `
                <div class="plate-calculator">
                    <div class="plate-calculator-header">
                        <div class="plate-summary-label">Plates per side</div>
                        <div class="plate-total">Total: ${weight} ${unit}</div>
                    </div>
                    ${chipsHtml}
                    <div class="plate-info">
                        <div>
                            <div class="plate-info-label">Bar</div>
                            <div class="plate-info-value">${barbellWeight} ${unit}</div>
                        </div>
                        <div>
                            <div class="plate-info-label">Per side</div>
                            <div class="plate-info-value">${perSideText} ${unit}</div>
                        </div>
                    </div>
                </div>`;

            if (result.remainder) {
                html += `<div class="note note-warning note-compact">
                    ⚠️ ${result.error}
                </div>`;
            }

            return html;
        }

        function updateWeightUnitLabels() {
            const unit = appData.weightUnit || 'kg';
            const unitText = unit === 'kg' ? 'kg' : 'lbs';
            const step = unit === 'kg' ? '2.5' : '5';

            // Update 1RM labels in settings
            document.getElementById('label-squat-1rm').textContent = `Squat 1RM (${unitText})`;
            document.getElementById('label-bench-1rm').textContent = `Bench Press 1RM (${unitText})`;
            document.getElementById('label-deadlift-1rm').textContent = `Deadlift 1RM (${unitText})`;
            document.getElementById('label-ohp-1rm').textContent = `OHP 1RM (${unitText})`;

            // Update step values
            document.getElementById('1rm-squat').step = step;
            document.getElementById('1rm-bench').step = step;
            document.getElementById('1rm-deadlift').step = step;
            document.getElementById('1rm-ohp').step = step;

            // Update quick setup labels
            if (document.getElementById('setup-1rm-header')) {
                document.getElementById('setup-1rm-header').textContent = `Enter your 1RM maxes (${unitText})`;
            }
            if (document.getElementById('setup-squat')) {
                document.getElementById('setup-squat').step = step;
                document.getElementById('setup-bench').step = step;
                document.getElementById('setup-deadlift').step = step;
                document.getElementById('setup-ohp').step = step;
            }

            // Update barbell weight label
            document.getElementById('label-barbell-weight').textContent = `Barbell Weight (${unitText})`;
        }

        function convertAllWeights(conversionFactor, roundTo) {
            Object.keys(appData.workouts || {}).forEach(weekNum => {
                const weekData = appData.workouts[weekNum];
                Object.keys(weekData || {}).forEach(dayNum => {
                    weekData[dayNum].forEach(ex => {
                        if (typeof ex.weight === 'number') {
                            ex.weight = Math.round((ex.weight * conversionFactor) / roundTo) * roundTo;
                        }
                    });
                });
            });

            if (appData.personalRecords) {
                Object.keys(appData.personalRecords).forEach(name => {
                    const pr = appData.personalRecords[name];
                    if (typeof pr.weight === 'number') {
                        pr.weight = Math.round((pr.weight * conversionFactor) / roundTo) * roundTo;
                    }
                    if (typeof pr.estimated1RM === 'number') {
                        pr.estimated1RM = Math.round((pr.estimated1RM * conversionFactor) / roundTo) * roundTo;
                    }
                });
            }
        }

        function updateWeightUnit() {
            const newUnit = document.getElementById('weight-unit').value;
            const oldUnit = appData.weightUnit || 'kg';

            if (newUnit !== oldUnit) {
                // Convert all weights
                const conversionFactor = newUnit === 'lbs' ? KG_TO_LBS : LBS_TO_KG;
                const roundTo = newUnit === 'lbs' ? 0.5 : 0.25;

                // Convert 1RMs
                appData.oneRepMaxes.squat = Math.round((appData.oneRepMaxes.squat * conversionFactor) / roundTo) * roundTo;
                appData.oneRepMaxes.bench = Math.round((appData.oneRepMaxes.bench * conversionFactor) / roundTo) * roundTo;
                appData.oneRepMaxes.deadlift = Math.round((appData.oneRepMaxes.deadlift * conversionFactor) / roundTo) * roundTo;
                appData.oneRepMaxes.ohp = Math.round((appData.oneRepMaxes.ohp * conversionFactor) / roundTo) * roundTo;

                // Update 1RM inputs
                document.getElementById('1rm-squat').value = appData.oneRepMaxes.squat;
                document.getElementById('1rm-bench').value = appData.oneRepMaxes.bench;
                document.getElementById('1rm-deadlift').value = appData.oneRepMaxes.deadlift;
                document.getElementById('1rm-ohp').value = appData.oneRepMaxes.ohp;

                // Convert stored workout and PR weights
                convertAllWeights(conversionFactor, roundTo);

                // Convert plate calculator barbell weight
                appData.plateCalculator.barbellWeight = Math.round((appData.plateCalculator.barbellWeight * conversionFactor) / roundTo) * roundTo;

                // Update available plates based on unit
                if (newUnit === 'kg') {
                    appData.plateCalculator.availablePlates = [20, 15, 10, 5, 2.5, 1.25];
                } else {
                    appData.plateCalculator.availablePlates = [45, 35, 25, 10, 5, 2.5];
                }

                appData.weightUnit = newUnit;
                updateWeightUnitLabels();
                updateBarbellWeightOptions();
                document.getElementById('barbell-weight').value = appData.plateCalculator.barbellWeight;

                saveData();
                prepareCurrentDay();
                renderWorkout();

                showToast(`Weight unit changed to ${newUnit}. All weights converted.`, 'success', 5000);
            }
        }

        function updateBarbellWeightOptions() {
            const unit = appData.weightUnit || 'kg';
            const barbellWeightSelect = document.getElementById('barbell-weight');

            if (unit === 'kg') {
                barbellWeightSelect.innerHTML = `
                    <option value="20">20kg (Standard Olympic)</option>
                    <option value="15">15kg (Women's Olympic)</option>
                    <option value="10">10kg (Training Bar)</option>
                    <option value="0">0kg (Dumbbells/Machines)</option>
                `;
            } else {
                barbellWeightSelect.innerHTML = `
                    <option value="45">45lbs (Standard Olympic)</option>
                    <option value="35">35lbs (Women's Olympic)</option>
                    <option value="15">15lbs (Training Bar)</option>
                    <option value="0">0lbs (Dumbbells/Machines)</option>
                `;
            }
        }

        function savePlateSettings() {
            const enabled = document.getElementById('plate-calculator-enabled').checked;
            const barbellWeight = parseFloat(document.getElementById('barbell-weight').value);

            appData.plateCalculator.enabled = enabled;
            appData.plateCalculator.barbellWeight = barbellWeight;

            saveData();
            prepareCurrentDay();
            renderWorkout();

            showToast('Plate calculator settings saved.', 'success');
        }

        function togglePlateCalculator() {
            appData.plateCalculator.enabled = document.getElementById('plate-calculator-enabled').checked;
            saveData();
            prepareCurrentDay();
            renderWorkout();
        }

        function renderHistory() {
            const container = document.getElementById('history-container');
            const allWeeks = Object.keys(appData.workouts).sort((a, b) => b - a);
            const usesRIR = isRIRProgram();

            // Filter to only show weeks with completed workouts
            const completedWeeks = allWeeks.filter(weekNum => hasCompletedWorkouts(weekNum));

            if (completedWeeks.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">📜</div>
                        <h3 class="empty-state-title">No Workout History Yet</h3>
                        <p class="empty-state-description">
                            Complete your first workout day to start building your workout history and track your progress over time!
                        </p>
                    </div>
                `;
                return;
            }

            const numDays = getNumDays();

            container.innerHTML = completedWeeks.map(weekNum => {
                const weekData = appData.workouts[weekNum];

                // Get only the days that are marked complete (or have AMRAP data)
                const completedDays = [];
                for (let day = 1; day <= numDays; day++) {
                    if (weekData[day] && isDayComplete(weekNum, day)) {
                        completedDays.push(day);
                    }
                }

                // Only show weeks that have at least one completed day
                if (completedDays.length === 0) return '';

                return `
                    <div class="history-week">
                        <h3>Week ${weekNum}</h3>
                        ${completedDays.map(day => `
                            <div class="history-day">
                                <strong>Day ${day}</strong>
                                ${weekData[day].map(ex => `
                                    <div class="history-exercise">
                                        ${ex.name}: ${ex.weight} ${getWeightUnit()} × ${ex.reps} reps × ${ex.sets} sets
                                        ${getLastSetValue(ex) !== undefined
                                            ? `<span class="completed-badge">${usesRIR ? 'RIR' : 'AMRAP'}: ${getLastSetValue(ex)}</span>`
                                            : (ex.target ? `<span class="completed-badge muted">${usesRIR ? 'RIR' : 'AMRAP'} missing</span>` : '')}
                                    </div>
                                `).join('')}
                            </div>
                        `).join('')}
                    </div>
                `;
            }).join('');
        }

        // Helper: Create progress ring SVG
        function createProgressRing(percentage, gradient, size = 120, strokeWidth = 8) {
            const radius = (size - strokeWidth) / 2;
            const circumference = radius * 2 * Math.PI;
            const offset = circumference - (percentage / 100) * circumference;

            return `
                <div class="progress-ring-container" style="width: ${size}px; height: ${size}px;">
                    <svg class="progress-ring" width="${size}" height="${size}">
                        <circle class="progress-ring-bg" cx="${size/2}" cy="${size/2}" r="${radius}"></circle>
                        <circle
                            class="progress-ring-fill"
                            cx="${size/2}"
                            cy="${size/2}"
                            r="${radius}"
                            stroke="url(#${gradient})"
                            stroke-dasharray="${circumference}"
                            stroke-dashoffset="${offset}"
                        ></circle>
                        <defs>
                            <linearGradient id="gradient-success" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00B894;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#00cec9;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="gradient-bench" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#4FACFE;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#00F2FE;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="gradient-squat" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#FF8E53;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="progress-ring-text">
                        <div class="progress-ring-value">${Math.round(percentage)}%</div>
                    </div>
                </div>
            `;
        }

        function renderProgress() {
            const container = document.getElementById('progress-container');
            const weeks = Object.keys(appData.workouts).sort((a, b) => parseInt(a) - parseInt(b));

            if (weeks.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="7" y1="17" x2="7" y2="13"/><line x1="12" y1="17" x2="12" y2="9"/><line x1="17" y1="17" x2="17" y2="5"/>
                            </svg>
                        </div>
                        <h3 class="empty-state-title">No Progress Data Yet</h3>
                        <p class="empty-state-description">Complete some workouts to see your progress, stats, and personal records here!</p>
                    </div>
                `;
                return;
            }

            // Calculate statistics
            const stats = calculateProgressStats();

            // Calculate program completion percentage
            const maxWeeks = appData.programType === 'hypertrophy' ? 21 : 20;
            const completionPercentage = (stats.weeksCompleted / maxWeeks) * 100;

            container.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-card with-ring">
                        ${createProgressRing(completionPercentage, 'gradient-primary', 100, 6)}
                        <div class="stat-label">Program Complete</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${stats.totalVolume.toLocaleString()}</div>
                        <div class="stat-label">Total Volume (${getWeightUnit()})</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${stats.workoutsCompleted}</div>
                        <div class="stat-label">Workouts Done</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${stats.avgVolumePerWeek.toLocaleString()}</div>
                        <div class="stat-label">Avg Volume/Week</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Total Volume by Week</div>
                    <div class="chart-canvas">
                        <div class="bar-chart">
                            ${stats.weeklyVolume.map(wv => {
                                const maxVol = Math.max(...stats.weeklyVolume.map(v => v.volume));
                                const height = (wv.volume / maxVol) * 100;
                                return `
                                    <div class="bar" style="height: ${height}%">
                                        <div class="bar-value">${(wv.volume / 1000).toFixed(1)}k</div>
                                        <div class="bar-label">W${wv.week}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>

                <div class="progress-section">
                    <h3>Estimated 1RM Progress</h3>
                    ${renderEstimated1RMs(stats)}
                </div>

                <div class="progress-section">
                    <h3>Performance by Lift</h3>
                    ${renderLiftBreakdown(stats)}
                </div>

                <div class="progress-section">
                    <h3>🏆 Personal Records</h3>
                    ${renderPersonalRecords()}
                </div>
            `;
        }

        function calculateProgressStats() {
            const weeks = Object.keys(appData.workouts).sort((a, b) => parseInt(a) - parseInt(b));
            let totalVolume = 0;
            let workoutsCompleted = 0;
            let weeksCompleted = 0;
            const weeklyVolume = [];
            const liftData = {};
            const numDays = getNumDays();

            weeks.forEach(weekNum => {
                const weekData = appData.workouts[weekNum];
                let weekVolume = 0;
                let weekComplete = true;
                let hasDayData = false;

                for (let day = 1; day <= numDays; day++) {
                    if (weekData[day]) {
                        hasDayData = true;
                        const dayComplete = isDayComplete(weekNum, day);
                        if (!dayComplete) weekComplete = false;
                        weekData[day].forEach(ex => {
                            // Calculate volume for this exercise
                            const volume = ex.weight * ex.reps * ex.sets;
                            weekVolume += volume;
                            totalVolume += volume;

                            // Track lift data for progress tracking
                            if (!liftData[ex.name]) {
                                liftData[ex.name] = [];
                            }
                            liftData[ex.name].push({
                                week: weekNum,
                                weight: ex.weight,
                                reps: ex.reps,
                                amrapReps: ex.amrapReps,
                                lastSetValue: getLastSetValue(ex),
                                target: ex.target,
                                sets: ex.sets
                            });

                        });
                        if (dayComplete) workoutsCompleted++;
                    }
                }

                weeklyVolume.push({ week: weekNum, volume: weekVolume });
                if (weekComplete && hasDayData) {
                    weeksCompleted++;
                }
            });

            const avgVolumePerWeek = weeks.length > 0 ? Math.round(totalVolume / weeks.length) : 0;

            return {
                totalVolume: Math.round(totalVolume),
                workoutsCompleted,
                weeksCompleted,
                avgVolumePerWeek,
                weeklyVolume,
                liftData
            };
        }

        function renderEstimated1RMs(stats) {
            if (isRIRProgram()) {
                return '<p class="empty-state-note">Estimated 1RM tracking is disabled for RIR-based strength templates.</p>';
            }
            const mainLifts = ['Squat', 'Bench Press', 'Deadlift', 'OHP'];
            let html = '';

            mainLifts.forEach(liftName => {
                const liftHistory = stats.liftData[liftName];
                if (!liftHistory || liftHistory.length === 0) return;

                // Get first and last recorded weights
                const firstEntry = liftHistory[0];
                const lastEntry = liftHistory[liftHistory.length - 1];

                // Estimate 1RM using Epley formula: weight × (1 + reps/30)
                const getEstimated1RM = (entry) => {
                    const reps = entry.amrapReps !== undefined ? entry.amrapReps : entry.reps;
                    return entry.weight * (1 + reps / 30);
                };

                const first1RM = getEstimated1RM(firstEntry);
                const last1RM = getEstimated1RM(lastEntry);
                const change = last1RM - first1RM;
                const changePercent = ((change / first1RM) * 100).toFixed(1);

                html += `
                    <div class="lift-progress">
                        <div class="lift-name">${liftName}</div>
                        <div class="lift-stats">
                            <span>Est. 1RM: ${last1RM.toFixed(1)} ${getWeightUnit()}</span>
                            <span class="lift-change ${change >= 0 ? 'positive' : 'negative'}">
                                ${change >= 0 ? '+' : ''}${change.toFixed(1)} ${getWeightUnit()} (${changePercent >= 0 ? '+' : ''}${changePercent}%)
                            </span>
                        </div>
                    </div>
                `;
            });

            return html || '<p class="empty-state-note">Complete AMRAP sets to track estimated 1RM progress</p>';
        }

        function renderLiftBreakdown(stats) {
            const lifts = Object.keys(stats.liftData);
            if (lifts.length === 0) return '<p class="empty-state-note">No lift data available</p>';

            let html = '';
            lifts.forEach(liftName => {
                const history = stats.liftData[liftName];
                const totalVolume = history.reduce((sum, entry) => sum + (entry.weight * entry.reps * (entry.sets || 5)), 0);
                const avgWeight = history.reduce((sum, entry) => sum + entry.weight, 0) / history.length;
                const completedLastSetValues = history.filter(e => e.lastSetValue !== undefined).length;

                html += `
                    <div class="lift-progress">
                        <div class="lift-name">${liftName}</div>
                        <div class="lift-stats">
                            <span>Avg: ${avgWeight.toFixed(1)} ${getWeightUnit()}</span>
                            <span>Volume: ${(totalVolume / 1000).toFixed(1)}k ${getWeightUnit()}</span>
                            <span>${isRIRProgram() ? 'RIRs' : 'AMRAPs'}: ${completedLastSetValues}</span>
                        </div>
                    </div>
                `;
            });

            return html;
        }

        function renderPersonalRecords() {
            if (isRIRProgram()) {
                return '<p class="empty-state-note">Personal records are tracked for AMRAP-based programs only.</p>';
            }
            // Initialize personalRecords if it doesn't exist (for backward compatibility)
            if (!appData.personalRecords) {
                appData.personalRecords = {};
            }

            const prs = Object.keys(appData.personalRecords);
            if (prs.length === 0) {
                return '<p class="empty-state-note">Complete AMRAP sets to start tracking your personal records!</p>';
            }

            // Sort PRs by estimated 1RM descending
            const sortedPRs = prs.map(exerciseName => ({
                name: exerciseName,
                ...appData.personalRecords[exerciseName]
            })).sort((a, b) => b.estimated1RM - a.estimated1RM);

            let html = '<div class="pr-list">';
            sortedPRs.forEach(pr => {
                const date = new Date(pr.date);
                const formattedDate = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

                html += `
                    <div class="pr-card">
                        <div class="pr-card-header">
                            <div>
                                <div class="pr-card-title">${pr.name}</div>
                                <div class="pr-card-meta">
                                    ${pr.weight} ${getWeightUnit()} × ${pr.reps} reps
                                    <span>e1RM: ${Math.round(pr.estimated1RM)} ${getWeightUnit()}</span>
                                </div>
                            </div>
                            <div class="pr-card-date">
                                <div>Week ${pr.week}</div>
                                <div>${formattedDate}</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';

            return html;
        }

        // Setup functions
        function showSetup() {
            document.getElementById('setup-overlay').classList.add('active');
            updateProgramVariants();
        }

        function hideSetup() {
            document.getElementById('setup-overlay').classList.remove('active');
        }

        function updateProgramVariants() {
            const programType = document.getElementById('setup-program-type').value;
            const programSelect = document.getElementById('setup-program');
            const currentValue = programSelect.value;

            // Clear existing options
            programSelect.innerHTML = '';

            // Add base options (2x-5x)
            const baseOptions = [
                { value: '2x', label: '2x - 2 days per week' },
                { value: '3x', label: '3x - 3 days per week' },
                { value: '4x', label: '4x - 4 days per week' },
                { value: '5x', label: '5x - 5 days per week' }
            ];

            baseOptions.forEach(opt => {
                const option = document.createElement('option');
                option.value = opt.value;
                option.textContent = opt.label;
                programSelect.appendChild(option);
            });

            // Add 6x option for hypertrophy only
            if (programType === 'hypertrophy') {
                const option = document.createElement('option');
                option.value = '6x';
                option.textContent = '6x - 6 days per week';
                programSelect.appendChild(option);
            }

            // Restore previous selection if still valid, otherwise default to 3x
            if (currentValue && (programType !== 'strength' || currentValue !== '6x')) {
                programSelect.value = currentValue;
            } else {
                programSelect.value = '3x';
            }

            // Temporarily update appData.programType to show correct weeks in selector
            const oldProgramType = appData.programType;
            appData.programType = programType;
            updateWeekSelectors();
            appData.programType = oldProgramType;
        }

        function completeSetup() {
            // Get values from setup form
            const programType = document.getElementById('setup-program-type').value;
            const selectedProgram = document.getElementById('setup-program').value;
            const startWeek = parseInt(document.getElementById('setup-week').value);
            const squat1RM = parseFloat(document.getElementById('setup-squat').value);
            const bench1RM = parseFloat(document.getElementById('setup-bench').value);
            const deadlift1RM = parseFloat(document.getElementById('setup-deadlift').value);
            const ohp1RM = parseFloat(document.getElementById('setup-ohp').value);

            // Get auxiliary exercise selections
            const squatAux1 = document.getElementById('setup-squat-aux-1').value;
            const squatAux2 = document.getElementById('setup-squat-aux-2').value;
            const benchAux1 = document.getElementById('setup-bench-aux-1').value;
            const benchAux2 = document.getElementById('setup-bench-aux-2').value;
            const deadliftAux = document.getElementById('setup-deadlift-aux').value;
            const ohpAux = document.getElementById('setup-ohp-aux').value;

            // Validate inputs
            if (isNaN(squat1RM) || isNaN(bench1RM) || isNaN(deadlift1RM) || isNaN(ohp1RM)) {
                showToast('Please enter valid numbers for all 1RM values.', 'error', 4000);
                return;
            }

            // Update app data
            appData.programType = programType;
            appData.selectedProgram = selectedProgram;
            appData.currentWeek = startWeek;
            appData.currentDay = 1;  // Reset to day 1
            appData.oneRepMaxes = {
                squat: squat1RM,
                bench: bench1RM,
                deadlift: deadlift1RM,
                ohp: ohp1RM
            };
            appData.auxiliaryExercises = {
                'squat-aux-1': squatAux1,
                'squat-aux-2': squatAux2,
                'bench-aux-1': benchAux1,
                'bench-aux-2': benchAux2,
                'deadlift-aux': deadliftAux,
                'ohp-aux': ohpAux
            };
            appData.setupComplete = true;

            // Load the starting week
            if (!appData.workouts[startWeek]) {
                appData.workouts[startWeek] = getWeekData(startWeek);
            }

            // Save and update UI
            saveData();
            updateWeekSelectors();
            hideSetup();
            prepareCurrentDay();
            renderWorkout();

            // Update settings inputs
            document.getElementById('1rm-squat').value = squat1RM;
            document.getElementById('1rm-bench').value = bench1RM;
            document.getElementById('1rm-deadlift').value = deadlift1RM;
            document.getElementById('1rm-ohp').value = ohp1RM;
            document.getElementById('week-selector').value = startWeek;
        }

        function checkSetupNeeded() {
            const saved = localStorage.getItem('sbs-tracker-v2');
            if (!saved || !appData.setupComplete) {
                showSetup();
            }
        }

        function updateWeekSelectors() {
            const maxWeek = getMaxWeek();
            const selectors = ['week-selector', 'setup-week'];

            selectors.forEach(selectorId => {
                const select = document.getElementById(selectorId);
                if (!select) return;

                const currentValue = select.value;
                select.innerHTML = '';

                for (let week = 1; week <= maxWeek; week++) {
                    const option = document.createElement('option');
                    option.value = week;

                    // Add deload labels
                    if (week === 7 || week === 14) {
                        option.textContent = `Week ${week} (Deload)`;
                    } else {
                        option.textContent = `Week ${week}`;
                    }

                    select.appendChild(option);
                }

                // Restore previous selection if still valid
                if (currentValue && parseInt(currentValue) <= maxWeek) {
                    select.value = currentValue;
                }
            });
        }

        // Initialize
        loadData();
        loadHevyState();
        loadTheme(); // Load saved theme preference
        updateWeekSelectors();
        checkSetupNeeded();
        prepareCurrentDay();
        renderWorkout();

        // Update 1RM inputs
        document.getElementById('1rm-squat').value = appData.oneRepMaxes.squat;
        document.getElementById('1rm-bench').value = appData.oneRepMaxes.bench;
        document.getElementById('1rm-deadlift').value = appData.oneRepMaxes.deadlift;
        document.getElementById('1rm-ohp').value = appData.oneRepMaxes.ohp;
        document.getElementById('week-selector').value = appData.currentWeek;

        // Load auxiliary exercise settings
        loadAuxiliarySettings();
        initSettingsNavigation();
    </script>

    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            let refreshing = false;

            // Reload page when new service worker takes control
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (!refreshing) {
                    console.log('[App] New service worker activated, reloading...');
                    refreshing = true;
                    window.location.reload();
                }
            });

            window.addEventListener('load', () => {
                // Fetch and display app version
                fetch('./sw.js')
                    .then(response => response.text())
                    .then(swContent => {
                        const versionMatch = swContent.match(/CACHE_VERSION = '([^']+)'/);
                        if (versionMatch) {
                            const version = versionMatch[1];
                            const versionEl = document.getElementById('app-version');
                            if (versionEl) {
                                versionEl.textContent = version;
                            }
                            // Store version for later use
                            window.appVersion = version;
                        }
                    })
                    .catch(err => console.error('[App] Failed to fetch version:', err));

                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('[App] ServiceWorker registered:', registration.scope);

                        // Check for updates when user returns to the app
                        document.addEventListener('visibilitychange', () => {
                            if (!document.hidden) {
                                console.log('[App] Page visible, checking for updates...');
                                registration.update();
                            }
                        });

                        // Also check periodically (every 30 minutes) in case app stays open
                        setInterval(() => {
                            registration.update();
                        }, 1800000); // 30 minutes

                        // Listen for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('[App] New service worker found, installing...');

                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New service worker available
                                    console.log('[App] New version available!');

                                    // Fetch new version number from updated service worker
                                    fetch('./sw.js?' + Date.now()) // Cache bust
                                        .then(response => response.text())
                                        .then(swContent => {
                                            const versionMatch = swContent.match(/CACHE_VERSION = '([^']+)'/);
                                            const newVersion = versionMatch ? versionMatch[1] : 'unknown';
                                            const currentVersion = window.appVersion || 'unknown';

                                            if (!window.updateToastShown) {
                                                window.updateToastShown = true;
                                                const message = `Update available: ${currentVersion} → ${newVersion}`;
                                                showUpdateToast(message, () => {
                                                    newWorker.postMessage({ type: 'SKIP_WAITING' });
                                                });
                                            }
                                        })
                                        .catch(() => {
                                            if (!window.updateToastShown) {
                                                window.updateToastShown = true;
                                                showUpdateToast('A new version of SBS Tracker is available.', () => {
                                                    newWorker.postMessage({ type: 'SKIP_WAITING' });
                                                });
                                            }
                                        });
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.error('[App] ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>

    <!-- Toast Notification Container -->
    <div class="toast-container" id="toast-container"></div>

</body>
</html>
