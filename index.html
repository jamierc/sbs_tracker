<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SBS Workout Tracker</title>
    <link rel="stylesheet" href="styles.css">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1e40af">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SBS Tracker">
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="./icon-192.png">
</head>
<body>
    <!-- Quick Setup Overlay -->
    <div id="setup-overlay" class="setup-overlay">
        <div class="setup-modal">
            <h2>Welcome to SBS Tracker!</h2>
            <p>Let's get you set up. Enter your current week and 1RM maxes to get started.</p>

            <div class="setup-section">
                <h3>Which program are you running?</h3>
                <div class="form-group">
                    <label>Program Type</label>
                    <select id="setup-program-type" onchange="updateProgramVariants()">
                        <option value="strength" selected>Reps to Failure (RTF) - 20 weeks</option>
                        <option value="hypertrophy">Hypertrophy - 21 weeks</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Program Variant</label>
                    <select id="setup-program">
                        <option value="2x">2x - 2 days per week</option>
                        <option value="3x" selected>3x - 3 days per week</option>
                        <option value="4x">4x - 4 days per week</option>
                        <option value="5x">5x - 5 days per week</option>
                    </select>
                </div>
            </div>

            <div class="setup-section">
                <h3>Which week are you starting on?</h3>
                <div class="form-group">
                    <label>Starting Week</label>
                    <select id="setup-week">
                        <option value="1">Week 1</option>
                        <option value="2">Week 2</option>
                        <option value="3">Week 3</option>
                        <option value="4">Week 4</option>
                        <option value="5">Week 5</option>
                        <option value="6">Week 6</option>
                        <option value="7">Week 7 (Deload)</option>
                        <option value="8">Week 8</option>
                        <option value="9">Week 9</option>
                        <option value="10">Week 10</option>
                        <option value="11">Week 11</option>
                        <option value="12">Week 12</option>
                        <option value="13">Week 13</option>
                        <option value="14">Week 14 (Deload)</option>
                        <option value="15">Week 15</option>
                        <option value="16" selected>Week 16</option>
                        <option value="17">Week 17</option>
                        <option value="18">Week 18</option>
                        <option value="19">Week 19</option>
                        <option value="20">Week 20</option>
                    </select>
                </div>
            </div>

            <div class="setup-section">
                <h3 id="setup-1rm-header">Enter your 1RM maxes (kg)</h3>
                <div class="form-group">
                    <label id="setup-label-squat">Squat 1RM</label>
                    <input type="number" id="setup-squat" value="100" step="2.5" placeholder="e.g. 100">
                </div>
                <div class="form-group">
                    <label id="setup-label-bench">Bench Press 1RM</label>
                    <input type="number" id="setup-bench" value="100" step="2.5" placeholder="e.g. 100">
                </div>
                <div class="form-group">
                    <label id="setup-label-deadlift">Deadlift 1RM</label>
                    <input type="number" id="setup-deadlift" value="140" step="2.5" placeholder="e.g. 140">
                </div>
                <div class="form-group">
                    <label id="setup-label-ohp">OHP 1RM</label>
                    <input type="number" id="setup-ohp" value="50" step="2.5" placeholder="e.g. 50">
                </div>
            </div>

            <div class="setup-section">
                <h3>Choose Your Auxiliary Exercises</h3>
            <p class="helper-text">Select which exercises you want to use as accessories for each main lift.</p>

                <div class="form-group">
                    <label>Squat Auxiliary 1</label>
                    <select id="setup-squat-aux-1">
                        <option value="Front Squat">Front Squat</option>
                        <option value="Paused Squat">Paused Squat</option>
                        <option value="High Bar Squat">High Bar Squat</option>
                        <option value="Beltless Squat">Beltless Squat</option>
                        <option value="Wider Stance Squat">Wider Stance Squat</option>
                        <option value="Narrower Stance Squat">Narrower Stance Squat</option>
                        <option value="Box Squat">Box Squat</option>
                        <option value="Pin Squat">Pin Squat</option>
                        <option value="Half Squat">Half Squat</option>
                        <option value="Good Morning">Good Morning</option>
                        <option value="Squat With Slow Eccentric">Squat With Slow Eccentric</option>
                        <option value="Leg Press" selected>Leg Press</option>
                        <option value="Hack Squat">Hack Squat</option>
                        <option value="Bulgarian Split Squat">Bulgarian Split Squat</option>
                        <option value="Lunges">Lunges</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Squat Auxiliary 2</label>
                    <select id="setup-squat-aux-2">
                        <option value="Front Squat">Front Squat</option>
                        <option value="Paused Squat">Paused Squat</option>
                        <option value="High Bar Squat">High Bar Squat</option>
                        <option value="Beltless Squat">Beltless Squat</option>
                        <option value="Wider Stance Squat">Wider Stance Squat</option>
                        <option value="Narrower Stance Squat">Narrower Stance Squat</option>
                        <option value="Box Squat">Box Squat</option>
                        <option value="Pin Squat">Pin Squat</option>
                        <option value="Half Squat">Half Squat</option>
                        <option value="Good Morning">Good Morning</option>
                        <option value="Squat With Slow Eccentric">Squat With Slow Eccentric</option>
                        <option value="Leg Press">Leg Press</option>
                        <option value="Hack Squat" selected>Hack Squat</option>
                        <option value="Bulgarian Split Squat">Bulgarian Split Squat</option>
                        <option value="Lunges">Lunges</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Bench Auxiliary 1</label>
                    <select id="setup-bench-aux-1">
                        <option value="Close Grip Bench">Close Grip Bench</option>
                        <option value="Long Pause Bench">Long Pause Bench</option>
                        <option value="Spoto Press">Spoto Press</option>
                        <option value="Incline Press" selected>Incline Press</option>
                        <option value="Wider Grip Bench">Wider Grip Bench</option>
                        <option value="Board Press">Board Press</option>
                        <option value="Pin Press">Pin Press</option>
                        <option value="Slingshot Bench">Slingshot Bench</option>
                        <option value="Bench With Feet Up">Bench With Feet Up</option>
                        <option value="Bench With Slow Eccentric">Bench With Slow Eccentric</option>
                        <option value="DB Bench">DB Bench</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Bench Auxiliary 2</label>
                    <select id="setup-bench-aux-2">
                        <option value="Close Grip Bench">Close Grip Bench</option>
                        <option value="Long Pause Bench">Long Pause Bench</option>
                        <option value="Spoto Press">Spoto Press</option>
                        <option value="Incline Press">Incline Press</option>
                        <option value="Wider Grip Bench">Wider Grip Bench</option>
                        <option value="Board Press">Board Press</option>
                        <option value="Pin Press">Pin Press</option>
                        <option value="Slingshot Bench">Slingshot Bench</option>
                        <option value="Bench With Feet Up">Bench With Feet Up</option>
                        <option value="Bench With Slow Eccentric">Bench With Slow Eccentric</option>
                        <option value="DB Bench" selected>DB Bench</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Deadlift Auxiliary</label>
                    <select id="setup-deadlift-aux">
                        <option value="Sumo Deadlift">Sumo Deadlift</option>
                        <option value="Conventional Deadlift">Conventional Deadlift</option>
                        <option value="Block Pull">Block Pull</option>
                        <option value="Rack Pull">Rack Pull</option>
                        <option value="Deficit Deadlift">Deficit Deadlift</option>
                        <option value="Romanian Deadlift" selected>Romanian Deadlift</option>
                        <option value="Stiff Leg Deadlift">Stiff Leg Deadlift</option>
                        <option value="Snatch Grip Deadlift">Snatch Grip Deadlift</option>
                        <option value="Trap Bar Deadlift">Trap Bar Deadlift</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>OHP Auxiliary</label>
                    <select id="setup-ohp-aux">
                        <option value="Push Press">Push Press</option>
                        <option value="Behind The Neck OHP">Behind The Neck OHP</option>
                        <option value="Seated OHP">Seated OHP</option>
                        <option value="DB OHP" selected>DB OHP</option>
                    </select>
                </div>
            </div>

            <div class="setup-actions">
                <button class="btn btn-primary" onclick="completeSetup()">Start Training!</button>
            </div>
        </div>
    </div>

    <div class="header">
        <h1>SBS Workout Tracker</h1>
        <div class="week-info">
            <button class="week-nav-btn" onclick="navigateWeek(-1)" id="prev-week-btn">‚Üê</button>
            <span class="week-pill">Week <span id="current-week">16</span></span>
            <span class="week-pill" id="program-type-display">Strength</span>
            <span class="week-pill" id="program-variant-display">3x</span>
            <button class="week-nav-btn" onclick="navigateWeek(1)" id="next-week-btn">‚Üí</button>
        </div>
        <div class="data-status" aria-live="polite">
            <span>Data</span>
            <span class="data-status-pill" id="data-status-pill">Loading</span>
            <span id="data-status-text">Preparing your plan</span>
        </div>
    </div>

    <div class="nav-tabs">
        <button class="nav-tab active" onclick="switchTab('workout')">Workout</button>
        <button class="nav-tab" onclick="switchTab('progress')">Progress</button>
        <button class="nav-tab" onclick="switchTab('settings')">Settings</button>
        <button class="nav-tab" onclick="switchTab('history')">History</button>
    </div>

    <div id="workout-tab" class="tab-content active">
        <div class="week-summary-card card">
            <div class="week-summary-label">Current Week</div>
            <div class="week-summary-value" id="workout-week-display">16</div>
        </div>
        <div class="day-selector" id="day-selector">
            <!-- Day buttons will be dynamically generated -->
        </div>
        <div id="workout-onboarding" class="onboarding-hint hidden">
            <strong>First day on this plan?</strong>
            Tap each set circle to mark it complete, then log your last set and hit ‚ÄúMark Day Complete‚Äù to track progress.
        </div>
        <div id="workout-container"></div>
        <div class="button-stack">
            <button class="btn btn-secondary btn-icon" onclick="showRestTimer(); startTimer();">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="13" r="8"/><polyline points="12 9 12 13 15 15"/><path d="M8 3h8M12 3v2"/>
                </svg>
                Start Rest Timer
            </button>
            <button class="btn btn-secondary" onclick="sendCurrentDayToHevy()">Sync to Hevy</button>
            <button class="btn btn-primary" onclick="markDayComplete()" id="mark-day-btn">Mark Day Complete</button>
        </div>
    </div>

    <!-- Rest Timer -->
    <div id="rest-timer" class="rest-timer" style="display: none;">
        <div class="timer-display" id="timer-display">3:00</div>
        <div class="timer-controls">
            <button class="timer-btn" onclick="startTimer()" id="start-timer-btn">Start</button>
            <button class="timer-btn" onclick="pauseTimer()" id="pause-timer-btn" style="display: none;">Pause</button>
            <button class="timer-btn secondary" onclick="resetTimer()">Reset</button>
            <button class="timer-btn secondary" onclick="closeTimer()">‚úï</button>
        </div>
    </div>

    <div id="settings-tab" class="tab-content">
        <div class="settings-layout">
            <aside class="settings-sidebar">
                <div class="settings-nav" role="tablist" aria-label="Settings sections">
                    <button class="settings-nav-button" id="settings-tab-program" data-section="program" aria-controls="settings-panel-program" role="tab">Program</button>
                    <button class="settings-nav-button" id="settings-tab-accessories" data-section="accessories" aria-controls="settings-panel-accessories" role="tab">Accessories</button>
                    <button class="settings-nav-button" id="settings-tab-tracking" data-section="tracking" aria-controls="settings-panel-tracking" role="tab">Tracking</button>
                    <button class="settings-nav-button" id="settings-tab-integrations" data-section="integrations" aria-controls="settings-panel-integrations" role="tab">Integrations</button>
                    <button class="settings-nav-button" id="settings-tab-data" data-section="data" aria-controls="settings-panel-data" role="tab">Data</button>
                    <button class="settings-nav-button" id="settings-tab-appearance" data-section="appearance" aria-controls="settings-panel-appearance" role="tab">Appearance</button>
                    <button class="settings-nav-button" id="settings-tab-info" data-section="info" aria-controls="settings-panel-info" role="tab">Info</button>
                </div>
            </aside>

            <div class="settings-panels">
                <section class="settings-panel" data-section="program" id="settings-panel-program" role="tabpanel" aria-labelledby="settings-tab-program" tabindex="0">
                    <div class="settings-section">
                        <h2>Weight Unit</h2>
                        <p class="helper-text">Choose your preferred weight unit. All weights throughout the app will display in this unit.</p>
                        <div class="form-group">
                            <label>Unit</label>
                            <select id="weight-unit" onchange="updateWeightUnit()">
                                <option value="kg" selected>Kilograms (kg)</option>
                                <option value="lbs">Pounds (lbs)</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>1RM Settings</h2>
                        <div class="form-group">
                            <label id="label-squat-1rm">Squat 1RM (kg)</label>
                            <input type="number" id="1rm-squat" value="100" step="2.5">
                        </div>
                        <div class="form-group">
                            <label id="label-bench-1rm">Bench Press 1RM (kg)</label>
                            <input type="number" id="1rm-bench" value="100" step="2.5">
                        </div>
                        <div class="form-group">
                            <label id="label-deadlift-1rm">Deadlift 1RM (kg)</label>
                            <input type="number" id="1rm-deadlift" value="140" step="2.5">
                        </div>
                        <div class="form-group">
                            <label id="label-ohp-1rm">OHP 1RM (kg)</label>
                            <input type="number" id="1rm-ohp" value="50" step="2.5">
                        </div>
                        <button class="btn btn-secondary" onclick="save1RMs()">Save 1RMs</button>
                    </div>

                    <div class="settings-section">
                        <h2>Week Selection</h2>
                        <div class="form-group">
                            <label>Jump to Week</label>
                            <select id="week-selector">
                                <option value="1">Week 1</option>
                                <option value="2">Week 2</option>
                                <option value="3">Week 3</option>
                                <option value="4">Week 4</option>
                                <option value="5">Week 5</option>
                                <option value="6">Week 6</option>
                                <option value="7">Week 7 (Deload)</option>
                                <option value="8">Week 8</option>
                                <option value="9">Week 9</option>
                                <option value="10">Week 10</option>
                                <option value="11">Week 11</option>
                                <option value="12">Week 12</option>
                                <option value="13">Week 13</option>
                                <option value="14">Week 14 (Deload)</option>
                                <option value="15">Week 15</option>
                                <option value="16" selected>Week 16</option>
                                <option value="17">Week 17</option>
                                <option value="18">Week 18</option>
                                <option value="19">Week 19</option>
                                <option value="20">Week 20</option>
                            </select>
                        </div>
                        <button class="btn btn-secondary" onclick="jumpToWeek()">Jump to Selected Week</button>
                    </div>

                    <div class="settings-section">
                        <h2>Change Program</h2>
                        <p class="helper-text">Switch between Reps to Failure and Hypertrophy programs, or change your program variant. Your workout history will be preserved.</p>

                        <div class="form-group">
                            <label>Program Type</label>
                            <select id="settings-program-type" onchange="updateSettingsProgramVariants()">
                                <option value="strength">Reps to Failure (RTF) - 20 weeks</option>
                                <option value="hypertrophy">Hypertrophy - 21 weeks</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Program Variant</label>
                            <select id="settings-program-variant">
                                <option value="2x">2x Frequency</option>
                                <option value="3x">3x Frequency</option>
                                <option value="4x">4x Frequency</option>
                                <option value="5x">5x Frequency</option>
                            </select>
                        </div>

                        <button class="btn btn-secondary" onclick="changeProgram()">Change Program</button>
                    </div>
                </section>

                <section class="settings-panel" data-section="accessories" id="settings-panel-accessories" role="tabpanel" aria-labelledby="settings-tab-accessories" tabindex="0">
                    <div class="settings-section">
                        <h2>Auxiliary Exercises</h2>
                        <p class="helper-text">Choose which auxiliary exercises to use for each main lift. Changes will apply to future workouts.</p>

                        <div class="form-group">
                            <label>Squat Auxiliary 1</label>
                            <select id="settings-squat-aux-1">
                                <option value="Front Squat">Front Squat</option>
                                <option value="Paused Squat">Paused Squat</option>
                                <option value="High Bar Squat">High Bar Squat</option>
                                <option value="Beltless Squat">Beltless Squat</option>
                                <option value="Wider Stance Squat">Wider Stance Squat</option>
                                <option value="Narrower Stance Squat">Narrower Stance Squat</option>
                                <option value="Box Squat">Box Squat</option>
                                <option value="Pin Squat">Pin Squat</option>
                                <option value="Half Squat">Half Squat</option>
                                <option value="Good Morning">Good Morning</option>
                                <option value="Squat With Slow Eccentric">Squat With Slow Eccentric</option>
                                <option value="Leg Press" selected>Leg Press</option>
                                <option value="Hack Squat">Hack Squat</option>
                                <option value="Bulgarian Split Squat">Bulgarian Split Squat</option>
                                <option value="Lunges">Lunges</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Squat Auxiliary 2</label>
                            <select id="settings-squat-aux-2">
                                <option value="Front Squat">Front Squat</option>
                                <option value="Paused Squat">Paused Squat</option>
                                <option value="High Bar Squat">High Bar Squat</option>
                                <option value="Beltless Squat">Beltless Squat</option>
                                <option value="Wider Stance Squat">Wider Stance Squat</option>
                                <option value="Narrower Stance Squat">Narrower Stance Squat</option>
                                <option value="Box Squat">Box Squat</option>
                                <option value="Pin Squat">Pin Squat</option>
                                <option value="Half Squat">Half Squat</option>
                                <option value="Good Morning">Good Morning</option>
                                <option value="Squat With Slow Eccentric">Squat With Slow Eccentric</option>
                                <option value="Leg Press">Leg Press</option>
                                <option value="Hack Squat" selected>Hack Squat</option>
                                <option value="Bulgarian Split Squat">Bulgarian Split Squat</option>
                                <option value="Lunges">Lunges</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Bench Auxiliary 1</label>
                            <select id="settings-bench-aux-1">
                                <option value="Close Grip Bench">Close Grip Bench</option>
                                <option value="Long Pause Bench">Long Pause Bench</option>
                                <option value="Spoto Press">Spoto Press</option>
                                <option value="Incline Press" selected>Incline Press</option>
                                <option value="Wider Grip Bench">Wider Grip Bench</option>
                                <option value="Board Press">Board Press</option>
                                <option value="Pin Press">Pin Press</option>
                                <option value="Slingshot Bench">Slingshot Bench</option>
                                <option value="Bench With Feet Up">Bench With Feet Up</option>
                                <option value="Bench With Slow Eccentric">Bench With Slow Eccentric</option>
                                <option value="DB Bench">DB Bench</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Bench Auxiliary 2</label>
                            <select id="settings-bench-aux-2">
                                <option value="Close Grip Bench">Close Grip Bench</option>
                                <option value="Long Pause Bench">Long Pause Bench</option>
                                <option value="Spoto Press">Spoto Press</option>
                                <option value="Incline Press">Incline Press</option>
                                <option value="Wider Grip Bench">Wider Grip Bench</option>
                                <option value="Board Press">Board Press</option>
                                <option value="Pin Press">Pin Press</option>
                                <option value="Slingshot Bench">Slingshot Bench</option>
                                <option value="Bench With Feet Up">Bench With Feet Up</option>
                                <option value="Bench With Slow Eccentric">Bench With Slow Eccentric</option>
                                <option value="DB Bench" selected>DB Bench</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Deadlift Auxiliary</label>
                            <select id="settings-deadlift-aux">
                                <option value="Sumo Deadlift">Sumo Deadlift</option>
                                <option value="Conventional Deadlift">Conventional Deadlift</option>
                                <option value="Block Pull">Block Pull</option>
                                <option value="Rack Pull">Rack Pull</option>
                                <option value="Deficit Deadlift">Deficit Deadlift</option>
                                <option value="Romanian Deadlift" selected>Romanian Deadlift</option>
                                <option value="Stiff Leg Deadlift">Stiff Leg Deadlift</option>
                                <option value="Snatch Grip Deadlift">Snatch Grip Deadlift</option>
                                <option value="Trap Bar Deadlift">Trap Bar Deadlift</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>OHP Auxiliary</label>
                            <select id="settings-ohp-aux">
                                <option value="Push Press">Push Press</option>
                                <option value="Behind The Neck OHP">Behind The Neck OHP</option>
                                <option value="Seated OHP">Seated OHP</option>
                                <option value="DB OHP" selected>DB OHP</option>
                            </select>
                        </div>

                        <button class="btn btn-secondary" onclick="saveAuxiliaryExercises()">Save Auxiliary Exercises</button>
                    </div>
                </section>

                <section class="settings-panel" data-section="tracking" id="settings-panel-tracking" role="tabpanel" aria-labelledby="settings-tab-tracking" tabindex="0">
                    <div class="settings-section">
                        <h2>Rest Timer</h2>
                        <p class="helper-text">Configure rest timer between sets.</p>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="rest-timer-enabled" checked>
                                Enable Rest Timer
                            </label>
                        </div>

                        <div class="form-group">
                            <label>Rest Duration (seconds)</label>
                            <input type="number" id="rest-timer-duration" value="180" min="30" max="600" step="30">
                            <small class="form-help">Recommended: 180-300 seconds (3-5 minutes) for main lifts</small>
                        </div>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="rest-timer-autostart">
                                Auto-start timer after entering last set result
                            </label>
                        </div>

                        <button class="btn btn-secondary" onclick="saveRestTimerSettings()">Save Rest Timer Settings</button>
                    </div>

                    <div class="settings-section">
                        <h2>Plate Calculator</h2>
                        <p class="helper-text">Configure plate calculator to show which plates to load on the bar.</p>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="plate-calculator-enabled" onchange="togglePlateCalculator()" checked>
                                Show Plate Calculator
                            </label>
                        </div>

                        <div class="form-group">
                            <label id="label-barbell-weight">Barbell Weight</label>
                            <select id="barbell-weight">
                                <option value="20" selected>20kg (Standard Olympic)</option>
                                <option value="15">15kg (Women's Olympic)</option>
                                <option value="10">10kg (Training Bar)</option>
                                <option value="0">0kg (Dumbbells/Machines)</option>
                            </select>
                        </div>

                        <button class="btn btn-secondary" onclick="savePlateSettings()">Save Plate Settings</button>
                    </div>
                </section>

                <section class="settings-panel" data-section="integrations" id="settings-panel-integrations" role="tabpanel" aria-labelledby="settings-tab-integrations" tabindex="0">
                    <div class="settings-section">
                        <h2>Hevy Sync</h2>
                        <p class="helper-text">Store your Hevy API key locally to send workouts directly to Hevy.</p>
                        <p class="helper-text">Use the "Send to Hevy" button on the Workout tab to export today‚Äôs workout.</p>

                        <div class="form-group">
                            <label>Hevy API Key</label>
                            <input type="password" id="hevy-api-key" placeholder="Paste your Hevy API key">
                        </div>

                        <div class="form-group">
                            <label>Default Workout Duration (minutes)</label>
                            <input type="number" id="hevy-duration" min="0" step="5">
                        </div>

                        <div class="form-group">
                            <label>Privacy</label>
                            <select id="hevy-privacy">
                                <option value="private">Private</option>
                                <option value="public">Public</option>
                            </select>
                        </div>

                        <div class="form-group form-group-spaced">
                            <label>Exercise Name Overrides (JSON)</label>
                            <textarea id="hevy-name-overrides" rows="6" placeholder='{"Bench Press":"Barbell Bench Press"}'></textarea>
                        </div>

                        <button class="btn btn-secondary" onclick="saveHevySettings()">Save Hevy Settings</button>
                        <button class="btn btn-secondary" onclick="syncHevyExerciseTemplates()">Sync Hevy Exercise Templates</button>
                        <p class="helper-text" id="hevy-sync-status"></p>
                    </div>
                </section>

                <section class="settings-panel" data-section="data" id="settings-panel-data" role="tabpanel" aria-labelledby="settings-tab-data" tabindex="0">
                    <div class="settings-section">
                        <h2>Export & Backup</h2>
                        <p class="helper-text">Export your workout data for backup or analysis. Import to restore from a backup.</p>

                        <button class="btn btn-secondary" onclick="exportToJSON()">Export Full Backup (JSON)</button>
                        <button class="btn btn-secondary" onclick="exportToCSV()">Export Workout History (CSV)</button>
                        <button class="btn btn-secondary" onclick="exportToHevyCSV()">Export Current Day (Hevy CSV)</button>

                        <div class="form-group form-group-spaced">
                            <label>Import Backup (JSON)</label>
                            <input type="file" id="import-file" accept=".json" class="file-input">
                        </div>
                        <button class="btn btn-secondary" onclick="importFromJSON()">Import Backup</button>
                    </div>

                    <div class="settings-section">
                        <h2>Diagnostics</h2>
                        <p class="helper-text">Generate a debug snapshot if you need to share details for troubleshooting.</p>

                        <button class="btn btn-secondary" onclick="copyDebugSnapshot()">Copy Debug Snapshot</button>
                        <button class="btn btn-secondary" onclick="downloadDebugSnapshot()">Download Debug JSON</button>
                    </div>

                    <div class="settings-section">
                        <h2>Data Management</h2>
                        <button class="btn btn-danger" onclick="resetAll()">Reset All Data</button>
                    </div>
                </section>

                <section class="settings-panel" data-section="appearance" id="settings-panel-appearance" role="tabpanel" aria-labelledby="settings-tab-appearance" tabindex="0">
                    <div class="settings-section">
                        <h2>Appearance</h2>
                        <div class="form-group">
                            <label>Theme</label>
                            <button class="btn btn-secondary" onclick="toggleTheme()">
                                <span id="theme-icon" aria-hidden="true">üåô</span>
                                Toggle Light/Dark Mode
                            </button>
                        </div>
                    </div>
                </section>

                <section class="settings-panel" data-section="info" id="settings-panel-info" role="tabpanel" aria-labelledby="settings-tab-info" tabindex="0">
                    <div class="settings-section">
                        <h2>App Info</h2>
                        <div class="info-block">
                            <p><strong>Version:</strong> <span id="app-version">Loading...</span></p>
                            <p class="info-subtext">
                                SBS Workout Tracker - Built for Stronger By Science programs
                            </p>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>Contact & Feedback</h2>
                        <p class="helper-text">Send feedback, report bugs, or request features. We'll get back to you via email.</p>

                        <form id="contact-form" onsubmit="handleContactFormSubmit(event)">
                            <!-- Hidden fields for Web3Forms -->
                            <input type="hidden" name="access_key" value="YOUR_ACCESS_KEY_HERE">
                            <input type="hidden" name="subject" value="SBS Tracker">
                            <input type="checkbox" name="botcheck" style="display: none;">

                            <div class="form-group">
                                <label>Name *</label>
                                <input type="text" name="name" required placeholder="Your name">
                            </div>

                            <div class="form-group">
                                <label>Email *</label>
                                <input type="email" name="email" required placeholder="Your email">
                            </div>

                            <div class="form-group">
                                <label>Feedback Type *</label>
                                <select name="type" required>
                                    <option value="Feature Request">Feature Request</option>
                                    <option value="Bug Report">Bug Report</option>
                                    <option value="General Feedback" selected>General Feedback</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Message *</label>
                                <textarea name="message" required placeholder="Tell us what's on your mind..."></textarea>
                            </div>

                            <button type="submit" class="btn btn-secondary">Send Feedback</button>
                        </form>
                    </div>
                </section>
            </div>
        </div>
    </div>
<div id="progress-tab" class="tab-content">
        <div id="progress-container"></div>
    </div>

    <div id="history-tab" class="tab-content">
        <div id="history-container"></div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <button class="bottom-nav-item active" onclick="switchTab('workout')" data-tab="workout">
            <div class="bottom-nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="6" cy="12" r="3"/><circle cx="18" cy="12" r="3"/><line x1="9" y1="12" x2="15" y2="12"/>
                </svg>
            </div>
            <div class="bottom-nav-label">Workout</div>
        </button>
        <button class="bottom-nav-item" onclick="switchTab('progress')" data-tab="progress">
            <div class="bottom-nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="7" y1="17" x2="7" y2="13"/><line x1="12" y1="17" x2="12" y2="9"/><line x1="17" y1="17" x2="17" y2="5"/>
                </svg>
            </div>
            <div class="bottom-nav-label">Progress</div>
        </button>
        <button class="bottom-nav-item" onclick="switchTab('settings')" data-tab="settings">
            <div class="bottom-nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v10M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h10M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2"/>
                </svg>
            </div>
            <div class="bottom-nav-label">Settings</div>
        </button>
        <button class="bottom-nav-item" onclick="switchTab('history')" data-tab="history">
            <div class="bottom-nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="8" y1="6" x2="16" y2="6"/><line x1="8" y1="12" x2="16" y2="12"/><line x1="8" y1="18" x2="13" y2="18"/>
                </svg>
            </div>
            <div class="bottom-nav-label">History</div>
        </button>
    </nav>


    <script src="hypertrophy-program-data.js"></script>
    <script src="data-store.js"></script>
    <script src="app.js"></script>

    <!-- PWA Service Worker Registration -->
    <script src="sw-register.js"></script>

    <!-- Toast Notification Container -->
    <div class="toast-container" id="toast-container"></div>

</body>
</html>
